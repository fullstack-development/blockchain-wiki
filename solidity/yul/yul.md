# Yul

**–ê–≤—Ç–æ—Ä:** [–†–æ–º–∞–Ω –Ø—Ä–ª—ã–∫–æ–≤](https://github.com/rlkvrv) üßê

## –í–≤–µ–¥–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è

**Yul** ‚Äî —ç—Ç–æ –∞—Å—Å–µ–º–±–ª–µ—Ä —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è EVM (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã Ethereum). –û–Ω –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º –∏ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä—è–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ EVM, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏ —ç—Ç–æ–º —á–∏—Ç–∞–µ–º—ã–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.

–ù–æ —ç—Ç–æ –Ω–µ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ Ethereum, –∫ –ø—Ä–∏–º–µ—Ä—É –ø—Ä–æ–≥—Ä–∞–º–º–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ —è–∑—ã–∫–µ –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è, —Ç–∞–∫–æ–º –∫–∞–∫ C, Go –∏–ª–∏ Java, —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Å–Ω–∞—á–∞–ª–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π —è–∑—ã–∫ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞.

**–ê—Å—Å–µ–º–±–ª–µ—Ä** - —ç—Ç–æ –ª—é–±–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∏–∑–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥ (–±–∞–π—Ç-–∫–æ–¥) —Å –ø–æ–º–æ—â—å—é –∞—Å—Å–µ–º–±–ª–µ—Ä–∞. –Ø–∑—ã–∫–∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –ª–∏–±–æ –∫ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π, –ª–∏–±–æ –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ, –ø–æ—Å–∫–æ–ª—å–∫—É —Ä–µ–∞–ª–∏–∑—É—é—Ç –µ–µ –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥.

**–ë–∞–π—Ç-–∫–æ–¥ EVM** - —ç—Ç–æ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É—é—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–æ–π Ethereum (EVM).

_–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ!_ –ü–µ—Ä–µ–¥ –∏–∑—É—á–µ–Ω–∏–µ–º Yul —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç [–±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏](https://github.com/fullstack-development/blockchain-wiki/blob/main/solidity/bitwise-operators/bitwise-operators.md), –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–∞ —Å—Ç–µ–∫–æ–≤–∞—è –º–∞—à–∏–Ω–∞ [EVM](https://github.com/fullstack-development/blockchain-wiki/blob/main/ehtereum-virtual-machine/README.md), –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç [–æ–ø–∫–æ–¥—ã](https://github.com/fullstack-development/blockchain-wiki/blob/main/ehtereum-virtual-machine/evm-opcodes/README.md) –∏ –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∞ [abi](https://github.com/fullstack-development/blockchain-wiki/blob/main/solidity/ABI/readme.md). –¢–∞–∫–∂–µ –≤ –∏–∑—É—á–µ–Ω–∏–∏ –æ—á–µ–Ω—å –ø–æ–º–æ–∂–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∏–¥–æ–≤ –ø–∞–º—è—Ç–∏ –≤ EVM (storage, memory, calldata) –∏ –∫–∞–∫–∏–µ –µ—Å—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –Ω–∏–º–∏.

### –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω Yul

–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ Yul - —ç—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –ø–æ –≥–∞–∑—É, –∫–∞–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ —è–∑—ã–∫–∞ —Ç–∞–∫ –∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞, –∞ —Ç–∞–∫–∂–µ –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–¥–∞.

Yul –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ [inline assembly](https://docs.soliditylang.org/en/latest/assembly.html) (¬´–≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Å–±–æ—Ä–∫–∏¬ª) –≤ –∫–æ–¥–µ solidity, –∞ –º–æ–∂–Ω–æ [–Ω–∞–ø–∏—Å–∞—Ç—å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–∞ —á–∏—Å—Ç–æ–º Yul](#—Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã-–Ω–∞-—è–∑—ã–∫–µ-yul) –≤–æ–æ–±—â–µ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è solidity.

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Yul –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —è–∑—ã–∫–∞ –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–µ –∫–æ–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ [IR](https://docs.soliditylang.org/en/latest/ir-breaking-changes.html) (Intermediate Representation).

–î–∏–∑–∞–π–Ω Yul –ø—ã—Ç–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∏—á—å —Å–ª–µ–¥—É—é—â–∏—Ö —Ü–µ–ª–µ–π:

1. –ü—Ä–æ–≥—Ä–∞–º–º—ã, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–∞ Yul, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º–∏, –¥–∞–∂–µ –µ—Å–ª–∏ –∫–æ–¥ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º –∏–∑ solidity –∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ —è–∑—ã–∫–∞ –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è.
2. –ü–æ—Ç–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ—Å—Ç—ã–º –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, —á—Ç–æ–±—ã –æ–±–ª–µ–≥—á–∏—Ç—å —Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É, —Ñ–æ—Ä–º–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é.
3. –ü–µ—Ä–µ–≤–æ–¥ –∏–∑ Yul –≤ –±–∞–π—Ç-–∫–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–º.
4. Yul –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ü–µ–ª–∏–∫–æ–º.

–î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–µ—Ä–≤–æ–π –∏ –≤—Ç–æ—Ä–æ–π —Ü–µ–ª–∏ Yul –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ —Ü–∏–∫–ª—ã `for`, –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã `if` –∏ `switch`, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π. –≠—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ. –ü—Ä–∏ —ç—Ç–æ–º –Ω–µ—Ç —è–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–µ–∫–æ–º - `SWAP`, `DUP`, `JUMPDEST` `JUMP` –∏ `JUMPI`, –ø–æ—Å–∫–æ–ª—å–∫—É –ø–µ—Ä–≤—ã–µ –¥–≤–µ –∑–∞–ø—É—Ç—ã–≤–∞—é—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö, –∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∏ –∑–∞–ø—É—Ç—ã–≤–∞—é—Ç –ø–æ—Ç–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

_–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ!_ –í Yul –≤—Å–µ –∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å—Ç–µ–∫—É —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ [verbatim](https://docs.soliditylang.org/en/latest/yul.html#verbatim).

### –° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ?

–ï—Å–ª–∏ –≤—ã —É–∂–µ –∏–∑—É—á–∏–ª–∏ –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–∏–ª–∏ —Ç–µ–º—ã –æ–∑–≤—É—á–µ–Ω–Ω—ã–µ [–≤—ã—à–µ](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–ø–æ–Ω—è—Ç–∏—è), —Ç–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [—Å–µ—Ä–∏—é –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–∏–¥–µ–æ](https://youtube.com/playlist?list=PL5hld-skrdFrxGUmmEbG1LBvYVyTE9M62&si=jwXH_rtSvoNfrDPg), –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å [–≤–æ—Ç —ç—Ç—É](https://medium.com/lumos-labs/inline-assembly-in-solidity-34d3ba2cfa7a) —Å—Ç–∞—Ç—å—é. –í –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞ –º–æ–∂–Ω–æ –ø–æ–¥—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å [–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏](https://docs.soliditylang.org/en/latest/yul.html#evm-dialect) –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ Yul.

–õ—É—á—à–µ –ø–æ–Ω—è—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∫–æ–¥–µ –ø–æ–º–æ–∂–µ—Ç [Remix Debugger](https://medium.com/@kulman.david/how-to-use-remix-debugger-to-learn-solidity-assembly-5a745a22bb07), —ç—Ç–æ –æ—á–µ–Ω—å –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ –¥–µ–±–∞–≥–≥–∏–Ω–≥–∞ –∫–æ–¥–∞ solidity –∏ Yul. –¢–∞–∫–∂–µ –ø–æ–¥–æ–π–¥–µ—Ç [debugger –æ—Ç foundry](https://book.getfoundry.sh/forge/debugger?highlight=debugger#debugger) –∏–ª–∏ [Playground –æ—Ç evm.codes](https://www.evm.codes/playground) (–¥–∞–ª–µ–µ –≤ —Ç–µ–∫—Å—Ç–µ –≤–º–µ—Å—Ç–æ "debugger" —è –±—É–¥—É —É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å —Å–ª–æ–≤–æ "–æ—Ç–ª–∞–¥—á–∏–∫").

–ú–æ–∂–Ω–æ –≥–ª—è–Ω—É—Ç—å —Å–µ—Ä–∏—é –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Ç–∞—Ç–µ–π –æ—Ç Naveen: [—á–∞—Å—Ç—å 0](https://mirror.xyz/0xB38709B8198d147cc9Ff9C133838a044d78B064B/nk40v2MJKSHXXNSlbqqhpwJf4MtZ9V2Vp8P_bSNwjYc), [—á–∞—Å—Ç—å 1](https://mirror.xyz/0xB38709B8198d147cc9Ff9C133838a044d78B064B/PpA5KdQhrE_2Bf-USfKePROJ5tE-raL7_VGBR8HE39E), [—á–∞—Å—Ç—å 2](https://mirror.xyz/0xB38709B8198d147cc9Ff9C133838a044d78B064B/Hh69VJWM5eiFYFINxYWrIYWcRRtPm8tw3VFjpdpx6T8).

–ü–æ—Å–ª–µ —á–µ–≥–æ –º–æ–∂–Ω–æ –ø—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∫ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.soliditylang.org/en/latest/yul.html) –∏ –ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–∏—Å–∞—Ç—å —á—Ç–æ-—Ç–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑–±–∏—Ä–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –Ω–∏–∂–µ.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —è–∑—ã–∫–∞

–ö–æ–¥ Yul –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º, —Ç–∞–∫ –∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –∏–∑ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö —è–∑—ã–∫–æ–≤ —Ç–∞–∫–∏—Ö –∫–∞–∫ solidity –∏–ª–∏ vyper. –ù–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç solidity –≤ –Ω–µ–º –ø–æ—á—Ç–∏ –≤—Å–µ –¥–µ–ª–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π, abi.encode, —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ —Ç.–¥.

–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –∞—Å—Å–µ–º–±–ª–µ—Ä –¥–µ–ª–∞–µ—Ç –∑–∞ –≤–∞—Å, - —ç—Ç–æ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–µ—Ç –∫–æ–¥—ã –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ, –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—ã—Å–æ—Ç—É —Å—Ç–µ–∫–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –∏ —É–¥–∞–ª—è–µ—Ç —Å–ª–æ—Ç—ã —Å—Ç–µ–∫–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—Ä–∫–∏, –∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∫–æ–Ω–µ—Ü –∏—Ö –±–ª–æ–∫–∞.

–£—á–∏—Ç—ã–≤–∞—è –≤—Å–µ —ç—Ç–æ –æ—à–∏–±–∫—É –º–æ–∂–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ª—é–±–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ Yul: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –Ω–µ–≤–µ—Ä–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–≤ —Å–º–µ—â–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ –∏–ª–∏ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö. –ù—É–∂–Ω–æ —á–µ—Ç–∫–æ –ø–æ–Ω–∏–º–∞—Ç—å —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏ –∑–∞—á–µ–º. –°–∞–º—ã–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Å—á–∏—Ç–∞–µ—Ç—Å—è —Å–æ—á–µ—Ç–∞–Ω–∏–µ solidity + inline assembly –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —á–∞—Å—Ç–µ–π –∫–æ–¥–∞, –∞ —Ç–∞–∫–∂–µ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ –≥–∞–∑—É –±–∏–±–ª–∏–æ—Ç–µ–∫, —Ç–∞–∫–∏—Ö –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ - [strings](https://github.com/Arachnid/solidity-stringutils) –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å [bytes](https://github.com/GNSPS/solidity-bytes-utils/blob/master/contracts/BytesLib.sol).

### –û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏

–ï—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–æ inline assembly, —Ç–æ —Ç–∞–∫–∏–µ –±–ª–æ–∫–∏ –Ω–µ –º–æ–≥—É—Ç ¬´–æ–±—â–∞—Ç—å—Å—è¬ª –º–µ–∂–¥—É —Å–æ–±–æ–π. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–º `assembly { ... }` –±–ª–æ–∫–µ, –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –¥—Ä—É–≥–æ–≥–æ `assembly { ... }` –±–ª–æ–∫–∞. –ü—Ä–∏ —ç—Ç–æ–º –¥–æ—Å—Ç—É–ø –∫ solidity –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –±—É–¥–µ—Ç —É –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤ memory.

–¢–∞–∫–∂–µ –≤–Ω—É—Ç—Ä–∏ assembly –±–ª–æ–∫–∞ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `{ ... }`:

```js
    assembly {
        let x := 3          // x –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤–æ –≤—Å–µ—Ö –æ–±–ª–∞—Å—Ç—è—Ö –≤–∏–¥–∏–º–æ—Å—Ç–∏

        // –û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ 1
        {
            let y := x     // —Ç—É—Ç –≤—Å–µ –ø—Ä–æ–∏–¥–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
        }

        // –û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏  2
        {
            let z := y     // –∞ —Ç—É—Ç –ø–æ–ª—É—á–∏–º –æ—à–∏–±–∫—É
        }
    }
```

–ù–æ —ç—Ç–æ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Ü–∏–∫–ª—É `for` –∏ `function`.

–í standalone assembly (–∫–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –Ω–∞ —á–∏—Å—Ç–æ–º Yul) —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∏–¥—ã –æ—Ç–Ω–æ—à–µ–Ω–∏–π –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏, –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º [–∑–¥–µ—Å—å](https://docs.soliditylang.org/en/latest/yul.html#specification-of-yul-object).

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

–°–∏–Ω—Ç–∞–∫—Å–∏—Å Yul –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç solidity. –ü–µ—Ä–≤–æ–µ —á—Ç–æ –±—Ä–æ—Å–∞–µ—Ç—Å—è –≤ –≥–ª–∞–∑–∞ - –ø–æ—Å–ª–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –Ω–µ –Ω—É–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å —Ç–æ—á–∫—É —Å –∑–∞–ø—è—Ç–æ–π `;`, –≤–º–µ—Å—Ç–æ –ø—Ä–∏–≤—ã—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö - `+`, `-` –∏ —Ç.–¥.) –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ [–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏](https://docs.soliditylang.org/en/latest/yul.html#evm-dialect), –∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–æ—Ç —Ç–∞–∫ `:=`.
–ß—Ç–æ–±—ã –æ–±—ä—è–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `let`. –ï—Å–ª–∏ –æ–±—ä—è–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏ –Ω–µ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –µ–π –∑–Ω–∞—á–µ–Ω–∏–µ - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω—É–ª–µ–º.

–í–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–∞–±–æ—Ç–µ EVM `let` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

-   —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Å–ª–æ—Ç —Å—Ç–µ–∫–∞;
-   –Ω–æ–≤—ã–π —Å–ª–æ—Ç —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π;
-   –∑–∞—Ç–µ–º —Å–ª–æ—Ç —Å–Ω–æ–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ü–∞ –±–ª–æ–∫–∞.

–í–æ—Ç —Ç–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ solidity –∏ –≤ Yul:

```js
    // solidity
    uint256 a = (3 + 3) / 2;

    // Yul
    assembly {
        let b := div(add(3, 3), 2)
    }
```

–í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è `add`, –∑–∞—Ç–µ–º `div`, –∑–∞—Ç–µ–º –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ. –ü–µ—Ä–≤–æ–π –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∞–º–∞—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è.

–°–∏–Ω—Ç–∞–∫—Å–∏—Å —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–æ–∂–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è. –í —Ñ—É–Ω–∫—Ü–∏—è—Ö –Ω–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏, –æ–Ω–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥—É—Ç —á–∞—Å—Ç—å—é –≤–Ω–µ—à–Ω–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω, –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –æ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω —Ñ—É–Ω–∫—Ü–∏–π Solidity. –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ —Å–∏–º–≤–æ–ª–∞ `->` —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, —Ç–æ –µ—Å—Ç—å –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π –≤ –±–ª–æ–∫–µ inline assembly –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–º –≤–Ω–µ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

```js
    function foo() external {
        assembly {
            function bar(param1, param2, ...) -> return1, return2, ... {
                // code
            }

            let x, y := bar(1, 2)
        }
    }
```

–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `leave` –º–æ–∂–Ω–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —Ç–µ–ª–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ç–æ–∫ –µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –≤—ã–π—Ç–∏ –∏–∑ –Ω–µ–µ. –û–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –ø—É—Å—Ç–æ–π `return` –æ–ø–µ—Ä–∞—Ç–æ—Ä, –∑–∞ –æ–¥–Ω–∏–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º: —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω–µ—Ç –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ—Å–ª–µ–¥–Ω–∏–º –±—ã–ª–æ –ø—Ä–∏—Å–≤–æ–µ–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.

```js
    assembly {
        function increment() -> result {
            let param := calldataload(4)
            result := add(param, 1)
            // leave –≤–µ—Ä–Ω–µ—Ç "result", –Ω–æ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞
            // –∫–∞–∫ —ç—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –±—ã —Å return
            // –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ assembly –∏–ª–∏ solidity –∫–æ–¥–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è
            leave
        }
    }

```

_–í–∞–∂–Ω–æ!_ –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `leave` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Yul —Ñ—É–Ω–∫—Ü–∏–∏.

Yul –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Ç–∞–∫ –∂–µ, –∫–∞–∫ Solidity, –ø–æ—ç—Ç–æ–º—É –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `//` –∏ `/* */` –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.

### –¢–∏–ø—ã

–ù–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏ –≤ Yul –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–≥–æ –æ–¥–∏–Ω —Ç–∏–ø - `u256` –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç `uint256`, –Ω–æ –±—É–¥–µ—Ç –ª–µ–≥—á–µ –µ–≥–æ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –∫–∞–∫ `bytes32`, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å—Ç–µ–∫–æ–≤–∞—è –º–∞—à–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å 32-x –±–∞–π—Ç–æ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏. –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–Ω—è—Ç–∏–µ 256-–±–∏—Ç–Ω–æ–µ —Å–ª–æ–≤–æ, –Ω–æ –≤—Å–µ —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ.

–í [—ç—Ç–æ–º –≤–∏–¥–µ–æ](https://www.youtube.com/watch?v=ZGDQMS9GWo8&list=PL5hld-skrdFrxGUmmEbG1LBvYVyTE9M62&index=3) —Ö–æ—Ä–æ—à–æ –ø–æ–∫–∞–∑–∞–Ω–æ –∫–∞–∫ –≤–µ–¥—É—Ç —Å–µ–±—è —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –≤ Yul. –õ—é–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ `bytes32`, –ø–æ—ç—Ç–æ–º—É –≤ Yul –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (–∫ –∫–æ—Ç–æ—Ä—ã–º —Ç–∞–∫–∂–µ –æ—Ç–Ω–æ—Å—è—Ç—Å—è —Å—Ç—Ä–æ–∫–∏).

_–í–∞–∂–Ω–æ!_ –ù—É–∂–Ω–æ –±—ã—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–º –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±—É–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è Yul - —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω—É–ª–µ–≤–æ–≥–æ –±–∞–π—Ç–∞ —Å –ø–æ–º–æ—â—å—é –æ–ø–∫–æ–¥–∞ `ISZERO`, –ø–æ—ç—Ç–æ–º—É –∑–Ω–∞—á–µ–Ω–∏–µ–º `true` –±—É–¥–µ—Ç –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–ª–∏—á–Ω–æ–µ –æ—Ç 0.

```js
    function getBool() external pure returns (bool res) {
        uint256 a = 42; // 42 (decimal) == 0x2a (hex)

        assembly {
            res := a // 0x000000000000000000000000000000000000000000000000000000000000002a
        }
        // res == true
    }
```

### –õ–∏—Ç–µ—Ä–∞–ª—ã

–í –∫–∞—á–µ—Å—Ç–≤–µ –ª–∏—Ç–µ—Ä–∞–ª–æ–≤ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

-   –¶–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π –∏–ª–∏ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–π –∑–∞–ø–∏—Å–∏ (`42`, `0x2a`);
-   –°—Ç—Ä–æ–∫–∏ ASCII (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´abc¬ª), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–µ escape-—Å–∏–º–≤–æ–ª—ã `\xNN` –∏ escape-—Å–∏–º–≤–æ–ª—ã –Æ–Ω–∏–∫–æ–¥–∞ `\uNNNN`, –≥–¥–µ N ‚Äî —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã.
-   –®–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä `hex"616263"`).

```js
    assembly {
        let a := 0x123             // Hexadecimal
        let b := 42                // Decimal
        let c := "hello world"     // String
        let d := "very long string more than 32 bytes" // Error
    }
```

–ü–æ–º–Ω–∏–º, —á—Ç–æ —Å—Ç–µ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å 32-—Ö –±–∞–π—Ç–æ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –ø–æ—ç—Ç–æ–º—É —Å—Ç—Ä–æ–∫—É –¥–ª–∏–Ω–æ–π –±–æ–ª—å—à–µ 32 –±–∞–π—Ç –Ω–µ–ª—å–∑—è –ø–æ–ª–æ–∂–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–±—ä—è–≤–ª–µ–Ω–Ω—É—é —á–µ—Ä–µ–∑ `let`.

### –ü–æ—Ç–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Ç–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ Yul –≤—ã—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ `if` –∏ `switch`, –∞ —Ç–∞–∫–∂–µ —Ü–∏–∫–ª–æ–º `for`, –∏—Ö —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç solidity, –Ω–æ –º–µ—Ö–∞–Ω–∏–∫–∏ —Ç–µ –∂–µ.

–ò–∑ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π: —Ü–∏–∫–ª–∞ `while` –≤ Yul –Ω–µ—Ç, –∞ —É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `if` –Ω–µ—Ç —É—Å–ª–æ–≤–∏—è `else` (–Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å–ª–æ–≤–∏–π –¥–µ–ª–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `switch`). –¢–∞–∫–∂–µ –Ω–µ–ª—å–∑—è –Ω–∞–ø–∏—Å–∞—Ç—å –æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π `if` –±–µ–∑ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫.

–ü—Ä–∏–º–µ—Ä —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º `if`:

```js
    function ifStatement(uint256 n) external {
        assembly {
            if iszero(n) {
                // –µ—Å–ª–∏ true, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
            }
        }
    }
```

–ü—Ä–∏–º–µ—Ä —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º `switch`:

```js
    function switchStatement(uint256 n) external {
        assembly {
            switch n
            case 0 {
                // –µ—Å–ª–∏ n == 0 –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
            }
            case 1 {
                // –µ—Å–ª–∏ n == 1 –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
            }
            default {
                // –µ—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
                // –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            }
        }
    }
```

–ü—Ä–∏–º–µ—Ä—ã —Ü–∏–∫–ª–∞ `for`:

```js
    function forLoop(uint256 n) external {
        assembly {
            for { let i := 0 } lt(i, n) { i := add(i, 1) } {
                // –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
            }
        }
    }

    function forLoopWithAnotherCondition(uint256 n) external {
        assembly {
            let i := 0
            for {} lt(i, n) {} {
                // –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
                i := add(i, 1)
            }
        }
    }
```

–ü—Ä–∏–º–µ—Ä—ã –≤—ã—à–µ [—Ç—É—Ç](./examples/ControlFlow.sol).

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

–ó–¥–µ—Å—å –ø—Ä–∏–≤–µ–¥–µ–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —è–∑—ã–∫–∞ Yul. –ê–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.soliditylang.org/en/latest/yul.html#evm-dialect).
–í –æ–ø–∏—Å–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π (–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏) –º–æ–∂–Ω–æ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –∑–∞–ø–∏—Å—å –ø–æ —Ç–∏–ø—É `mem[a...b]` - –æ–Ω–∞ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç –±–∞–π—Ç—ã –ø–∞–º—è—Ç–∏, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `a` –¥–æ –ø–æ–∑–∏—Ü–∏–∏ `b`, –Ω–æ –Ω–µ –≤–∫–ª—é—á–∞—è –µ–µ, –∞ `storage[p]` –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–º—è—Ç–∏ –≤ —Å–ª–æ—Ç–µ `p`.

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

| –§—É–Ω–∫—Ü–∏—è     | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
| ----------- | ------------------------------------------- |
| `eq(x, y)`  | –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ `x` –∏ `y` (`x == y`). |
| `iszero(x)` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 1, –µ—Å–ª–∏ `x == 0`, –∏–Ω–∞—á–µ 0.       |
| `lt(x, y)`  | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 1, –µ—Å–ª–∏ `x < y`, –∏–Ω–∞—á–µ 0.        |
| `gt(x, y)`  | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 1, –µ—Å–ª–∏ `x > y`, –∏–Ω–∞—á–µ 0.        |

### –ë–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è      | –û–ø–∏—Å–∞–Ω–∏–µ                                                             |
| ------------ | -------------------------------------------------------------------- |
| `and(x, y)`  | –ü–æ–±–∏—Ç–æ–≤–æ–µ "–ò" (AND) –º–µ–∂–¥—É `x` –∏ `y`.                                 |
| `or(x, y)`   | –ü–æ–±–∏—Ç–æ–≤–æ–µ "–ò–õ–ò" (OR) –º–µ–∂–¥—É `x` –∏ `y`.                                |
| `xor(x, y)`  | –ü–æ–±–∏—Ç–æ–≤–æ–µ "–ò–°–ö–õ–Æ–ß–ê–Æ–©–ï–ï –ò–õ–ò" (XOR) –º–µ–∂–¥—É `x` –∏ `y`.                   |
| `not(x)`     | –ü–æ–±–∏—Ç–æ–≤–æ–µ "–ù–ï" (NOT) –¥–ª—è `x`.                                        |
| `byte(n, x)` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `n`-–π –±–∞–π—Ç –∏–∑ —á–∏—Å–ª–∞ `x`, –≥–¥–µ —Å—Ç–∞—Ä—à–∏–π –±–∞–π—Ç - —ç—Ç–æ 0-–π –±–∞–π—Ç. |
| `shl(x, y)`  | –õ–æ–≥–∏—á–µ—Å–∫–∏–π —Å–¥–≤–∏–≥ `y` –≤–ª–µ–≤–æ –Ω–∞ `x` –±–∏—Ç.                               |
| `shr(x, y)`  | –õ–æ–≥–∏—á–µ—Å–∫–∏–π —Å–¥–≤–∏–≥ `y` –≤–ø—Ä–∞–≤–æ –Ω–∞ `x` –±–∏—Ç.                              |

### –î—Ä—É–≥–∏–µ –ø–æ–ª–µ–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è         | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                                                                                                                      |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `pop(x)`        | –£–¥–∞–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `x` (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–π) –∏–∑ —Å—Ç–µ–∫–∞                                                                                                                                                                                                                                                            |
| `gas()`         | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Å—Ç–∞–≤—à–∏–π—Å—è –≥–∞–∑                                                                                                                                                                                                                                                                                                                     |
| `address()`     | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–¥—Ä–µ—Å —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞                                                                                                                                                                                                                                                                                                           |
| `caller()`      | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–¥—Ä–µ—Å –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ (–∞–Ω–∞–ª–æ–≥ msg.sender)                                                                                                                                                                                                                                                                                              |
| `origin()`      | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–∞–Ω–∞–ª–æ–≥ tx.origin)                                                                                                                                                                                                                                                                       |
| `callvalue()`   | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ wei, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å —Ç–µ–∫—É—â–∏–º –≤—ã–∑–æ–≤–æ–º                                                                                                                                                                                                                                                                                     |
| `selfbalance()` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–ª–∞–Ω—Å —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞                                                                                                                                                                                                                                                                                                          |
| `balance(a)`    | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∞–¥—Ä–µ—Å–∞ `a`                                                                                                                                                                                                                                                                                                                  |
| `gasprice()`    | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–µ–Ω—É –≥–∞–∑–∞ —Ç–µ–∫—É—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                                                                                                                                                                                                                                                                                                       |
| `timestamp()`   | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É —Ç–µ–∫—É—â–µ–≥–æ –±–ª–æ–∫–∞                                                                                                                                                                                                                                                                                                     |
| `number()`      | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ –±–ª–æ–∫–∞                                                                                                                                                                                                                                                                                                               |
| `return(p, s)`  | –ó–∞–≤–µ—Ä—à–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –ø–∞–º—è—Ç–∏, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `p` –∏ –∑–∞–Ω–∏–º–∞—é—â–∏–µ `s` –±–∞–π—Ç–æ–≤. –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏                                                                                                                                             |
| `revert(p, s)`  | –ó–∞–≤–µ—Ä—à–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ—Ç–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è (state changes) –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –ø–∞–º—è—Ç–∏, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `p` –∏ –∑–∞–Ω–∏–º–∞—é—â–∏–µ `s` –±–∞–π—Ç–æ–≤. –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞ `revert` –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ |
| `mod(x, y)`     | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è `x` –Ω–∞ `y` (x % y). –ï—Å–ª–∏ `y` —Ä–∞–≤–Ω–æ 0, —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 0                                                                                                                                                                                                                                                         |

## –†–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å Yul –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–∞ –ø–∞–º—è—Ç—å –≤ EVM –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ª—é–±–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å–≤—è–∑–∞–Ω–æ —Å —á—Ç–µ–Ω–∏–µ–º –∏–ª–∏ –∑–∞–ø–∏—Å—å—é –≤ –ø–∞–º—è—Ç—å. –í EVM —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç—Ä–∏ –≤–∏–¥–∞ –ø–∞–º—è—Ç–∏ - memory, calldata –∏ storage, –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö –µ—Å—Ç—å —Å–≤–æ–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏.

_–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ!_ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —Å—Ç–µ–∫ –≤ EVM —Ç–æ–∂–µ —è–≤–ª—è–µ—Ç—Å—è —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞ –ø–∞–º—è—Ç—å—é, –Ω–æ —Ç.–∫. –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–∏–º –∫—Ä–∞–π–Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã, –∑–¥–µ—Å—å –º—ã –Ω–µ –±—É–¥–µ–º –µ–≥–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å.

### Storage

Storage –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–º –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∞–∂–Ω–æ–π –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

–•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å [–æ–¥–∏–Ω –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏ –±–æ–ª—å—à–æ–π –º–∞—Å—Å–∏–≤](https://programtheblockchain.com/posts/2018/03/09/understanding-ethereum-smart-contract-storage/) –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –Ω—É–ª—è–º–∏, —Ç.–µ. —É–∂–µ –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π. –ö–∞–∂–¥–∞—è —è—á–µ–π–∫–∞ —ç—Ç–æ 32-–±–∞–π—Ç–æ–≤—ã–π —Å–ª–æ—Ç. –í—Å–µ —á—Ç–æ –Ω–∞–º –æ—Å—Ç–∞–µ—Ç—Å—è —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏ –∏–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.

–í storage —Å—É—â–µ—Å—Ç–≤—É–µ—Ç 2 –≤–∏–¥–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞. –í —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º —Å—É—â–µ—Å—Ç–≤—É—é—Ç –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–Ω–∞—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Yul:

-   –∑–∞–ø–∏—Å—å –≤ storage –¥–æ—Ä–æ–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –ø–æ—ç—Ç–æ–º—É –¥–ª—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä–æ—á–µ 32 –±–∞–π—Ç –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —É–ø–∞–∫–æ–≤–∫–∞ –∏ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç;
-   —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —ç—Ç–∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Ç–æ–∂–µ —Å–∏–ª—å–Ω–æ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–±–æ –≤—Å–µ–º —ç—Ç–æ–º –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [—Ç—É—Ç](https://noxx.substack.com/p/evm-deep-dives-the-path-to-shadowy-3ea?s=r) –∏ [—Ç—É—Ç](https://medium.com/@hayeah/diving-into-the-ethereum-vm-part-2-storage-layout-bc5349cb11b7).
–°–≤–µ—Ä–∏—Ç—å—Å—è —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π [—Ç—É—Ç](https://docs.soliditylang.org/en/latest/internals/layout_in_storage.html).

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ storage –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

| –§—É–Ω–∫—Ü–∏—è        | –û–ø–∏—Å–∞–Ω–∏–µ                                                              |
| -------------- | --------------------------------------------------------------------- |
| `sload(p)`     | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ storage –ø–æ –∫–ª—é—á—É `p` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ. |
| `sstore(p, v)` | –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `v` –≤ storage –ø–æ –∫–ª—é—á—É `p`.                       |

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–ª–æ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `.slot`.

```js
contract Storage {
    uint256 x;

    function setStorageValue(uint256 _x) public {
        assembly {
            sstore(x.slot, _x)
        }
    }

    function getStorageValue() public view returns (uint256 ret) {
        assembly {
            ret := sload(x.slot)
        }
    }

}
```

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `.offset`.

Offset –∏–ª–∏ —Å–º–µ—â–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç –æ—Ç –Ω–∞—á–∞–ª–∞ —Å–ª–æ—Ç–∞, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è.

–ù–∞–ø—Ä–∏–º–µ—Ä —Ç—É—Ç –≤—Å–µ –ø—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —Å–ª–æ—Ç–µ 0 —Å —Ä–∞–∑–Ω—ã–º —Å–º–µ—â–µ–Ω–∏–µ–º. –£–ø–∞–∫–æ–≤–∫–∞ –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å–ø—Ä–∞–≤–∞-–Ω–∞–ª–µ–≤–æ (–≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ `a` –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –ø—Ä–∞–≤—ã–µ 16 –±–∞–π—Ç, –∑–∞—Ç–µ–º `b` –∑–∞–π–º–µ—Ç –µ—â–µ 12, `c` - 2 –±–∞–π—Ç–∞, `d` –∏ `e` –ø–æ –æ–¥–Ω–æ–º—É). –ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –æ–¥–Ω—É –∏–∑ —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –æ–±–Ω—É–ª–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω –±–∞–π—Ç. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

```js
contract Storage {
    uint256 x; // slot 0 - 32 bytes

    uint128 a; // slot 1 - 16 bytes
    uint96 b; // slot 1 - 12 bytes
    uint16 c; // slot 1 - 2 bytes
    uint8 d; // slot 1 - 1 bytes
    uint8 e; // slot 1 - 1 bytes

    function setCToPackedSlot(uint16 _c) public {
        assembly {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–ª–æ—Ç–∞
            let data := sload(c.slot)

            // –û–±–Ω—É–ª—è–µ–º –±–∞–π—Ç—ã –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è.
            // –¢–∞–∫ –∫–∞–∫ —ç—Ç–æ uint16, –æ–Ω –∑–∞–Ω–∏–º–∞–µ—Ç 2 –±–∞–π—Ç–∞ (—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–∞–∫–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ —á—Ç–æ –∏ –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –≤ storage)
            let cleared := and(data, 0xffff0000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff)

            // –°–¥–≤–∏–≥–∞–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–ª–µ–≤–æ –Ω–∞ —Å–º–µ—â–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —É–º–Ω–æ–∂–µ–Ω–Ω–æ–µ –Ω–∞ 8 (1 –±–∞–π—Ç = 8 –±–∏—Ç)
            // –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ offset –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–∏—Å–ª–æ –≤ –±–∞–π—Ç–∞—Ö, –∞ —Å–¥–≤–∏–≥ –º—ã –¥–µ–ª–∞–µ–º  –≤ –±–∏—Ç–∞—Ö
            let shifted := shl(mul(c.offset, 8), _c)

            // –û–±—ä–µ–¥–∏–Ω—è–µ–º –æ—á–∏—â–µ–Ω–Ω—ã–π —Å–ª–æ—Ç –∏ —Å–¥–≤–∏–Ω—É—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            let newValue := or(shifted, cleared)

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–ª–æ—Ç–µ
            sstore(c.slot, newValue)
        }
    }

    function getCFromPackedSlot() public view returns (uint16 ret) {
        assembly {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–ª–æ—Ç–∞
            let data := sload(c.slot)

            // –î–µ–ª–∞–µ–º —Å–¥–≤–∏–≥ –≤–ø—Ä–∞–≤–æ –∏—Å–ø–æ–ª—å–∑—É—è —Å–º–µ—â–µ–Ω–∏–µ –Ω—É–∂–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
            let shifted := shr(mul(c.offset, 8), data)

            // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∞—Å–∫—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
            ret := and(shifted, 0xffff)
        }
    }
}
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ storage

–°—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ storage —è–≤–ª—è—é—Ç—Å—è –≤—Å–µ–≥–æ –ª–∏—à—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –æ–±–µ—Ä—Ç–∫–æ–π, –∞ –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤ —Å–ª–æ—Ç–∞—Ö —Ç–∞–∫ –∂–µ, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –æ–Ω–∏ –±—ã–ª–∏ –Ω–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ, –≤–∫–ª—é—á–∞—è —Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —É–ø–∞–∫–æ–≤–∞–Ω—ã.

–ü—Ä–∏–º–µ—Ä:

```js
    // –ú–æ–∂–µ–º –∑–∞–ø–∏—Å–∞—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏

    // uint256 x; // slot 0 - 32 bytes

    // uint128 a; // slot 1 - 16 bytes
    // uint96 b; // slot 1 - 12 bytes
    // uint16 c; // slot 1 - 2 bytes
    // uint8 d; // slot 1 - 1 bytes
    // uint8 e; // slot 1 - 1 bytes

    // –ê –º–æ–∂–µ–º –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏—Ö –≤ –æ–¥–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ø—Ä–∏ —ç—Ç–æ–º –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è
    struct MyStruct {
        uint256 x; // slot 0 - 32 bytes
        uint128 a; // slot 1 - 16 bytes
        uint96 b; // slot 1 - 12 bytes
        uint16 c; // slot 1 - 2 bytes
        uint8 d; // slot 1 - 1 bytes
        uint8 e; // slot 1 - 1 bytes
    }

    MyStruct myStruct; // slot 0 - 62 bytes
    uint256 value; // slot 2 - 32 bytes
```

-   –í –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–Ω–∏–º–∞—é—Ç —Å–ª–æ—Ç 0 –∏ 1 (–ø–æ—Ç–æ–º—É —á—Ç–æ –≤ —Å–ª–æ—Ç–µ 1 –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —É–ø–∞–∫–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
-   –ö–æ–≥–¥–∞ –±—ã –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º —Ç–µ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `MyStruct` –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –æ–Ω–∏ —Ç–∞–∫ –∂–µ –∑–∞–Ω–∏–º–∞—é—Ç —Å–ª–æ—Ç—ã 0 –∏ 1.

–í–æ—Ç —Ç–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å `forge inspect`
![storage-struct](./img/storage-struct.png)

–í foundry –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –∫–∞–∫–∏—Ö —Å–ª–æ—Ç–∞—Ö —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
    forge inspect <contract-name> storage-layout --pretty
```

–ö–æ–º–∞–Ω–¥–∞ –≤—ã–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—É –≤—Ä–æ–¥–µ —Ç–æ–π, —á—Ç–æ —è –ø—Ä–∏–≤–µ–ª –≤—ã—à–µ.

#### –ú–∞—Å—Å–∏–≤—ã —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –∏–Ω–¥–µ–∫—Å—É —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é `sload`. –ù—É–∂–Ω—ã–π –Ω–∞–º —Å–ª–æ—Ç –±—É–¥–µ—Ç –≤—ã—á–∏—Å–ª—è—Ç—å—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ `—Å–ª–æ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ + –∏–Ω–¥–µ–∫—Å –º–∞—Å—Å–∏–≤–∞`. –ö–æ–≥–¥–∞ –º–∞—Å—Å–∏–≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã –∏ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç `bytes32`, —Ç–æ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø–æ –ø–æ—Ä—è–¥–∫—É –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º:

-   slot 0: —Å–ª–æ—Ç –º–∞—Å—Å–∏–≤–∞ 0 + –∏–Ω–¥–µ–∫—Å —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –º–∞—Å—Å–∏–≤–µ 0 = –∑–Ω–∞—á–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–ª–æ—Ç–µ 0;
-   slot 1: 0 + 1 = 1;
-   slot 2: 0 + 2 = 2;
-   ...

```js
contract Storage {
    // ...

    uint256[5] arr = [11, 22, 33, 44, 55]; // slot 2 - 6
    uint256 amount; // slot 7

    function getValueFromArray(uint256 index) public view returns (uint256 value) {
        assembly {
            value := sload(add(arr.slot, index))
        }
    }
}
```

–î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ –ø–æ–ª—É—á–∏—Ç—Å—è –≤–æ—Ç —Ç–∞–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞. –ó–¥–µ—Å—å –≤–∏–¥–Ω–æ —á—Ç–æ –º–∞—Å—Å–∏–≤ –∑–∞–Ω–∏–º–∞–µ—Ç 5 —Å–ª–æ—Ç–æ–≤ (—Å–æ 2–≥–æ –ø–æ 6 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ) –∏ 160 –±–∞–π—Ç –ø–∞–º—è—Ç–∏ (32 \* 5).
![storage-1](./img/storage-1.png)

–î–ª—è –º–∞—Å—Å–∏–≤–æ–≤ —Å —Ä–∞–∑–º–µ—Ä–æ–º –∑–Ω–∞—á–µ–Ω–∏–π –º–µ–Ω–µ–µ 32 –±–∞–π—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ–¥–∏–Ω —Å–ª–æ—Ç. –í –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ `packedArr`, –æ–Ω –∑–∞–Ω–∏–º–∞–µ—Ç 1 —Å–ª–æ—Ç (32 –±–∞–π—Ç–∞), —Ö–æ—Ç—è —Å–æ–¥–µ—Ä–∂–∏—Ç 2 —ç–ª–µ–º–µ–Ω—Ç–∞.

```js
contract Storage {
    // ...

    uint256[5] arr = [11, 22, 33, 44, 55]; // slot 2 - 6
    uint256 amount; // slot 7
    uint128[2] packedArr = [21, 42]; // slot 8
    uint256 amount2; // slot 9

    function getPackedValueFromArray() public view returns (uint128 value) {
        bytes32 packed;

        assembly {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            packed := sload(packedArr.slot)

            // –î–µ–ª–∞–µ–º —Å–¥–≤–∏–≥ –≤–ø—Ä–∞–≤–æ –Ω–∞ 16 –±–∞–π—Ç (128 –±–∏—Ç),
            // —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É 1
            value := shr(mul(16, 8), packed)
        }
    }
}
```

–≠—Ç–æ –∂–µ –≤–∏–¥–Ω–æ –∏ –≤ —Ç–∞–±–ª–∏—Ü–µ
![storage-2](./img/storage-2.png)

#### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Å—Å–∏–≤—ã

–ò–∑-–∑–∞ —Å–≤–æ–µ–≥–æ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —Ç–∏–ø—ã –º–∞—Å—Å–∏–≤–æ–≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –Ω–µ –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è ¬´–º–µ–∂–¥—É¬ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏ —Å–ª–µ–¥—É—é—â–∏–º–∏ –∑–∞ –Ω–∏–º–∏. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –æ–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç –≤—Å–µ–≥–æ 32 –±–∞–π—Ç–∞, –∞ —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ—Å—è –≤ –Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è, –Ω–∞—á–∏–Ω–∞—è —Å –¥—Ä—É–≥–æ–≥–æ —Å–ª–æ—Ç–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ö–µ—à–∞ Keccak-256.

–î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤ –≤ —ç—Ç–æ–º —Å–ª–æ—Ç–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞ (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —è–≤–ª—è—é—Ç—Å—è –±–∞–π—Ç–æ–≤—ã–µ –º–∞—Å—Å–∏–≤—ã –∏ —Å—Ç—Ä–æ–∫–∏).

–î–∞–Ω–Ω—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –Ω–∞—á–∏–Ω–∞—è —Å `keccak256(p)` –∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –¥–∞–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞: –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç –∑–∞ –¥—Ä—É–≥–∏–º. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Å—Å–∏–≤—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤ –ø—Ä–∏–º–µ–Ω—è—é—Ç —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.soliditylang.org/en/latest/internals/layout_in_storage.html#mappings-and-dynamic-arrays).

–í–æ—Ç —Ç–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —á—Ç–µ–Ω–∏–µ –∏–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Å—Å–∏–≤–∞:

-   –ø–æ–ª—É—á–∞–µ–º —Å–ª–æ—Ç –≤ –∫–æ—Ç–æ—Ä–æ–º –ª–µ–∂–∏—Ç –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞
-   –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ –≤ memory
-   —Ö–µ—à–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ (—É–∫–∞–∑—ã–≤–∞–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ memory –∏ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)
-   –¥–æ–±–∞–≤–ª—è–µ–º –∫ —Ö–µ—à—É –∏–Ω–¥–µ–∫—Å —ç–ª–µ–º–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–ª–æ—Ç–∞ –≤ storage

```js
contract Storage {
    // ...

    uint256[] dynamicArr = [123, 345, 678];

    function getValueFromDynamicArray(uint256 index) external view returns (uint256 value) {
        uint256 slot;

        assembly {
            // –ü–æ–ª—É—á–∞–µ–º —Å–ª–æ—Ç –≤ –∫–æ—Ç–æ—Ä–æ–º –ª–µ–∂–∏—Ç –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞
            slot := dynamicArr.slot

            // –í—ã—á–∏—Å–ª—è–µ–º —Ö–µ—à –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∂–µ—Ç –Ω–∞ —Å–ª–æ—Ç –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞
            // –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –∑–∞–ø–∏—Å–∏ –≤ solidity:
            // bytes32 ptr = keccak256(abi.encode(slot));
            mstore(0x00, slot)
            let ptr := keccak256(0x00, 0x20)

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É
            value := sload(add(ptr, index))
        }
    }
}
```

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `sload` –¥–ª—è —Å–ª–æ—Ç–∞ –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è:

```js
    uint256[] dynamicArr = [123, 345, 678]; // slot 10

    function getDynamicArrayLength() external view returns (uint256 length) {
        assembly {
            length := sload(dynamicArr.slot)
        }
    }
```

#### –ú–∞–ø–ø–∏–Ω–≥–∏

–ú–∞–ø–ø–∏–Ω–≥–∏ –≤–µ–¥—É—Ç —Å–µ–±—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –º–∞—Å—Å–∏–≤–∞–º, –Ω–æ –æ–Ω–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç –∫–ª—é—á –∏ —Å–ª–æ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞–ø–ø–∏–Ω–≥–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:

-   –ø–æ–ª—É—á–∞–µ–º —Å–ª–æ—Ç
-   –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ memory –∫–ª—é—á
-   –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ memory —Å–ª–æ—Ç
-   —Ö–µ—à–∏—Ä—É–µ–º –∫–ª—é—á –∏ —Å–ª–æ—Ç
-   –ø–æ–ª—É—á–∞–µ–º –ø–æ —Ö–µ—à—É –∑–Ω–∞—á–µ–Ω–∏–µ

```js
contract Storage {
    // ...

    mapping(uint256 => uint256) map;

    function getValueFromMapping(uint256 key) public view returns (uint256 value) {
        bytes32 slot;

        assembly {
            // –ü–æ–ª—É—á–∞–µ–º —Å–ª–æ—Ç –º–∞–ø–ø–∏–Ω–≥–∞
            slot := map.slot

            // –í—ã—á–∏—Å–ª—è–µ–º —Ö–µ—à –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∂–µ—Ç –Ω–∞ —Å–ª–æ—Ç –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –º–∞–ø–ø–∏–Ω–≥–∞
            // –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –∑–∞–ø–∏—Å–∏ –≤ solidity:
            // bytes32 ptr = keccak256(abi.encode(key, uint256(slot)));
            mstore(0x00, key)
            mstore(0x20, slot)
            let ptr := keccak256(0x00, 0x40)

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞–ø–ø–∏–Ω–≥–∞
            value := sload(ptr)
        }
    }
}
```

#### –í–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞–ø–ø–∏–Ω–≥–∏

–í–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞–ø–ø–∏–Ω–≥–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã, –Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ö–µ—à–∏ —Ö–µ—à–µ–π. –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ.

–ó–¥–µ—Å—å –≤—Å–µ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –ø—Ä–∏–º–µ—Ä–æ–º, —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π —Ö–µ—à –±—É–¥–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ —Ö–µ—à–∞ –≤—Ç–æ—Ä–æ–≥–æ –∫–ª—é—á–∞ + —Ö–µ—à (—Å–ª–æ—Ç + –ø–µ—Ä–≤—ã–π –∫–ª—é—á):

```js
contract Storage {
    // ...

    mapping(uint256 => mapping(uint256 => uint256)) nestedMap;

    function getValueFromNestedMapping(uint256 key1, uint256 key2) public view returns (uint256 value) {
        bytes32 slot;
        assembly {
            slot := nestedMap.slot

            // bytes32 ptr2 = keccak256(abi.encode(key2, keccak256(abi.encode(key1, uint256(slot)))));
            mstore(0x00, key1)
            mstore(0x20, slot)
            let ptr1 := keccak256(0x00, 0x40)

            mstore(0x00, key2)
            mstore(0x20, ptr1)
            let ptr2 := keccak256(0x00, 0x40)

            value := sload(ptr2)
        }
    }
}
```

#### –ú–∞–ø–ø–∏–Ω–≥–∏ —Å –º–∞—Å—Å–∏–≤–∞–º–∏

–ß—Ç–æ–±—ã –≤—ã—á–∏—Å–ª–∏—Ç—å —Å–ª–æ—Ç —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ –≤ –º–∞–ø–ø–∏–Ω–≥–µ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ö–µ—à –æ—Ç —Ö–µ—à–∞ (–∫–ª—é—á + —Å–ª–æ—Ç). –î–∞–ª–µ–µ –≤—Å–µ —Ç–∞–∫ –∂–µ –∫–∞–∫ –∏ —Å –æ–±—ã—á–Ω—ã–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –º–∞—Å—Å–∏–≤–æ–º.

–ê —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–ª–∏–Ω—É –º–∞—Å—Å–∏–≤–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `sload` –¥–ª—è —Ö–µ—à–∞ (–∫–ª—é—á + —Å–ª–æ—Ç)

```js
contract Storage {
    // ...

    mapping(address => uint256[]) arrayInMap;

    function getValueFromArrayNestedInMapping(address key, uint256 index) public view returns (uint256 value, uint256 length) {
        bytes32 slot;

        assembly {
            slot := arrayInMap.slot
        }

        bytes32 arrSlot = keccak256(abi.encode(key, slot));
        bytes32 ptr = keccak256(abi.encode(arrSlot));

        assembly {
            value := sload(add(ptr, index))
            length := sload(arrSlot)
        }
    }
}
```

#### –ú–∞—Å—Å–∏–≤—ã –±–∞–π—Ç–æ–≤ –∏ —Å—Ç—Ä–æ–∫–∏

_–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ!_ –î–∞–ª—å—à–µ –±—É–¥—É—Ç –º–Ω–æ–≥–æ —Ä–∞–∑ —É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å—Å—è –ø–æ–Ω—è—Ç–∏—è "–±–∞–π—Ç" –∏ "–±–∏—Ç", –µ—Å–ª–∏ –≤—ã –≤—Å–µ –µ—â–µ –∏—Ö –ø—É—Ç–∞–µ—Ç–µ, –ª—É—á—à–µ —Å–Ω–∞—á–∞–ª–∞ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è.

_–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ!_ –î–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –º–æ–≥—É—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã —É—Ç–∏–ª–∏—Ç—ã cast —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ foundry:

-   `--to-base <number> <number system>` - –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —á–∏—Å–µ–ª –∏–∑ –æ–¥–Ω–æ–∏ —Å–∏—Å—Ç–µ–º—ã —Å—á–∏—Å–ª–µ–Ω–∏—è –≤ –¥—Ä—É–≥—É—é, –ø—Ä–∏–º. `cast --to-base 0x20 10` –¥–∞—Å—Ç —á–∏—Å–ª–æ 32 –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç `--to-base 32 16` –¥–∞—Å—Ç 0x20, –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ –¥–≤–æ–∏—á–Ω—É—é (–∏–∑ –¥–≤–æ–∏—á–Ω–æ–π). –õ–∏–±–æ –∫–æ–º–∞–Ω–¥—ã `--to-hex`, `--to-dec` –∏ —Ç.–¥.
-   `--format-bytes32-string <string>` - –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ –≤ hex
-   `--parse-bytes32-string <hex>` - –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ hex –≤ —Å—Ç—Ä–æ–∫—É
    –ï—Å–ª–∏ –≤—ã –µ—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ cast, —Å–æ–≤–µ—Ç—É—é –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å, —Ç–∞–º –º–Ω–æ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–≥–æ. –í—Å–µ –∫–æ–º–∞–Ω–¥—ã `cast -h`.

–ò—Ç–∞–∫, `bytes` –∏ `string` —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ storage –æ–¥–∏–Ω–∞–∫–æ–≤–æ, –Ω–æ —Ç—É—Ç –µ—Å—Ç—å –æ–¥–Ω–∞ –≤–∞–∂–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ —Å—Ä–∞–∑—É –ø–æ–Ω—è—Ç–Ω–∞ –∏–∑ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.soliditylang.org/en/latest/internals/layout_in_storage.html#bytes-and-string).

–í —Ç–æ–º —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ –º–∞—Å—Å–∏–≤ –±–∞–π—Ç –¥–ª–∏–Ω–æ–π –±–æ–ª—å—à–µ 31 –±–∞–π—Ç–∞, –≤ —Å–ª–æ—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –µ–≥–æ –¥–ª–∏–Ω–∞ (–ø—Ä–∏—á–µ–º –Ω–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è, –Ω–æ –æ–± —ç—Ç–æ–º –ø–æ–∑–∂–µ), –∞ –ø–æ —Ö–µ—à—É —ç—Ç–æ–≥–æ —Å–ª–æ—Ç–∞ - `keccak256(p)` –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è –±–∏—Ç–æ–≤—ã–π –º–∞—Å—Å–∏–≤. –ù–∞–ø–æ–º–Ω—é, —á—Ç–æ —Å—Ç—Ä–æ–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –æ—Ç —Å—Ç–∞—Ä—à–µ–≥–æ –±–∏—Ç–∞ –∫ –º–ª–∞–¥—à–µ–º—É.

_–í–∞–∂–Ω–æ!_ –í–∑—è–≤ —Ö–µ—à –æ—Ç —Å–ª–æ—Ç–∞ –º—ã –ø–æ–ª—É—á–∏–º —Å—Å—ã–ª–∫—É –Ω–∞ —Å–ª–æ—Ç –≥–¥–µ —Å—Ç—Ä–æ–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è, –Ω–æ –≤ —ç—Ç–æ–º —Å–ª–æ—Ç–µ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ 32 –±–∞–π—Ç–∞ (32 —Å–∏–º–≤–æ–ª–∞ —Å—Ç—Ä–æ–∫–∏), –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –¥–ª–∏–Ω–Ω–µ–µ, –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –±—É–¥—É—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª–æ—Ç–∞—Ö, —Ç–∞–∫ –∂–µ –æ—Ç —Å—Ç–∞—Ä—à–µ–≥–æ –±–∏—Ç–∞ –∫ –º–ª–∞–¥—à–µ–º—É.

–ù–æ —á—Ç–æ –µ—Å–ª–∏ –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ `bytes` (–∏–ª–∏ `string`) –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ 31 –±–∞–π—Ç—É? –¢–∞–∫–æ–π –º–∞—Å—Å–∏–≤ –±—É–¥–µ—Ç –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω "–Ω–∞ –º–µ—Å—Ç–µ", —Ç–æ –µ—Å—Ç—å –±—É–¥–µ—Ç –ª–µ–∂–∞—Ç—å –≤ —Ç–æ–º —Å–ª–æ—Ç–µ –≥–¥–µ —Å—Ç—Ä–æ–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∞, –ø—Ä–∏ —ç—Ç–æ–º 0-–π (–º–ª–∞–¥—à–∏–π) –±–∞–π—Ç –±—É–¥–µ—Ç —Ç–∞–∫ –∂–µ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ (–Ω–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π, —ç—Ç–æ –≤–∞–∂–Ω–æ).

–¢–µ–ø–µ—Ä—å –ø—Ä–æ –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏ (–º–∞—Å—Å–∏–≤–∞ –±–∞–π—Ç). –ï—Å—Ç—å 2 —Ñ–æ—Ä–º—É–ª—ã:

-   –µ—Å–ª–∏ –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏ –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ 31 –±–∞–π—Ç—É - `length * 2`
-   –µ—Å–ª–∏ –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏ –±–æ–ª—å—à–µ 31 –±–∞–π—Ç–∞ - `length * 2 + 1`

–≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –æ—Ç–ª–∏—á–∏—Ç—å –ø–æ –º–ª–∞–¥—à–µ–º—É –±–∏—Ç—É (LSB - least significant bit) —Å –∫–∞–∫–æ–π —Å—Ç—Ä–æ–∫–æ–π –º—ã –∏–º–µ–µ–º –¥–µ–ª–æ. –ï—Å–ª–∏ —Å–∞–º—ã–π –º–ª–∞–¥—à–∏–π –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (—Ä–∞–≤–µ–Ω 0), –∑–Ω–∞—á–∏—Ç —ç—Ç–æ –∫–æ—Ä–æ—Ç–∫–∞—è —Å—Ç—Ä–æ–∫–∞, –∞ –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (—Ä–∞–≤–µ–Ω 1) - –¥–ª–∏–Ω–Ω–∞—è.

–†–∞–∑–±–µ—Ä–µ–º –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ:
–î–æ–ø—É—Å—Ç–∏–º —É –Ω–∞—Å –≤ storage –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞ "Hello, world!", –¥–ª–∏–Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ 13 –±–∞–π—Ç, –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ –≤ hex –ø–æ–ª—É—á–∏–º `0x48656c6c6f2c20776f726c6421`, —Ç—É—Ç –∫–∞–∂–¥—ã–π –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–∞–π—Ç —ç—Ç–æ —Å–∏–º–≤–æ–ª UTF-8 (48 - –∑–∞–≥–ª–∞–≤–Ω–∞—è "H", 65 - —Å—Ç—Ä–æ—á–Ω–∞—è "e", 2c - ",", 20 - –ø—Ä–æ–±–µ–ª –∏ —Ç.–¥), —Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ 32 –±–∞–π—Ç, –∞ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø–∏—Å–∞—Ç—å –¥–ª–∏–Ω—É —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—É—é –ø–æ —Ñ–æ—Ä–º—É–ª–µ `13 * 2 = 26` (`0x1a` –≤ hex). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –ø–æ–ª—É—á–∞–µ–º –≤–æ—Ç —Ç–∞–∫–æ–π 32-–±–∞–π—Ç–Ω—ã–π –º–∞—Å—Å–∏–≤ `0x48656c6c6f2c20776f726c64210000000000000000000000000000000000001a`, –µ—Å–ª–∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –µ–≥–æ –≤ –¥–≤–æ–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, —Ç–æ —Å–∞–º—ã–π –º–ª–∞–¥—à–∏–π –±–∏—Ç –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω 0 - 00000000010010000110010101101100011011000110111100101100001000000111011101101111011100100110110001100100001000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001101**0**.

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ–æ—Ä–º—É–ª—ã `length * 2`–º–ª–∞–¥—à–∏–π –±–∏—Ç –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –Ω—É–ª–µ–≤—ã–º (–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º). –ò –Ω–∞–æ–±–æ—Ä–æ—Ç –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ–æ—Ä–º—É–ª—ã`length * 2 + 1`, –æ–Ω –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ 1.

–¢–µ–ø–µ—Ä—å –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –¥–ª–∏–Ω—É –∏—Å–ø–æ–ª—å–∑—É—è Yul. –í –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ 3 —Å—Ç—Ä–æ–∫–∏ —Ä–∞–∑–Ω–æ–π –¥–ª–∏–Ω—ã - —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Remix –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ç–∞–∫–∂–µ –∑–∞–≥–ª—è–¥—ã–≤–∞—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫). –ù–µ –∑–∞–±—É–¥—å –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –∞ –¥–≤–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å.

```js
contract Storage {
    /// ...

    // —Ç–∞–∫ —Å—Ç—Ä–æ–∫–∞ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–ª–æ—Ç–µ, –ø–æ—Å–ª–µ–¥–Ω–∏–π –±–∞–π—Ç - –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª–∏–Ω–∞ (0x1a)
    // 0x48656c6c6f2c20776f726c64210000000000000000000000000000000000001a // str.slot
    string str = "Hello, world!"; // 13 —Å–∏–º–≤–æ–ª–æ–≤

    // —ç—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫–æ—Ä–æ—Ç–∫–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ 31 —Å–∏–º–≤–æ–ª, –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º –±–∞–π—Ç–µ —Ç–∞–∫–∂–µ –¥–ª–∏–Ω–∞ (0x3e)
    // 0x48656c6c6f2c207468697320697320612074657374207068726173652030323e // str.slot
    string str = "Hello, this is a test phrase 02"; // 31 —Å–∏–º–≤–æ–ª

    // –∞ —ç—Ç–æ –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –∑–¥–µ—Å—å –≤ —Å–ª–æ—Ç–µ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –µ–µ –¥–ª–∏–Ω–∞ (0x4b)
    // 0x000000000000000000000000000000000000000000000000000000000000004b // str.slot
    // 0x48656c6c6f2c2074686973206973206120746573742070687261736520666f72 // keccak(str.slot)
    // 0x2077696b69000000000000000000000000000000000000000000000000000000 // keccak(str.slot) + 1
    string str = "Hello, this is a test phrase for wiki"; // 37 —Å–∏–º–≤–æ–ª–æ–≤

    function getStringInfo() external view returns (uint256 length, bytes32 lsb, bytes32 strBytes, bytes32 slot) {
        assembly {
            // –ö–µ—à–∏—Ä—É–µ–º —Å–ª–æ—Ç
            slot := str.slot
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ª–æ—Ç–∞
            strBytes := sload(slot)
            // –ö–æ–ø–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –º–ª–∞–¥—à–∏–π –±–∏—Ç
            let _arr := strBytes
            // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –º–ª–∞–¥—à–µ–≥–æ –±–∏—Ç–∞
            lsb := and(_arr, 0x1)

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Ä–∞–≤–µ–Ω –ª–∏ –æ–Ω 0
            if iszero(lsb) {
                // –ë–µ—Ä–µ–º –º–ª–∞–¥—à–∏–π –±–∞–π—Ç –∏ –¥–µ–ª–∏–º –Ω–∞ 2 —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏
                length := div(byte(31, strBytes), 2)
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å–ª–∏ –±–æ–ª—å—à–µ 0
            if gt(lsb, 0) {
                // –û—Ç–Ω–∏–º–∞–µ–º 1 –∏ –¥–µ–ª–∏–º –Ω–∞ 2 —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏
                length := div(sub(strBytes, 1), 2)

                // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ memory –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞
                mstore(0x00, slot)
                // –ü–æ–ª—É—á–∞–µ–º —Ö–µ—à —Å–ª–æ—Ç–∞, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –≥–¥–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ª–µ–∂–∏—Ç —Å—Ç—Ä–æ–∫–∞
                slot := keccak256(0x00, 0x20)
            }
        }
    }
}
```

–ò—Ç–∞–∫, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∫–æ–¥–µ:

-   –∑–∞–ø–æ–º–∏–Ω–∞–µ–º –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ –≤ –∫–æ—Ç–æ—Ä–æ–º –ª–µ–∂–∏—Ç —Å—Ç—Ä–æ–∫–∞ (–∏–ª–∏ –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏)
-   –ø–æ–ª—É—á–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ª–æ—Ç–∞ —Å –ø–æ–º–æ—â—å—é `sload`
-   –∑–∞–≤–æ–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `_arr` –≤ –∫–æ—Ç–æ—Ä—É—é —Å–∫–æ–ø–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ª–æ—Ç–∞
-   —Å –ø–æ–º–æ—â—å—é –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ –ò (AND) –ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ lsb (—Å–∞–º–æ–≥–æ –º–ª–∞–¥—à–µ–≥–æ –±–∏—Ç–∞)
-   –¥–∞–ª—å—à–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å–ª–∏ lsb —Ä–∞–≤–µ–Ω 0 (`iszero(lsb)`), –∑–Ω–∞—á–∏—Ç —ç—Ç–æ –∫–æ—Ä–æ—Ç–∫–∞—è —Å—Ç—Ä–æ–∫–∞
    -   –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –∫–æ—Ä–æ—Ç–∫–∞—è –º—ã –±–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –±–∞–π—Ç –≤ –∫–æ—Ç–æ—Ä–æ–º —É–∫–∞–∑–∞–Ω–∞ –¥–ª–∏–Ω–∞ (`and(_arr, 0x1)`)
    -   –ø–æ—Å–ª–µ —á–µ–≥–æ –¥–µ–ª–∏–º —ç—Ç—É –¥–ª–∏–Ω—É –Ω–∞ 2 (`div(byte(31, strBytes), 2)`) –∏ –ø–æ–ª—É—á–∞–µ–º –∏–∑–Ω–∞—á–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏ (—Å —ç—Ç–∏–º –∑–Ω–∞–Ω–∏–µ–º –º–æ–∂–Ω–æ –≤—ã–≥—Ä—É–∑–∏—Ç—å –µ–µ –≤ memory –∏ –æ—Ç–¥–∞—Ç—å –Ω–∞—Ä—É–∂—É, –Ω–æ –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ–º –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é)
-   –µ—Å–ª–∏ lsb –±–æ–ª—å—à–µ 0 (`gt(lsb, 0)`)
    -   –æ—Ç–Ω–∏–º–∞–µ–º –æ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã 1 (`sub(strBytes, 1)`)
    -   –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–∫–∂–µ –¥–µ–ª–∏–º –Ω–∞ 2 (`div(sub(strBytes, 1), 2)`) –∏ –ø–æ–ª—É—á–∞–µ–º –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏
    -   –¥–∞–ª–µ–µ –∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ –≤ memory, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç –µ–≥–æ —Ö–µ—à
    -   –ø–æ–ª—É—á–∞–µ–º —Ö–µ—à –ø–æ –Ω–æ–º–µ—Ä—É —Å–ª–æ—Ç–∞ (—ç—Ç–æ –∏ –±—É–¥–µ—Ç —Å–ª–æ—Ç –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –µ–µ –Ω–∞—á–∞–ª–æ)

–í—Å–µ –ø—Ä–∏–º–µ—Ä—ã —Å–æ–±—Ä–∞–Ω—ã –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ [Storage.sol](./examples/Storage.sol).

### Memory

Memory –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –û–Ω–∞ –æ—á–∏—â–∞–µ—Ç—Å—è –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏.

–ü–∞–º—è—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:

-   –í–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤;
-   –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤;
-   –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤;
-   –í–æ–∑–≤—Ä–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–µ;
-   –ñ—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π;
-   –°–æ–∑–¥–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤;
-   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ keccak256.

–í—Å–ø–æ–º–∏–Ω–∞–µ–º —á—Ç–æ –≤ memory –ø–∞–º—è—Ç—å —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ 32-–±–∞–π—Ç–æ–≤—ã–µ —Å–ª–æ—Ç—ã –ø–æ—ç—Ç–æ–º—É —á–∞—Å—Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —á–∏—Å–ª–∞ –∫—Ä–∞—Ç–Ω—ã–µ 0x20 - (0x40, 0x60, 0x80, 0xa0, ...), —Ç–∞–∫ –≤–æ—Ç –ø–µ—Ä–≤—ã–µ —á–µ—Ç—ã—Ä–µ —Å–ª–æ—Ç–∞ –≤—Å–µ–≥–¥–∞ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É—é—Ç—Å—è –¥–ª—è —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ü–µ–ª–µ–π, —ç—Ç–æ —Å–ª–æ—Ç—ã —Å 0x00 –ø–æ 0x60 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ.

![memory-table](./img/memory-table.jpeg)

-   –ü–µ—Ä–≤—ã–µ –¥–≤–∞ —Å–ª–æ—Ç–∞ –∏–ª–∏ 64 –±–∞–π—Ç–∞ (0x00 - 0x3f) —Ä–µ–∑–µ—Ä–≤–∏—Ä—É—é—Ç—Å—è –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è;
-   –°–ª–µ–¥—É—é—â–∏–µ 32 –±–∞–π—Ç–∞ (0x40 - 0x5f) –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –≤ –ø–∞–º—è—Ç–∏;
-   –î–∞–ª–µ–µ —Å–ª–µ–¥—É–µ—Ç –Ω—É–ª–µ–≤–æ–π —Å–ª–æ—Ç (0x60 - 0x7f), —ç—Ç–∏ 32 –±–∞–π—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤ –Ω—É–ª—è–º–∏, –ø–æ—ç—Ç–æ–º—É –≤ –Ω–∏—Ö –Ω–∏–∫–æ–≥–¥–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è;

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ª—é–±–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ EVM –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç—Ä–µ—Ö –æ–ø–∫–æ–¥–æ–≤: `PUSH1(0x80)`, `PUSH1(0x40)`,`MSTORE` - —ç—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏, –≥–¥–µ —É–∫–∞–∑–∞—Ç–µ–ª—å —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ `0x80` (128-–π –±–∞–π—Ç) –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Å–ª–æ—Ç 0x40, –µ–≥–æ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å —Å–º–µ—â–µ–Ω–∏–µ–º –≤ –ø–∞–º—è—Ç–∏.
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–µ—Ä–≤—ã–µ –¥–≤–∞ —Å–ª–æ—Ç–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –Ω—É–ª—è–º–∏, –∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ memory –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–∞–º—è—Ç—å –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–º–µ—â–µ–Ω–∏—è 0x80.

![memory-1](./img/memory-1.png)

–ù–∞–ø—Ä–∏–º–µ—Ä —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —á–∏—Å–ª–æ –∫–æ—Ç–æ—Ä–æ–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –Ω—É–ª–µ–≤–æ–º —Å–ª–æ—Ç–µ storage, –¥–ª—è –Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å –µ–≥–æ –≤ memory.

–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ:

-   –ø–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å (—Å–º–µ—â–µ–Ω–∏–µ) —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Å–ª–æ—Ç–∞,
-   –∑–∞–ø–∏—Å–∞—Ç—å —Ç—É–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ storage,
-   –≤–µ—Ä–Ω—É—Ç—å –∞–¥—Ä–µ—Å –∏ —Ä–∞–∑–º–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    uint256 value = 42; // slot 0

    function getValue() external view returns (uint256) {
        assembly {
            // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è value, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —Å–ª–æ—Ç–µ
            let _value := sload(value.slot)

            // –∑–∞—Ç–µ–º –ø–æ–ª—É—á–∞–µ–º "—É–∫–∞–∑–∞—Ç–µ–ª—å" –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å memory
            let ptr := mload(0x40)

            // –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç—É–¥–∞ –Ω–∞—à–µ —á–∏—Å–ª–æ
            mstore(ptr, _value)

            // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —ç—Ç–æ —á–∏—Å–ª–æ
            return(ptr, 0x20)
        }
    }
}
```

–í–æ—Ç —Ç–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤ memory —Ñ—É–Ω–∫—Ü–∏—è –≤—ã—à–µ, –≥–¥–µ `value` —Ä–∞–≤–Ω–æ 42 (0x2a –≤ hex). –ë–µ—Ä–µ–º –µ–≥–æ –∏–∑ storage –∏ –ø–æ–º–µ—â–∞–µ–º –≤ —Å–ª–æ—Ç –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É 0x80 (—Å–º–µ—â–µ–Ω–∏–µ –Ω–∞ 128 –±–∞–π—Ç –æ—Ç –Ω–∞—á–∞–ª–∞).

![memory-2](./img/memory-2.png)

_–í–∞–∂–Ω–æ!_ –£–∫–∞–∑–∞—Ç–µ–ª—å —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ solidity, –Ω–æ **–ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–º –∫–æ–¥–æ–º (Yul), –ø–æ—ç—Ç–æ–º—É –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –∫–æ–¥ solidity —Å–ª–µ–¥—É–µ—Ç –∑–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–º –∫–æ–¥–æ–º. –ö–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å Yul –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ solidity —É–∫–∞–∑–∞—Ç–µ–ª—å —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –≤—Ä—É—á–Ω—É—é, —á—Ç–æ–±—ã –∫–æ–¥ solidity –º–æ–≥ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

–ú–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    // ...

    function allocateMemory() external pure {
        assembly {
            // –í—ã–ø–æ–ª–Ω—è–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ memory –∏—Å–ø–æ–ª—å–∑—É—è 3 —Å–ª–æ—Ç–∞
            let freeMemoryPointer := mload(0x40)
            mstore(freeMemoryPointer, 1)
            mstore(add(freeMemoryPointer, 0x20), 2)
            mstore(add(freeMemoryPointer, 0x40), 3)

            // –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É–∫–∞–∑–∞—Ç–µ–ª—è
            allocate(0x60)

            // —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–∞–º—è—Ç–∏ –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –≤—ã—à–µ
            // –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å
            function allocate(length) {
                let pos := mload(0x40)
                mstore(0x40, add(pos, length))
            }
        }
    }
}
```

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å memory –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

| –§—É–Ω–∫—Ü–∏—è         | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                               |
| --------------- | ---------------------------------------------------------------------------------------------------------------------- |
| `mload(p)`      | –ó–∞–≥—Ä—É–∂–∞–µ—Ç 32-–±–∞–π—Ç–æ–≤–æ–µ —Å–ª–æ–≤–æ –∏–∑ –ø–∞–º—è—Ç–∏, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `p`, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ.                               |
| `mstore(p, v)`  | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `v` –≤ –ø–∞–º—è—Ç–∏, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `p`. –ó–Ω–∞—á–µ–Ω–∏–µ `v` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 32 –±–∞–π—Ç–∞ –≤ –¥–ª–∏–Ω—É.                     |
| `mstore8(p, v)` | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–ª–∞–¥—à–∏–π –±–∞–π—Ç –∑–Ω–∞—á–µ–Ω–∏—è `v` (—Ç.–µ., `v & 0xff`) –≤ –ø–∞–º—è—Ç–∏ –ø–æ –∞–¥—Ä–µ—Å—É `p`. –≠—Ç–æ –∏–∑–º–µ–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –±–∞–π—Ç –≤ –ø–∞–º—è—Ç–∏. |
| `msize()`       | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–∞–º—è—Ç–∏, —Ç.–µ. –Ω–∞–∏–±–æ–ª—å—à–∏–π –∏–Ω–¥–µ–∫—Å –ø–∞–º—è—Ç–∏, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –±—ã–ª–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ.                                    |

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å memory –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –∫–∞–∫ –≤ –Ω–µ–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö.

#### –°—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ memory

–°—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ –ø–æ—Ä—è–¥–∫—É –Ω–∞—á–∏–Ω–∞—è —Å —É–∫–∞–∑–∞—Ç–µ–ª—è —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏, –ø–æ—Å–ª–µ —á–µ–≥–æ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    // ...

    struct S {
        uint256 a;
        uint256 b;
    }

    function getStructValuesAndFreeMemoryPointer()
        external
        pure
        returns (uint256 a, uint256 b, bytes32 freeMemoryPointer)
    {
        // –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Ç—É–¥–∞ –∑–Ω–∞—á–µ–Ω–∏—è
        S memory s = S({a: 21, b: 42});

        assembly {
            a := mload(0x80) // –≤–µ—Ä–Ω–µ—Ç a (21), –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å –≤ solidity - 0x80
            b := mload(0xa0) // –≤–µ—Ä–Ω–µ—Ç b (42), –≤—Ç–æ—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è —Å–ª–µ–¥–æ–º –∑–∞ –ø–µ—Ä–≤—ã–º

            // –ù–æ–≤—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å - 0xc0 (0x80 + 32 bytes * 2)
            freeMemoryPointer := mload(0x40)
        }
    }
}
```

_–í–∞–∂–Ω–æ!_ –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç storage –≤ memory –¥–∞–Ω–Ω—ã–µ –Ω–µ –±—É–¥—É—Ç —É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å—Å—è –≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç –º–µ–Ω—å—à–µ 32 –±–∞–π—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–∫–∂–µ –∑–∞–π–º–µ—Ç 62 –±–∞–π—Ç–∞ –∞ –Ω–µ 32, —Ö–æ—Ç—è –≤ storage –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ –±—ã —É–ø–∞–∫–æ–≤–∞–Ω—ã –≤ 32:

```js
    struct S {
        uint128 a; // –∑–∞–π–º–µ—Ç 32 –±–∞–π—Ç–∞
        uint128 b; // –∑–∞–π–º–µ—Ç 32 –±–∞–π—Ç–∞
    }
```

#### –ú–∞—Å—Å–∏–≤—ã —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã –≤ memory

–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–∞–∫ –∂–µ, –∫–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    // ...

    function getFixedArrayValues() external pure returns (uint256 a, uint256 b) {
        uint256[2] memory arr;
        arr[0] = 21;
        arr[1] = 42;

        assembly {
            a := mload(0x80) // –≤–µ—Ä–Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∏–Ω–¥–µ–∫—Å—É 0
            b := mload(0xa0) // –≤–µ—Ä–Ω–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∏–Ω–¥–µ–∫—Å—É 1
        }
    }
}
```

#### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Å—Å–∏–≤—ã –≤ memory

–î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤ –ø–µ—Ä–≤—ã–π —Å–ª–æ—Ç –ø–∞–º—è—Ç–∏ –æ–±—ä–µ–º–æ–º 32 –±–∞–π—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–ª–∏–Ω—ã –º–∞—Å—Å–∏–≤–∞. –í Yul –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –º–∞—Å—Å–∏–≤–∞ - —ç—Ç–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –≤ –ø–∞–º—è—Ç–∏.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    // ...

    function getDynamicArrayValues(uint256[] memory arr) external pure returns (uint256 a, uint256 b, uint256 length) {
        assembly {
            // –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ - —ç—Ç–æ –ø–µ—Ä–≤—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä 0x80)
            let ptr := arr
            // –≤ –Ω–µ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞
            length := mload(ptr)

            a := mload(add(ptr, 0x20)) // –≤ —Å–ª–µ–¥—É—é—â–µ–π —è—á–µ–π–∫–µ –±—É–¥–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∏–Ω–¥–µ–∫—Å—É 0
            b := mload(add(ptr, 0x40)) // –ø–æ—Å–ª–µ –ø–æ –∏–Ω–¥–µ–∫—Å—É 1 –∏ —Ç.–¥.
        }
    }
}
```

_–í–∞–∂–Ω–æ!_ –ï—Å–ª–∏ –≤—ã –æ–±—ä—è–≤–∏–ª–∏ –ø—É—Å—Ç–æ–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ –≤ solidity, –æ–Ω –Ω–µ –ø—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ memory, —Ç–æ—á–Ω–µ–µ –æ–Ω –±—É–¥–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –Ω—É–ª–µ–≤–æ–π —Å–ª–æ—Ç 0x60, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤—Ä—É—á–Ω—É—é —É–∫–∞–∑–∞—Ç—å –µ–≥–æ –¥–ª–∏–Ω—É –∏ –¥–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã, –∞ —Ç–∞–∫–∂–µ –æ–±–Ω–æ–≤–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    // ...

    function setValuesToDynamicArray() external pure returns (uint256[] memory) {
        uint256[] memory arr;

        // –°–æ–∑–¥–∞–¥–∏–º –º–∞—Å—Å–∏–≤ –≤ memory = [42, 43]
        assembly {
            // —Å–µ–π—á–∞—Å arr —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ 0x60

            // —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–∏—Å–≤–æ–∏–º –µ–º—É —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å
            arr := mload(0x40)
            // –∑–∞–ø–∏—à–µ–º –¥–ª–∏–Ω—É –±—É–¥—É—â–µ–≥–æ –º–∞—Å—Å–∏–≤–∞ - 2 —ç–ª–µ–º–µ–Ω—Ç–∞
            mstore(arr, 2)
            // –¥–æ–±–∞–≤–∏–º –∑–Ω–∞—á–µ–Ω–∏—è –≤ –º–∞—Å—Å–∏–≤
            mstore(add(arr, 0x20), 42)
            mstore(add(arr, 0x40), 43)

            // –æ–±–Ω–æ–≤–∏–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å
            mstore(0x40, add(arr, 0x60))
        }

        return arr;
    }
}
```

#### –ú–∞—Å—Å–∏–≤—ã –±–∞–π—Ç–æ–≤ –∏ —Å—Ç—Ä–æ–∫–∏ –≤ memory

–≠–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–æ–≤ –≤ memory –≤—Å–µ–≥–¥–∞ –∑–∞–Ω–∏–º–∞—é—Ç —Ä–∞–∑–º–µ—Ä, –∫—Ä–∞—Ç–Ω—ã–π 32 –±–∞–π—Ç–∞–º, —ç—Ç–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ –¥–∞–∂–µ –¥–ª—è `bytes1[]`, **–Ω–æ –Ω–µ –¥–ª—è `bytes` –∏ `string`**.

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∏–ø–∞ `bytes` –∏ `string` - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Å—Å–∏–≤—ã. –î–ª–∏–Ω–∞ —Ç–∞–∫–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–≤–æ–º —Å–ª–æ—Ç–µ –º–∞—Å—Å–∏–≤–∞, –∑–∞ –Ω–∏–º —Å–ª–µ–¥—É—é—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞.

_–í–∞–∂–Ω–æ!_ –ï—Å–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ memory –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ —Ç–∞–∫–∏–µ –º–∞—Å—Å–∏–≤—ã –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤—ã—Ä–∞–≤–Ω–µ–Ω–Ω—ã–º–∏ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é 32-—Ö –±–∞–π—Ç–æ–≤—ã—Ö —Å–ª–æ—Ç–æ–≤, –∫–∞–∫ —ç—Ç–æ –±—ã–ª–æ –≤ storage, –Ω–æ —Ç—É—Ç –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ —Å–ª–æ—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –≤ storage, –∞ –≤ memory –∏ calldata –º—ã –º–æ–∂–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º. –ü–æ—ç—Ç–æ–º—É —Ç–æ, —á—Ç–æ –≤—ã –≤–∏–¥–∏—Ç–µ –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ - —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è.

–¢–∞–∫–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É —Å `bytes` –≤ memory.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    // ...

    function getStringInfo() external pure returns (uint256 len, bytes21 strInBytes) {
        string memory str = "Hello, this is a test"; // 21 —Å–∏–º–≤–æ–ª (0x15 –≤ hex)

        assembly {
            len := mload(0x80) // –≤ —ç—Ç–æ–º —Å–ª–æ—Ç–µ –±—É–¥–µ—Ç –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞
            strInBytes := mload(0xa0) // –∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å–∞–º –º–∞—Å—Å–∏–≤
        }
    }
}
```

–ï—Å–ª–∏ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ –∫–∞–∫ –æ–Ω–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ memory, —Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

-   —Å–Ω–∞—á–∞–ª–∞ –±—É–¥–µ—Ç –≤–∑—è—Ç–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å –ø–æ –∞–¥—Ä–µ—Å—É `0x40` (—Ç.–∫. `0x60` —ç—Ç–æ –Ω—É–ª–µ–≤–æ–π —Å–ª–æ—Ç –∏ –≤ –Ω–µ–≥–æ –Ω–µ–ª—å–∑—è –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å - —Å–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `0x80`)
-   –≤ `0x80` –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ (–≤ —Å–ª—É—á–∞–µ –Ω–∞—à–µ–π —Å—Ç—Ä–æ–∫–æ–π "Hello, this is a test" - 21 –±–∞–π—Ç (`0x15`))
-   –≤ —Å–ª–µ–¥—É—é—â–µ–º "—Å–ª–æ—Ç–µ" –º—ã –≤–∏–¥–∏–º –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é —Å–∞–º –º–∞—Å—Å–∏–≤ –∏–∑ UTF-8 —Å–∏–º–≤–æ–ª–æ–≤ `48 65 6c 6c 6f 2c 20 74 68 69 73 20 69 73 20 61 20 74 65 73 74`
-   –¥–∞–ª–µ–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å –≤ `0x40`, —Ç–µ–ø–µ—Ä—å –æ–Ω `0xc0`

–§–æ–∫—É—Å –≤ —Ç–æ–º, —á—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≤ memory —ç—Ç–æ—Ç –º–∞—Å—Å–∏–≤ –∑–∞–ø–∏—Å–∞–Ω —Ç–∞–∫ `15 48 65 6c 6c 6f 2c 20 74 68 69 73 20 69 73 20 61 20 74 65 73 74`. –ß—É—Ç—å –ø–æ–∑–∂–µ –º—ã —É–≤–∏–¥–∏–º –∫–∞–∫ –º–æ–∂–Ω–æ —Å–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ —ç—Ç–æ –¥–µ–ª–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ—Ö —Å–ª–æ—Ç–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –º—ã –≤–∏–¥–∏–º –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ. –ù–∞–ø–æ–º–Ω—é, —á—Ç–æ —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã (—Å—Ç–µ–∫–æ–≤–∞—è –º–∞—à–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å 32-x –±–∞–π—Ç–æ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏) –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.

![memory-sting-1](./img/memory-string-1.png)

–í—ã—à–µ –±—ã–ª –ø—Ä–∏–º–µ—Ä –∫–∞–∫ –≤ –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ memory, –Ω–æ –µ—Å–ª–∏ —Ç–∞–∫—É—é —Å—Ç—Ä–æ–∫—É –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, —Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –±—É–¥–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –¥—Ä—É–≥–æ–π.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    // ...

    function getString() external pure returns (string memory str) {
        str = "Hello, this is a test";
    }
}
```

-   –í–æ-–ø–µ—Ä–≤—ã—Ö –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω –Ω–µ —Ç–æ—Ç –º–∞—Å—Å–∏–≤ –±–∞–π—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –∑–∞–ø–∏—Å–∞–Ω –≤ –ø–∞–º—è—Ç—å, –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –∏ –∑–∞–ø–∏—à—É—Ç—Å—è –≤ memory —Å–Ω–æ–≤–∞.
-   –í–æ-–≤—Ç–æ—Ä—ã—Ö –ø–µ—Ä–µ–¥ –¥–ª–∏–Ω–æ–π –º–∞—Å—Å–∏–≤–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ 32 –±–∞–π—Ç–∞ —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `0x20` (32). –í—ã –º–æ–∂–µ—Ç–µ –≤–æ–∑—Ä–∞–∑–∏—Ç—å —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –±–æ–ª—å—à–µ 32 –±–∞–π—Ç, —Ç.–∫. –ø—Ä–µ–¥—ã–¥—É—â–∞—è –∑–∞–ø–∏—Å—å –º–∞—Å—Å–∏–≤–∞ –∑–∞–Ω–∏–º–∞–ª–∞ –º–µ–Ω—å—à–µ –º–µ—Å—Ç–∞ (21 –±–∞–π—Ç), –Ω–æ –∫–∞–∫ –º—ã –ø–æ–º–Ω–∏–º —É–∫–∞–∑–∞—Ç–µ–ª—å —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ –æ–±–Ω–æ–≤–∏–ª—Å—è –¥–æ `0xc0`.

![memory-string-2](./img/memory-string-2.png)

–ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `0x20 `, —è –Ω–µ –Ω–∞—à–µ–ª –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –∂–µ–ª—Ç–æ–π –±—É–º–∞–≥–µ –∏–ª–∏ –≥–¥–µ-—Ç–æ –µ—â–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –º–æ–∏–º —Å–ª–æ–≤–∞–º, –Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–∞–∫–æ–µ: —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã —è–≤–Ω–æ –≥–æ–≤–æ—Ä–∏–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ, —á—Ç–æ –µ—Å–ª–∏ –æ–Ω–∞ –≤–æ–∑—å–º–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ 32 –±–∞–π—Ç–∞, —Ç–æ —Ç–∞–º –±—É–¥–µ—Ç –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞. –¢–æ –µ—Å—Ç—å —ç—Ç–∞ –¥–ª–∏–Ω–∞ –∫–∞–∫ –±—ã "–æ—Ç–∫—É—Å—ã–≤–∞–µ—Ç—Å—è" –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ –±–∞–π—Ç–æ–≤. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–∫–∏–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. –í—ã –º–æ–∂–µ—Ç–µ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–ª–∏–Ω—É —Å–∞–º–æ–π —Å—Ç—Ä–æ–∫–∏, –Ω–æ –¥–æ–±–∞–≤–∏—Ç—å—Å—è –≤—Å–µ —Ä–∞–≤–Ω–æ `0x20`.

–í–æ—Ç –ø—Ä–∏–º–µ—Ä –¥–ª—è —Å—Ç—Ä–æ–∫–∏ –¥–ª–∏–Ω–æ–π 153 —Å–∏–º–≤–æ–ª–∞:
![memory-string-8](./img/memory-string-8.png)

–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫ "–≤—Ä—É—á–Ω—É—é" –≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é Yul –≤–æ–∑—å–º–µ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç [Seaport](https://github.com/ProjectOpenSea/seaport/blob/539f0c18af85152aff9d64d90a55cf1627fd3e25/contracts/Seaport.sol#L102C9-L102C9) –æ—Ç OpenSea –∏ –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏—é [\_name()](https://github.com/ProjectOpenSea/seaport/blob/539f0c18af85152aff9d64d90a55cf1627fd3e25/contracts/Seaport.sol#L102C9-L102C9) —É –∫–æ—Ç–æ—Ä–æ–π –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ - –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏–∑ 7-–º–∏ —Å–∏–º–≤–æ–ª–æ–≤ - Seaport. –í –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞ –±–∞–π—Ç–æ–≤ —ç—Ç–æ —Å–ª–æ–≤–æ –±—É–¥–µ—Ç –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ —Ç–∞–∫: `07 53 65 61 70 6f 72 74`.

```js
    function _name() internal pure override returns (string memory) {
        // Return the name of the contract.
        assembly {
            mstore(0x20, 0x20)
            mstore(0x47, 0x07536561706f7274)
            return(0x20, 0x60)
        }
    }
```

–†–∞–∑–±–µ—Ä–µ–º –ø–æ –ø–æ—Ä—è–¥–∫—É —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:

-   `mstore(0x20, 0x20)` - –±–µ—Ä–µ–º —Å–º–µ—â–µ–Ω–∏–µ `0x20` –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç—É–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ `0x20`
-   `mstore(0x47, 0x07536561706f7274)` - –±–µ—Ä–µ–º —Å–º–µ—â–µ–Ω–∏–µ `0x47` –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç—É–¥–∞ –Ω–∞—à –º–∞—Å—Å–∏–≤
-   `return(0x20, 0x60)` - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–º `0x60` –±–∞–π—Ç –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–º–µ—â–µ–Ω–∏—è `0x20`

–ê —Ç–µ–ø–µ—Ä—å –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ memory:
![memory-string-3](./img/memory-string-3.png)

–ò –≤–∏–¥–∏–º —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Ä–∞—Å–ø–æ–ª–æ–∂–∏–ª–∏—Å—å –∫–∞–∫ –Ω–∞–¥–æ, –µ—Å—Ç—å `0x20`, –∑–∞—Ç–µ–º –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ `0x07` –∏ —Å–∞–º –º–∞—Å—Å–∏–≤ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º–µ—Å—Ç–æ–º –∑–∞–ø–∏—Å–∏ –±—ã–ª–æ —Å–º–µ—â–µ–Ω–∏–µ `0x47`, –∞ –Ω–µ –ø—Ä–∏–≤—ã—á–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –∫—Ä–∞—Ç–Ω–æ–µ 32-–º –±–∞–π—Ç–∞–º (`0x20`). –î–∞–ª—å—à–µ —Å—Ç–∞–Ω–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ –ø–æ—á–µ–º—É —Ç–∞–∫.

–í–æ—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–µ 32 –±–∞–π—Ç–∞ –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤ –ø–∞–º—è—Ç—å, –æ–Ω–∏ –≤—ã–¥–µ–ª–µ–Ω—ã –∑–µ–ª–µ–Ω—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–æ–≥–¥–∞ –º—ã –≤—ã–∑–≤–∞–ª–∏ `mstore(0x47, 0x07536561706f7274)` –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –º–∞—Å—Å–∏–≤ `0x07536561706f7274` –±—ã–ª –¥–æ–ø–æ–ª–Ω–µ–Ω –Ω—É–ª—è–º–∏ —Å–ø–µ—Ä–µ–¥–∏ –¥–æ 32-x –±–∞–π—Ç.
![memory-string-4](./img/memory-string-4.png)

–¢–æ –∂–µ —Å–∞–º–æ–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤–æ—Ç —Ç–∞–∫:

```js
contract Memory {
    // ...

    function getSeaport() external pure returns (string memory, uint256 len, bytes7 arr) {
        assembly {
            mstore(0x20, 0x20) // –≤—Ç–æ—Ä–æ–π —Å–ª–æ—Ç –≤–∑—è—Ç –¥–ª—è —Å—Ö–æ–∂–µ—Å—Ç–∏ —Å –æ—Ä–∏–≥. –ø—Ä–∏–º–µ—Ä–æ–º
            mstore(0x40, 0x07) // —Å—é–¥–∞ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º –¥–ª–∏–Ω—É
            mstore(0x60, 0x536561706f727400000000000000000000000000000000000000000000000000) // –∞ —Å—é–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏—è
            return(0x20, 0x60) // —Ç–∞–∫–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 96 –±–∞–π—Ç
        }
    }
}
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —á—Ç–æ —è –¥–æ–±–∞–≤–∏–ª –¥–≤–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ - `len` –∏ `arr`, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∂—É—Ç –¥–ª–∏–Ω—É –º–∞—Å—Å–∏–≤–∞ –∏ —Å–∞–º –º–∞—Å—Å–∏–≤ (–±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –¥–ª–∏–Ω—ã –≤–Ω–∞—á–∞–ª–µ).

–ù—É –∏ –Ω–∞–ø–æ—Å–ª–µ–¥–æ–∫ –ø–æ–∫–∞–∂—É, —á—Ç–æ –≤ memory –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö —Å–ª–æ—Ç–æ–≤. –í–æ–∑—å–º–µ–º —Ñ—É–Ω–∫—Ü–∏—é `name` –∏ –¥–æ–±–∞–≤–∏–º –Ω–µ–±–æ–ª—å—à–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –≤ 5 –±–∞–π—Ç.

```js
contract Memory {
    // ...

    function getSeaportSecondVariant() external pure returns (string memory, uint256 len, bytes7 arr) {
        assembly {
            // —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É—é —á—Ç–æ–±—ã –±—ã–ª –ø–µ—Ä–µ–¥ –≥–ª–∞–∑–∞–º–∏
            // mstore(0x20, 0x20)
            // mstore(0x47, 0x07536561706f7274)
            // return(0x20, 0x60)

            mstore(0x25, 0x20) // 0x20 + 5 = 0x25
            mstore(0x4c, 0x07536561706f7274) // 0x47 + 5 = 0x4c
            return(0x25, 0x60) // 0x20 + 5 = 0x25
        }
    }
}
```

–°–º–æ—Ç—Ä–∏–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ memory. –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ `0x20`:

![memory-string-5](./img/memory-string-5.png)

–ó–∞—Ç–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –±–∞–π—Ç–æ–≤:

![memory-string-6](./img/memory-string-6.png)

–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∑–∞–º–µ—Ç–∏—Ç—å —á—Ç–æ –º—ã –∑–∞—Ç–∏—Ä–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –¥–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –ø–æ—á–µ–º—É –±—ã –∏ –Ω–µ—Ç `¬Ø\_(„ÉÑ)_/¬Ø`

–†–µ–∑—É–ª—å—Ç–∞—Ç:

![memory-string-7](./img/memory-string-7.png)

–í–∏–¥–Ω–æ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∫–∞–∑–∞–ª–æ—Å—å –±—ã —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –Ω–µ–≤–µ—Ä–Ω–æ, –µ—Å–ª–∏ —Ä–∞—Å—Å—É–∂–¥–∞—Ç—å –≤ –ø–∞—Ä–∞–¥–∏–≥–º–µ 32-–±–∞–π—Ç–æ–≤—ã—Ö —Å–ª–æ—Ç–æ–≤, –Ω–æ —ç—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∞–º–∏.

#### abi.encode

–û–ø–µ—Ä–∞—Ü–∏—è abi.encode —Å–Ω–∞—á–∞–ª–∞ –ø–æ–º–µ—â–∞–µ—Ç –≤ –ø–∞–º—è—Ç—å –¥–ª–∏–Ω—É –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤ –±–∞–π—Ç–∞—Ö, –∞ –∑–∞—Ç–µ–º —Å–∞–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã. –ï—Å–ª–∏ –∫–∞–∫–æ–π-–ª–∏–±–æ –∞—Ä–≥—É–º–µ–Ω—Ç –º–µ–Ω—å—à–µ 32 –±–∞–π—Ç–æ–≤, –æ–Ω –±—É–¥–µ—Ç —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 32 –±–∞–π—Ç–æ–≤.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    // ...

    function abiEncode() external pure {
        abi.encode(uint256(1), uint256(2));

        assembly {
            let length := mload(0x80) // 0x0000...000040 (64 –±–∞–π—Ç)
            let arg1 := mload(0xa0) // 0x0000...000001 (32 –±–∞–π—Ç)
            let arg2 := mload(0xc0) // 0x0000...000002 (32 –±–∞–π—Ç)
        }
    }
}
```

#### abi.encodePacked

–ü–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å `abi.encode` —Ñ—É–Ω–∫—Ü–∏—è `abi.encodePacked` –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–∞–π—Ç—ã –∫ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    // ...

    function abiEncodePacked() external pure {
        abi.encodePacked(uint256(1), uint128(2));

        assembly {
            let length := mload(0x80) // 0x0000...000030 (48 –±–∞–π—Ç)
            let arg1 := mload(0xa0) // 0x0000...000001 (32 –±–∞–π—Ç)
            let arg2 := mload(0xc0) // 0x00...0002 (16 –±–∞–π—Ç)
        }
    }
}
```

#### return

–§—É–Ω–∫—Ü–∏—è `return(p,s)` –≤–æ–∑—å–º–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–∞–º—è—Ç–∏ —Ä–∞–∑–º–µ—Ä–æ–º `s`, –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–ª–æ—Ç–∞ `p`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä–æ–º –±–æ–ª–µ–µ 32 –±–∞–π—Ç.

```js
contract Memory {
    // ...

    function returnValues() external pure returns (uint256, uint256) {
        assembly {
            // –∑–∞–ø–∏—à–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å–ª–æ—Ç—ã 0x80 –∏ 0xa0
            mstore(0x80, 1)
            mstore(0xa0, 2)
            // –≤–µ—Ä–Ω–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–º–µ—â–µ–Ω–∏—è 0x80 —Ä–∞–∑–º–µ—Ä–æ–º 0x40 (64 –±–∞–π—Ç–µ)
            return(0x80, 0x40)
        }
    }
}
```

_–í–∞–∂–Ω–æ!_ –ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –º–µ–Ω—å—à–µ 32 –±–∞–π—Ç, –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç –¥–æ–ø–æ–ª–Ω–µ–Ω—ã –¥–æ 32 –±–∞–π—Ç.

#### revert

–ê—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ `revert(p,s)` —Ç–∞–∫–∏–µ –∂–µ, –∫–∞–∫ –∏ —É `return(p,s)`, –≤ —Ç–æ–º —Å–º—ã—Å–ª–µ, —á—Ç–æ –æ–Ω–∞ —Ç–∞–∫–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–∞–º—è—Ç–∏ —Ä–∞–∑–º–µ—Ä–æ–º `s`, –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–ª–æ—Ç–∞ `p`. –†–∞–∑–Ω–∏—Ü–∞ –≤ —Ç–æ–º, —á—Ç–æ `revert` –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

```js
contract Memory {
    // ...

    function revertExecution() external {
        assembly {
            if iszero(eq(mul(2, 2), 5)) {
                revert(0, 0)
            }
        }
    }
}
```

#### keccak256

–í—ã–∑–æ–≤ `keccak256(p, n)` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ö–µ—à –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω—è—â–∏—Ö—Å—è –≤ –ø–∞–º—è—Ç–∏ –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `p` –∏ –∑–∞–Ω–∏–º–∞—é—â–∏—Ö `n` –±–∞–π—Ç–æ–≤.

–ü—Ä–∏–º–µ—Ä —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:

```js
contract Memory {
    // ...

    function getKeccak() external pure {
        assembly {
            // –∑–∞–ø–∏—à–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å–ª–æ—Ç—ã 0x80 –∏ 0xa0
            mstore(0x80, 1)
            mstore(0xa0, 2)

            // —Ö–µ—à–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞—á–∏–Ω–∞—è —Å 0x80 —Ä–∞–∑–º–µ—Ä–æ–º 0x40 –∏ —Å–æ—Ö—Ä–∞–Ω–∏–º –∏—Ö –≤ —Å–ª–æ—Ç–µ 0xc0
            mstore(0xc0, keccak256(0x80, 0x40))
        }
    }
}
```

–í—Å–µ –ø—Ä–∏–º–µ—Ä—ã —Å–æ–±—Ä–∞–Ω—ã –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ [Memory.sol](./examples/Memory.sol).

### Calldata

Calldata ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ EVM, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º –±–∞–π—Ç–∞–º, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–º c –ª—é–±–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π –≤—ã–∑–æ–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è –∞–¥—Ä–µ—Å–∞–º–∏.

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (–ª–∏–±–æ –∏–∑ EOA, –ª–∏–±–æ –∏–∑ –¥—Ä—É–≥–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞) calldata ‚Äî —ç—Ç–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –Ω–∞—á–∞–ª—å–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤—ã–∑—ã–≤–∞–µ–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

Calldata –º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å —Å–∞–º—ã–º –¥–µ—à–µ–≤—ã–º —Ç–∏–ø–æ–º —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã –≤ —Ç–µ–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Ç–∞–∫–∂–µ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏, —Ç.–∫. —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ —Å–∞–º–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–ø–æ–ª–µ msg.data).

–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –≤ —Ç–æ–º, —á—Ç–æ –º—ã –º–æ–∂–µ–º –±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ calldata –∏ –ø–æ–º–µ—â–∞—Ç—å –∏—Ö —Å—Ä–∞–∑—É –≤ —Å—Ç–µ–∫ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Ö –∏–ª–∏ –∏–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –Ω–æ –º–æ–∂–µ–º —Ç–∞–∫–∂–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤ memory –∏–ª–∏ storage. –ú–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ calldata –≤—ã–¥–µ–ª—è–µ—Ç—Å—è **–≤—ã–∑—ã–≤–∞—é—â–µ–π** —Å—Ç–æ—Ä–æ–Ω–æ–π, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ memory –≤—ã–¥–µ–ª—è–µ—Ç—Å—è —É–∂–µ **–≤—ã–∑—ã–≤–∞–µ–º–æ–π** —Å—Ç–æ—Ä–æ–Ω–æ–π. –¢–æ –µ—Å—Ç—å –≤—ã–∑—ã–≤–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ (EOA –∏–ª–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç) —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π, –∞ –≤—ã–∑—ã–≤–∞–µ–º–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –∏—Ö –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç.

–î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–∑–æ–≤–∞ –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å abi, –æ–± —ç—Ç–æ–º –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [—Ç—É—Ç](https://github.com/fullstack-development/blockchain-wiki/blob/main/solidity/ABI/readme.md) –∏ –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.soliditylang.org/en/latest/abi-spec.html).

–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

-   –î–∞–Ω–Ω—ã–µ calldata –Ω–µ–ª—å–∑—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å, –æ–Ω–∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –∏–º–µ—é—Ç –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤ –≤–∏–¥–µ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –≥–∞–∑–∞ –≤ –±–ª–æ–∫–µ);
-   –ü–µ—Ä–≤—ã–µ 4 –±–∞–π—Ç–∞ –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä—É —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî –∞—Ä–≥—É–º–µ–Ω—Ç—ã;
-   –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–∏–ø–æ–≤ `array`, `bytes` –∏–ª–∏ `string` –ø–µ—Ä–≤—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –±—É–¥–µ—Ç —Å–º–µ—â–µ–Ω–∏–µ, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä, –∞ –ø–æ —ç—Ç–æ–º—É —Å–º–µ—â–µ–Ω–∏—é –±—É–¥–µ—Ç –µ–≥–æ –¥–ª–∏–Ω–∞;
-   –ê—Ä–≥—É–º–µ–Ω—Ç—ã —Ä–∞–∑–º–µ—Ä–æ–º –º–µ–Ω–µ–µ 32 –±–∞–π—Ç –¥–æ–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–æ 32 –±–∞–π—Ç.

_–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç!_ –ü–æ—Å–ª–µ [EIP-2028](https://eips.ethereum.org/EIPS/eip-2028) —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–Ω—É–ª–µ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è calldata –±—ã–ª–∞ —Å–Ω–∏–∂–µ–Ω–∞ —Å 68 –¥–æ 16 –≥–∞–∑ –∑–∞ –±–∞–π—Ç. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è "–ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏" —Å–µ—Ç–∏, –≤ —Ç–æ–º —á–∏—Å–ª–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é L2. –ö –ø—Ä–∏–º–µ—Ä—É —Ä–æ–ª–ª–∞–ø—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –µ–¥–∏–Ω—ã–π –ø–∞–∫–µ—Ç –∏ —Ç—É—Ç –±–æ–ª–µ–µ –¥–µ—à–µ–≤—ã–π calldata –∫–∞–∫ —Ä–∞–∑ –∫—Å—Ç–∞—Ç–∏.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å calldata:

| –§—É–Ω–∫—Ü–∏—è                 | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                              |
| ----------------------- | ----------------------------------------------------------------------------------------------------- |
| `calldataload(p)`       | –ó–∞–≥—Ä—É–∂–∞–µ—Ç 32-–±–∞–π—Ç–æ–≤–æ–µ —Å–ª–æ–≤–æ –∏–∑ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–∞, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `p`.                          |
| `calldatasize()`        | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–∞ –≤ –±–∞–π—Ç–∞—Ö.                                                     |
| `calldatacopy(t, f, s)` | –ö–æ–ø–∏—Ä—É–µ—Ç `s` –±–∞–π—Ç–æ–≤ –∏–∑ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–∞, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `f`, –≤ memory, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `t`. |

–ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç—ã —Å calldata, —Ç—É—Ç –º—ã —Å–Ω–æ–≤–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ —É—Å–ª–æ–≤–Ω—ã–º "—Å–ª–æ—Ç–∞–º" –∏–ª–∏ 32-–±–∞–π—Ç–æ–≤—ã–º —Å–ª–æ–≤–∞–º. –ì–ª–∞–≤–Ω–æ–µ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ —Å–¥–≤–∏–≥ –≤ 4 –±–∞–π—Ç–∞ –¥–ª—è —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ —Ä–∞–∑–±–µ—Ä–µ–º –¥–∞–Ω–Ω—ã–µ calldata –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å—Ç—Ä–æ–∫—É. –í—Å–ø–æ–º–∏–Ω–∞–µ–º —á—Ç–æ —Å—Ç—Ä–æ–∫–∞ –±—É–¥–µ—Ç –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `offset + length + data`.

```js
contract Calldata {

    function getString(string calldata) external pure returns(string memory, uint256 len) {
        assembly {
            // –ø–æ–ª—É—á–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏, –¥–æ–±–∞–≤–ª—è–µ–º 4 –±–∞–π—Ç–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —á—Ç–æ–±—ã —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–º–µ—â–µ–Ω–∏–µ
            let strOffset := add(4, calldataload(4))
            // –ø–æ–ª—É—á–∞–µ–º –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏
            len := calldataload(strOffset)
            // –ø–æ–ª—É—á–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å
            let ptr := mload(0x40)
            // –≤—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã
            let dataSize := sub(calldatasize(), 4)
            // –∫–æ–ø–∏—Ä—É–µ–º –≤ memory –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ —Å—Ç—Ä–æ–∫–µ –∫—Ä–æ–º–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã
            calldatacopy(ptr, 0x04, dataSize)

            // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä–æ–∫—É
            return(0x80, dataSize)
        }
    }
}
```

–°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π —Ç–∞–∫–æ–π:

-   —Å–Ω–∞—á–∞–ª–∞ —Å –ø–æ–º–æ—â—å—é `calldataload` –¥–æ—Å—Ç–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –æ —Å—Ç—Ä–æ–∫–µ. –ü—Ä–∏–±–∞–≤–ª—è–µ–º 4 –±–∞–π—Ç–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã
-   –ø–æ —ç—Ç–æ–º—É —Å–º–µ—â–µ–Ω–∏—é –ø–æ–ª—É—á–∞–µ–º –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏
-   –ø–æ–ª—É—á–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å
-   –≤—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (`calldatasize` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ä–∞–∑–º–µ—Ä)
-   –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–ø–∏—Ä—É–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ calldata –Ω–∞—á–∏–Ω–∞—è —Å 5–≥–æ –±–∞–π—Ç–∞ (0x04) –≤ memory –Ω–∞—á–∏–Ω–∞—è —Å —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å `ptr`
-   –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä–æ–∫—É (—Ç—É—Ç –µ—Å–ª–∏ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–∑–¥–µ–ª [–ø—Ä–æ —Å—Ç—Ä–æ–∫–∏ –≤ memory](#–º–∞—Å—Å–∏–≤—ã-–±–∞–π—Ç–æ–≤-–∏-—Å—Ç—Ä–æ–∫–∏-–≤-memory))

–ó–¥–µ—Å—å –≤–∞–∂–Ω–æ –æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è —á—Ç–æ —ç—Ç–æ—Ç –∫–æ–¥ —Å–¥–µ–ª–∞–Ω –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –Ω–µ–º–Ω–æ–≥–æ —É–ø—Ä–æ—â–µ–Ω. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –∑–Ω–∞–µ–º –¥–≤–µ –≤–µ—â–∏ –∫–æ—Ç–æ—Ä—ã–º–∏ –≤–µ—Ä–æ–ª–æ–º–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å:

-   —Å–º–µ—â–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ 32 –±–∞–π—Ç–∞
-   –∫—Ä–æ–º–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ—É–Ω–∫—Ü–∏—é –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è

–ü–æ—ç—Ç–æ–º—É –º—ã –º–æ–∂–µ–º —Å–µ–±–µ –ø–æ–∑–≤–æ–ª–∏—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã, –Ω–æ –µ—Å–ª–∏ –ø–µ—Ä–µ–¥ —Å—Ç—Ä–æ–∫–æ–π –∫ –ø—Ä–∏–º–µ—Ä—É –±—É–¥–µ—Ç —á–∏—Å–ª–æ, —Ç–æ —ç—Ç–æ—Ç –∫–æ–¥ —Å–ª–æ–º–∞–µ—Ç—Å—è. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–∞–º–µ—Ä–µ–Ω–æ –∏ —è –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ–∏–≥—Ä–∞—Ç—å —Å –Ω–∏–º –≤ Remix –∏—Å–ø–æ–ª—å–∑—É—è –æ—Ç–ª–∞–¥—á–∏–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ —á—Ç–æ-—Ç–æ –ø–µ—Ä–µ–¥ —Å—Ç—Ä–æ–∫–æ–π, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —Ç–∞–∫–∂–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –µ–µ –≤ memory –∏ –≤–µ—Ä–Ω—É—Ç—å –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –∫ –ø—Ä–∏–º–µ—Ä—É —Å –≤–æ—Ç —Ç–∞–∫–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π `foo(uint256 amount, string calldata)`.

–ü—Ä–∏–º–µ—Ä –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ [Calldata.sol](./examples/Calldata.sol).

–ö—Å—Ç–∞—Ç–∏ –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ Remix –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ calldata.
![calldata](./img/calldata.png)

#### –°—Ä–µ–∑ –¥–∞–Ω–Ω—ã—Ö

–≠—Ç–∞ —Ç–µ–º–∞ –Ω–µ —Å–æ–≤—Å–µ–º –ø—Ä–æ Yul, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –ø–æ–¥–æ–±–Ω—É—é –∑–∞–ø–∏—Å—å (`data[:4]`) –≥–¥–µ-—Ç–æ "–Ω–µ–ø–æ–¥–∞–ª–µ–∫—É" –æ—Ç inline assembly, –ø–æ—ç—Ç–æ–º—É –ª—É—á—à–µ –∑–Ω–∞—Ç—å —á—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç.

–ù–∞—á–∏–Ω–∞—è —Å solidity 0.6.0 —Å—Ç–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `data[start:end]` ("—Å—Ä–µ–∑—ã") –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö `bytes`, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö —Å calldata (–≤ memory —ç—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç).

–≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:

-   `start` - —Å–º–µ—â–µ–Ω–∏–µ, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–ª–µ–¥—É–µ—Ç –Ω–∞—á–∞—Ç—å —Å—Ä–µ–∑
-   `end` - —Å–º–µ—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –≥–¥–µ –∑–∞–∫–æ–Ω—á–∏—Ç—å —Å—Ä–µ–∑
-   –¥–≤–æ–µ—Ç–æ—á–∏–µ `:` - —Ä–∞–∑–¥–µ–ª—è–µ—Ç –Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü

–ú–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞—á–∞–ª–æ –∏–ª–∏ –∫–æ–Ω–µ—Ü. –ï—Å–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∞—á–∞–ª–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—Ä–µ–∑ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω —Å–æ —Å–º–µ—â–µ–Ω–∏—è 0. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–µ—Ü, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω —Å—Ä–µ–∑ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±–∞–π—Ç–∞ –≤ calldata.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∫ –ø—Ä–∏–º–µ—Ä—É —Å–µ–ª–µ–∫—Ç–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏: `bytes4 selector = msg.data[:4];` –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç —Ç–æ–ª—å–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ `bytes data = msg.data[4:0]`. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ `bytes data = msg.data[4:8]`.

## –í—ã–∑–æ–≤ –¥—Ä—É–≥–∏—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

–í Yul –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–∞ –¥—Ä—É–≥–∏—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

| –§—É–Ω–∫—Ü–∏—è                                        | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                                              |
| ---------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `call(g, a, v, in, insize, out, outsize)`      | –í—ã–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–æ –∞–¥—Ä–µ—Å—É `a`, –ø–µ—Ä–µ–¥–∞–≤–∞—è –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–∞–º—è—Ç–∏ `[in...(in+insize))`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è `g` –≥–∞–∑–∞ –∏ `v` –≤–µ–π. –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å `[out...(out+outsize))`. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –≥–∞–∑–∞) –∏ 1 –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞. |
| `callcode(g, a, v, in, insize, out, outsize)`  | –ü–æ–¥–æ–±–Ω–æ `call`, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –ø–æ –∞–¥—Ä–µ—Å—É `a`, –æ—Å—Ç–∞–≤–∞—è—Å—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.                                                                                                                                                           |
| `delegatecall(g, a, in, insize, out, outsize)` | –ü–æ–¥–æ–±–Ω–æ `callcode`, –Ω–æ —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞–¥—Ä–µ—Å –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (callvalue).                                                                                                                                                                 |
| `staticcall(g, a, in, insize, out, outsize)`   | –ü–æ–¥–æ–±–Ω–æ `call`, –Ω–æ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.                                                                                                                                                                                                   |

–í—Å–µ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 1 –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ 0 –≤ —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–∏.

–¢–∞–∫–∂–µ —á–∞—Å—Ç–æ –≤ —Å–≤—è–∑–∫–µ —Å –Ω–∏–º–∏ –∏–¥—É—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

| –§—É–Ω–∫—Ü–∏—è                   | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                   |
| ------------------------- | ------------------------------------------------------------------------------------------ |
| `returndatasize()`        | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (returndata).                              |
| `returndatacopy(t, f, s)` | –ö–æ–ø–∏—Ä—É–µ—Ç `s` –±–∞–π—Ç–æ–≤ –∏–∑ returndata, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `f`, –≤ memory, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `t`. |

–°–∞–º—ã–º —á–∞—Å—Ç—ã–º –ø—Ä–∏–º–µ—Ä–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —è–≤–ª—è—é—Ç—Å—è –ø—Ä–æ–∫—Å–∏-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –≤–æ–∑—å–º–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `_delegate` –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ [Proxy](https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/proxy/Proxy.sol) –æ—Ç Open Zeppelin.

```js
    function _delegate(address implementation) internal virtual {
        assembly {
            // Copy msg.data. We take full control of memory in this inline assembly
            // block because it will not return to Solidity code. We overwrite the
            // Solidity scratch pad at memory position 0.
            calldatacopy(0, 0, calldatasize())

            // Call the implementation.
            // out and outsize are 0 because we don't know the size yet.
            let result := delegatecall(gas(), implementation, 0, calldatasize(), 0, 0)

            // Copy the returned data.
            returndatacopy(0, 0, returndatasize())

            switch result
            // delegatecall returns 0 on error.
            case 0 {
                revert(0, returndatasize())
            }
            default {
                return(0, returndatasize())
            }
        }
    }
```

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `fallback()`, –∫–æ—Ç–æ—Ä–∞—è –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –¥–æ–±–∞–≤–ª—è–µ—Ç –∞–¥—Ä–µ—Å –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ Proxy, –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–∞–ª—å—à–µ:

-   –¥–ª—è –Ω–∞—á–∞–ª–∞ –≤ memory –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ calldata (–∫–∞–∫ –º—ã –ø–æ–º–Ω–∏–º —Ç–∏–ø –ø–∞–º—è—Ç–∏ calldata –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π, –ø–æ—ç—Ç–æ–º—É –∞–¥—Ä–µ—Å –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ç—É–¥–∞ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç, –≤—Å–µ —á—Ç–æ –ø—Ä–∏—à–ª–æ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π –≤ msg.data —Ç–∞–∫–∏–º –∏ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è)
-   –¥–∞–ª–µ–µ –º—ã –≤—ã–∑—ã–≤–∞–µ–º delegatecall –∏ –ø–µ—Ä–µ–¥–∞–µ–º —Ç—É–¥–∞ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
    -   –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≥–∞–∑–∞
    -   –∞–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–¥
    -   —Å–º–µ—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ memory –∫—É–¥–∞ –º—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ calldata, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ 0
    -   —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ç–æ—Ä—ã–µ –º—ã –±–µ—Ä–µ–º –∏–∑ memory –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É (calldata size)
    -   —Å–º–µ—â–µ–Ω–∏–µ –≤ memory –∫—É–¥–∞ –±—É–¥—É—Ç –∑–∞–ø–∏—Å–∞–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Ç–æ–∂–µ –±–µ–∑ —Å–º–µ—â–µ–Ω–∏—è
    -   —Ä–∞–∑–º–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –º—ã –µ–≥–æ –Ω–µ –∑–Ω–∞–µ–º, –ø–æ—ç—Ç–æ–º—É 0
-   –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º—ã –∫–æ–ø–∏—Ä—É–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ memory (–∑–¥–µ—Å—å —Ç–∞–∫–æ–π –∂–µ –ø—Ä–∏–Ω—Ü–∏–ø –∫–∞–∫ –∏ —Å `calldatacopy`), —Ç.–∫. –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —à–∞–≥–µ –≤ `delegatecall` –º—ã –Ω–µ –∑–Ω–∞–ª–∏ —Ä–∞–∑–º–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ —É–∫–∞–∑–∞–ª–∏ –º–µ—Å—Ç–æ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–º–µ—Ä
-   –ø—Ä–æ–≤–µ—Ä—è–µ–º `result`, –µ—Å–ª–∏ –≤—Å–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ, –æ—Ç–¥–∞–µ–º –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
-   –µ—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É–ø–∞–ª–∞, –æ—Ç–¥–∞–µ–º –æ—à–∏–±–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ –≤–µ—Ä–Ω—É–ª —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç

–° `call` –≤—Å–µ –±—É–¥–µ—Ç —Ç–∞–∫–∂–µ, —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—Å—è –µ—â–µ –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ - `value`. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Ç–æ–º –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç `call` –∏ `delegatecall` –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [—Ç—É—Ç](https://noxx.substack.com/p/evm-deep-dives-the-path-to-shadowy-a5f).

_–í–∞–∂–Ω–æ!_ –ï—Å–ª–∏ –∞–¥—Ä–µ—Å –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –∫–∞–∫ –ø–æ–¥–∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ –∏–º–µ–µ—Ç –∫–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä EOA), —Ç–æ –≤—ã–∑–æ–≤ call –≤–µ—Ä–Ω–µ—Ç true (1). –ò –æ–±—Ä–∞—Ç–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (–≤–æ–∑–≤—Ä–∞—Ç false - 0) –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –µ—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∏—Ç –≥–∞–∑–∞ –∏–ª–∏ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è –º–µ—Å—Ç–æ –≤ —Å—Ç–µ–∫–µ.

–í–æ—Ç [—Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç](./examples/Delegatecall.sol) —Å –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤—ã –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏–∑ –¥—Ä—É–≥–æ–≥–æ, –æ–Ω —Ç–∞–∫–∂–µ —Å–¥–µ–ª–∞–Ω –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–æ–∫—Å–∏ –∏ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –ø—Ä–æ–∫—Å–∏-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ low level iterations –≤ Remix.
–î–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–µ–≥–æ –º–æ–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å –ø–æ–º–æ—â—å—é cast, –Ω—É –ª–∏–±–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è `abi.encode`. –ß–µ—Ä–µ–∑ cast —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```bash
    cast calldata "increment(uint256)" 42

    >> 0x7cf5dab0000000000000000000000000000000000000000000000000000000000000002a
```

![low-level-iterations](./img/low-level-iterations.png)

_–í–∞–∂–Ω–æ!_ –ü–æ—Å–ª–µ —Ö–∞—Ä–¥—Ñ–æ—Ä–∫–∞ Byzantium –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ `call`, `delegatecall`, `callcode` –∏ `staticcall`) –∏ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Å –ø–æ–º–æ—â—å—é `returndatacopy` –∏ `returndatasize`. –í –ø—Ä–∏–º–µ—Ä–∞—Ö —Ç–∞–∫ –∏ —Å–¥–µ–ª–∞–Ω–æ, –Ω–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –æ–±—Ä–∞—Ç–Ω–æ–µ (–µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å —Ä–∞–∑–º–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Ç–æ –Ω–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å `returndatacopy`). –ü–æ —Ñ–∞–∫—Ç—É –∫–æ–≥–¥–∞ —è –ø—Ä–æ–≤–æ–¥–∏–ª —Ç–µ—Å—Ç—ã - –µ—Å–ª–∏ –ø–æ—Å–ª–µ `delegatecall` –Ω–µ –¥–µ–ª–∞—Ç—å `returndatacopy` (–¥–∞–∂–µ —Å –Ω—É–ª–µ–≤—ã–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏) —Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ memory `¬Ø\_(„ÉÑ)_/¬Ø`.

## Events

–î–ª—è —Å–æ–±—ã—Ç–∏–π –≤ Yul —Å—É—â–µ—Å—Ç–≤—É–µ—Ç 5 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –Ω–æ –µ—Å–ª–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ –∫–∞–∫ –≤ EVM —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–æ–±—ã—Ç–∏—è, —Ç–æ –∑–¥–µ—Å—å –¥–ª—è –≤–∞—Å –Ω–µ –±—É–¥–µ—Ç –Ω–∏—á–µ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ.

–í —Å–æ–±—ã—Ç–∏–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —á–µ—Ç—ã—Ä–µ —Ç–µ–º—ã (—Ç–æ–ø–∏–∫–∞) –∏ –Ω–µ–ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ü–µ—Ä–≤—ã–π —Ç–æ–ø–∏–∫, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å, —ç—Ç–æ –≤—Å–µ–≥–¥–∞ —Ö–µ—à —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Å–æ–±—ã—Ç–∏—è, –∞ —Ç—Ä–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö - –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –î–ª—è –Ω–µ–ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–º–µ—â–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ –∏ —Ä–∞–∑–º–µ—Ä —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

| –§—É–Ω–∫—Ü–∏—è                      | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                         |
| ---------------------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| `log0(p, s)`                 | –°–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ (event) –±–µ–∑ —Ç–µ–º —Å –¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–æ–º `s`, –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–º–µ—â–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏ `p`. –¢–∞–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –µ—â–µ –Ω–∞–∑—ã–≤–∞—é—Ç –∞–Ω–æ–Ω–∏–º–Ω—ã–º–∏. |
| `log1(p, s, t1)`             | –°–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ (event) —Å –æ–¥–Ω–æ–π —Ç–µ–º–æ–π (topic) `t1` –∏ –¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–æ–º `s`, –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–º–µ—â–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏ `p`.                     |
| `log2(p, s, t1, t2)`         | –°–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ (event) —Å –¥–≤—É–º—è —Ç–µ–º–∞–º–∏ `t1` –∏ `t2` –∏ –¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–æ–º `s`, –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–º–µ—â–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏ `p`.                     |
| `log3(p, s, t1, t2, t3)`     | –°–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ (event) —Å —Ç—Ä–µ–º—è —Ç–µ–º–∞–º–∏ `t1`, `t2` –∏ `t3` –∏ –¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–æ–º `s`, –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–º–µ—â–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏ `p`.               |
| `log4(p, s, t1, t2, t3, t4)` | –°–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ (event) —Å —á–µ—Ç—ã—Ä—å–º—è —Ç–µ–º–∞–º–∏ `t1`, `t2`, `t3` –∏ `t4` –∏ –¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–æ–º `s`, –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–º–µ—â–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏ `p`.      |

t1 ‚Äî —ç—Ç–æ —Ö–µ—à keccak256 —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Å–æ–±—ã—Ç–∏—è, t2 ‚Äî —ç—Ç–æ –ø–µ—Ä–≤—ã–π –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç —Å–æ–±—ã—Ç–∏—è, t3 ‚Äî –≤—Ç–æ—Ä–æ–π –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç —Å–æ–±—ã—Ç–∏—è –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ.

–í –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `log3` –µ—Å–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ `SomeLog(2, 3, true)`:

```js
contract EmitEvent {
    event SomeLog(uint256 indexed a, uint256 indexed b, bool c);

    function emitEvent() external {
        assembly {
            // –•–µ—à —Å–æ–±—Ç–∏—è - keccak256("SomeLog(uint256,uint256,bool)")
            let signature := 0x39cf0823186c1f89c8975545aebaa16813bfc9511610e72d8cff59da81b23c72

            // –ø–æ–ª—É—á–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å
            let ptr := mload(0x40)

            // –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —á–∏—Å–ª–æ 1 –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É (0x80)
            mstore(ptr, 1)

            // —Å–æ–∑–¥–∞–µ–º —Å–æ–±—ã—Ç–∏–µ SomeLog(2, 3, true)
            log3(0x80, 0x20, signature, 2, 3)
        }
    }
}
```

-   `log3` –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è `topic 1`, —Ç.–µ. —Ö–µ—à —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Å–æ–±—ã—Ç–∏—è, –ø–æ—ç—Ç–æ–º—É –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
-   –ø–æ–ª—É—á–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ memory
-   –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç—É–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ `1` (`true`)
-   —Å–æ–∑–¥–∞–µ–º —Å–æ–±—ã—Ç–∏–µ `log3` –ø–µ—Ä–µ–¥–∞–≤ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã

–ê –≤–æ—Ç —Ç–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ stack –∏ memory:

![memory-3](./img/memory-3.png)

-   –≤ memory –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–µ–ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
-   –≤ stack –≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–º –ø–æ—Ä—è–¥–∫–µ —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è:
    -   —Å–º–µ—â–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –Ω–µ–ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (0x80)
    -   —Ä–∞–∑–º–µ—Ä –Ω–µ–ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (0x20 - 32 –±–∞–π—Ç–∞)
    -   —Ö–µ—à keccak256 —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Å–æ–±—ã—Ç–∏—è `SomeLog(uint256,uint256,bool)`
    -   –ø–µ—Ä–≤—ã–π –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç
    -   –≤—Ç–æ—Ä–æ–π –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç
-   –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–ø–∫–æ–¥ `LOG3` –∫–æ—Ç–æ—Ä—ã–π –∑–∞–±–∏—Ä–∞–µ—Ç 5 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑ stack

–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç EmitEvent [—Ç—É—Ç](./examples/EmitEvent.sol).

## –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–∞ —è–∑—ã–∫–µ Yul

–ú–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å –ø–æ–º–æ—â—å—é Standalone Assembly - –Ω–∞ —á–∏—Å—Ç–æ–º Yul –≤ —Ñ–∞–π–ª–µ `.yul`, –Ω–æ —ç—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –±–æ–ª—å—à–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Ç–µ–º–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ solidity –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º.

–û–±—â–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –∫–∞–∫ –∏ –≤—Å–µ–≥–¥–∞ —Å Yul - –≤ –Ω–µ–º –æ—á–µ–Ω—å –º–Ω–æ–≥–æ "—Ä—É—á–Ω–æ–π" —Ä–∞–±–æ—Ç—ã, –∞ –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ç–∞–∫–∏–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –±—É–¥—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ `msg.data`, —Ç–æ –µ—Å—Ç—å –≤—ã—à–µ—É–ø–æ–º—è–Ω—É—Ç—ã–µ `calldata` –∏ low level interactions –≤ Remix (–µ—Å–ª–∏ –≤—ã –¥–µ–ª–∞–µ—Ç–µ —ç—Ç–æ –≤ Remix).

–í –∫–æ–¥–µ —Ñ–∞–π–ª–∞ `.yul` –≤—Å–µ —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç–∞—Ö. –ö–æ–Ω—Ç—Ä–∞–∫—Ç ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç –≤ Yul, –∞ —Ä–∞–∑–¥–µ–ª `code` ‚Äî —ç—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–¥.

–§—É–Ω–∫—Ü–∏–∏ `datasize`, `dataoffset` –∏ `datacopy` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–¥–µ–ª–∞–º –∫–æ–¥–∞. –®–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–µ, –∞ –æ–±—ã—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ ‚Äî –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–µ. –ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è `code` - `datacopy` –ø–æ–ª—É—á–∏—Ç –¥–æ—Å—Ç—É–ø –∫ –µ–≥–æ —Å–æ–±—Ä–∞–Ω–Ω–æ–º—É –¥–≤–æ–∏—á–Ω–æ–º—É –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—é.

| –§—É–Ω–∫—Ü–∏—è             | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                               |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `datasize(x)`       | –§—É–Ω–∫—Ü–∏—è `datasize(x)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ–±—ä–µ–∫—Ç–∞ Yul `x` –≤ –æ–±–ª–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö. `x` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–≤—ã–º –ª–∏—Ç–µ—Ä–∞–ª–æ–º, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–º –∏–º—è –¥—Ä—É–≥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.                                     |
| `dataoffset(x)`     | –§—É–Ω–∫—Ü–∏—è `dataoffset(x)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–º–µ—â–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ Yul `x` –≤ –æ–±–ª–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö. `x` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–≤—ã–º –ª–∏—Ç–µ—Ä–∞–ª–æ–º, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–º –∏–º—è –¥—Ä—É–≥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.                                 |
| `datacopy(t, f, l)` | –§—É–Ω–∫—Ü–∏—è `datacopy(t, f, l)` –∫–æ–ø–∏—Ä—É–µ—Ç `l` –±–∞–π—Ç–æ–≤ –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `f`, –≤ –ø–∞–º—è—Ç—å, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ–∑–∏—Ü–∏–∏ `t`. –î–ª—è EVM —Ñ—É–Ω–∫—Ü–∏—è `datacopy` —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `codecopy`. |

–ß—É—Ç—å –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.soliditylang.org/en/latest/yul.html#specification-of-yul-object), –Ω–æ —è —Ç–∞–∫–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º [ERC20-—Ç–æ–∫–µ–Ω–∞](https://remix.ethereum.org/?#language=yul&version=0.8.22&code=b2JqZWN0ICJUb2tlbiIgewogICAgY29kZSB7CiAgICAgICAgLy8gU3RvcmUgdGhlIGNyZWF0b3IgaW4gc2xvdCB6ZXJvLgogICAgICAgIHNzdG9yZSgwLCBjYWxsZXIoKSkKCiAgICAgICAgLy8gRGVwbG95IHRoZSBjb250cmFjdAogICAgICAgIGRhdGFjb3B5KDAsIGRhdGFvZmZzZXQoInJ1bnRpbWUiKSwgZGF0YXNpemUoInJ1bnRpbWUiKSkKICAgICAgICByZXR1cm4oMCwgZGF0YXNpemUoInJ1bnRpbWUiKSkKICAgIH0KICAgIG9iamVjdCAicnVudGltZSIgewogICAgICAgIGNvZGUgewogICAgICAgICAgICAvLyBQcm90ZWN0aW9uIGFnYWluc3Qgc2VuZGluZyBFdGhlcgogICAgICAgICAgICByZXF1aXJlKGlzemVybyhjYWxsdmFsdWUoKSkpCgogICAgICAgICAgICAvLyBEaXNwYXRjaGVyCiAgICAgICAgICAgIHN3aXRjaCBzZWxlY3RvcigpCiAgICAgICAgICAgIGNhc2UgMHg3MGEwODIzMSAvKiAiYmFsYW5jZU9mKGFkZHJlc3MpIiAqLyB7CiAgICAgICAgICAgICAgICByZXR1cm5VaW50KGJhbGFuY2VPZihkZWNvZGVBc0FkZHJlc3MoMCkpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMHgxODE2MGRkZCAvKiAidG90YWxTdXBwbHkoKSIgKi8gewogICAgICAgICAgICAgICAgcmV0dXJuVWludCh0b3RhbFN1cHBseSgpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMHhhOTA1OWNiYiAvKiAidHJhbnNmZXIoYWRkcmVzcyx1aW50MjU2KSIgKi8gewogICAgICAgICAgICAgICAgdHJhbnNmZXIoZGVjb2RlQXNBZGRyZXNzKDApLCBkZWNvZGVBc1VpbnQoMSkpCiAgICAgICAgICAgICAgICByZXR1cm5UcnVlKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDB4MjNiODcyZGQgLyogInRyYW5zZmVyRnJvbShhZGRyZXNzLGFkZHJlc3MsdWludDI1NikiICovIHsKICAgICAgICAgICAgICAgIHRyYW5zZmVyRnJvbShkZWNvZGVBc0FkZHJlc3MoMCksIGRlY29kZUFzQWRkcmVzcygxKSwgZGVjb2RlQXNVaW50KDIpKQogICAgICAgICAgICAgICAgcmV0dXJuVHJ1ZSgpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAweDA5NWVhN2IzIC8qICJhcHByb3ZlKGFkZHJlc3MsdWludDI1NikiICovIHsKICAgICAgICAgICAgICAgIGFwcHJvdmUoZGVjb2RlQXNBZGRyZXNzKDApLCBkZWNvZGVBc1VpbnQoMSkpCiAgICAgICAgICAgICAgICByZXR1cm5UcnVlKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDB4ZGQ2MmVkM2UgLyogImFsbG93YW5jZShhZGRyZXNzLGFkZHJlc3MpIiAqLyB7CiAgICAgICAgICAgICAgICByZXR1cm5VaW50KGFsbG93YW5jZShkZWNvZGVBc0FkZHJlc3MoMCksIGRlY29kZUFzQWRkcmVzcygxKSkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAweDQwYzEwZjE5IC8qICJtaW50KGFkZHJlc3MsdWludDI1NikiICovIHsKICAgICAgICAgICAgICAgIG1pbnQoZGVjb2RlQXNBZGRyZXNzKDApLCBkZWNvZGVBc1VpbnQoMSkpCiAgICAgICAgICAgICAgICByZXR1cm5UcnVlKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWZhdWx0IHsKICAgICAgICAgICAgICAgIHJldmVydCgwLCAwKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBtaW50KGFjY291bnQsIGFtb3VudCkgewogICAgICAgICAgICAgICAgcmVxdWlyZShjYWxsZWRCeU93bmVyKCkpCgogICAgICAgICAgICAgICAgbWludFRva2VucyhhbW91bnQpCiAgICAgICAgICAgICAgICBhZGRUb0JhbGFuY2UoYWNjb3VudCwgYW1vdW50KQogICAgICAgICAgICAgICAgZW1pdFRyYW5zZmVyKDAsIGFjY291bnQsIGFtb3VudCkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2Zlcih0bywgYW1vdW50KSB7CiAgICAgICAgICAgICAgICBleGVjdXRlVHJhbnNmZXIoY2FsbGVyKCksIHRvLCBhbW91bnQpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gYXBwcm92ZShzcGVuZGVyLCBhbW91bnQpIHsKICAgICAgICAgICAgICAgIHJldmVydElmWmVyb0FkZHJlc3Moc3BlbmRlcikKICAgICAgICAgICAgICAgIHNldEFsbG93YW5jZShjYWxsZXIoKSwgc3BlbmRlciwgYW1vdW50KQogICAgICAgICAgICAgICAgZW1pdEFwcHJvdmFsKGNhbGxlcigpLCBzcGVuZGVyLCBhbW91bnQpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGZyb20sIHRvLCBhbW91bnQpIHsKICAgICAgICAgICAgICAgIGRlY3JlYXNlQWxsb3dhbmNlQnkoZnJvbSwgY2FsbGVyKCksIGFtb3VudCkKICAgICAgICAgICAgICAgIGV4ZWN1dGVUcmFuc2Zlcihmcm9tLCB0bywgYW1vdW50KQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBleGVjdXRlVHJhbnNmZXIoZnJvbSwgdG8sIGFtb3VudCkgewogICAgICAgICAgICAgICAgcmV2ZXJ0SWZaZXJvQWRkcmVzcyh0bykKICAgICAgICAgICAgICAgIGRlZHVjdEZyb21CYWxhbmNlKGZyb20sIGFtb3VudCkKICAgICAgICAgICAgICAgIGFkZFRvQmFsYW5jZSh0bywgYW1vdW50KQogICAgICAgICAgICAgICAgZW1pdFRyYW5zZmVyKGZyb20sIHRvLCBhbW91bnQpCiAgICAgICAgICAgIH0KCgogICAgICAgICAgICAvKiAtLS0tLS0tLS0tIGNhbGxkYXRhIGRlY29kaW5nIGZ1bmN0aW9ucyAtLS0tLS0tLS0tLSAqLwogICAgICAgICAgICBmdW5jdGlvbiBzZWxlY3RvcigpIC0+IHMgewogICAgICAgICAgICAgICAgcyA6PSBkaXYoY2FsbGRhdGFsb2FkKDApLCAweDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZGVjb2RlQXNBZGRyZXNzKG9mZnNldCkgLT4gdiB7CiAgICAgICAgICAgICAgICB2IDo9IGRlY29kZUFzVWludChvZmZzZXQpCiAgICAgICAgICAgICAgICBpZiBpc3plcm8oaXN6ZXJvKGFuZCh2LCBub3QoMHhmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmKSkpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0KDAsIDApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZGVjb2RlQXNVaW50KG9mZnNldCkgLT4gdiB7CiAgICAgICAgICAgICAgICBsZXQgcG9zIDo9IGFkZCg0LCBtdWwob2Zmc2V0LCAweDIwKSkKICAgICAgICAgICAgICAgIGlmIGx0KGNhbGxkYXRhc2l6ZSgpLCBhZGQocG9zLCAweDIwKSkgewogICAgICAgICAgICAgICAgICAgIHJldmVydCgwLCAwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdiA6PSBjYWxsZGF0YWxvYWQocG9zKQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qIC0tLS0tLS0tLS0gY2FsbGRhdGEgZW5jb2RpbmcgZnVuY3Rpb25zIC0tLS0tLS0tLS0gKi8KICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVWludCh2KSB7CiAgICAgICAgICAgICAgICBtc3RvcmUoMCwgdikKICAgICAgICAgICAgICAgIHJldHVybigwLCAweDIwKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRydWUoKSB7CiAgICAgICAgICAgICAgICByZXR1cm5VaW50KDEpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qIC0tLS0tLS0tIGV2ZW50cyAtLS0tLS0tLS0tICovCiAgICAgICAgICAgIGZ1bmN0aW9uIGVtaXRUcmFuc2Zlcihmcm9tLCB0bywgYW1vdW50KSB7CiAgICAgICAgICAgICAgICBsZXQgc2lnbmF0dXJlSGFzaCA6PSAweGRkZjI1MmFkMWJlMmM4OWI2OWMyYjA2OGZjMzc4ZGFhOTUyYmE3ZjE2M2M0YTExNjI4ZjU1YTRkZjUyM2IzZWYKICAgICAgICAgICAgICAgIGVtaXRFdmVudChzaWduYXR1cmVIYXNoLCBmcm9tLCB0bywgYW1vdW50KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGVtaXRBcHByb3ZhbChmcm9tLCBzcGVuZGVyLCBhbW91bnQpIHsKICAgICAgICAgICAgICAgIGxldCBzaWduYXR1cmVIYXNoIDo9IDB4OGM1YmUxZTVlYmVjN2Q1YmQxNGY3MTQyN2QxZTg0ZjNkZDAzMTRjMGY3YjIyOTFlNWIyMDBhYzhjN2MzYjkyNQogICAgICAgICAgICAgICAgZW1pdEV2ZW50KHNpZ25hdHVyZUhhc2gsIGZyb20sIHNwZW5kZXIsIGFtb3VudCkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBlbWl0RXZlbnQoc2lnbmF0dXJlSGFzaCwgaW5kZXhlZDEsIGluZGV4ZWQyLCBub25JbmRleGVkKSB7CiAgICAgICAgICAgICAgICBtc3RvcmUoMCwgbm9uSW5kZXhlZCkKICAgICAgICAgICAgICAgIGxvZzMoMCwgMHgyMCwgc2lnbmF0dXJlSGFzaCwgaW5kZXhlZDEsIGluZGV4ZWQyKQogICAgICAgICAgICB9CgogICAgICAgICAgICAvKiAtLS0tLS0tLSBzdG9yYWdlIGxheW91dCAtLS0tLS0tLS0tICovCiAgICAgICAgICAgIGZ1bmN0aW9uIG93bmVyUG9zKCkgLT4gcCB7IHAgOj0gMCB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5UG9zKCkgLT4gcCB7IHAgOj0gMSB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGFjY291bnRUb1N0b3JhZ2VPZmZzZXQoYWNjb3VudCkgLT4gb2Zmc2V0IHsKICAgICAgICAgICAgICAgIG9mZnNldCA6PSBhZGQoMHgxMDAwLCBhY2NvdW50KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGFsbG93YW5jZVN0b3JhZ2VPZmZzZXQoYWNjb3VudCwgc3BlbmRlcikgLT4gb2Zmc2V0IHsKICAgICAgICAgICAgICAgIG9mZnNldCA6PSBhY2NvdW50VG9TdG9yYWdlT2Zmc2V0KGFjY291bnQpCiAgICAgICAgICAgICAgICBtc3RvcmUoMCwgb2Zmc2V0KQogICAgICAgICAgICAgICAgbXN0b3JlKDB4MjAsIHNwZW5kZXIpCiAgICAgICAgICAgICAgICBvZmZzZXQgOj0ga2VjY2FrMjU2KDAsIDB4NDApCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qIC0tLS0tLS0tIHN0b3JhZ2UgYWNjZXNzIC0tLS0tLS0tLS0gKi8KICAgICAgICAgICAgZnVuY3Rpb24gb3duZXIoKSAtPiBvIHsKICAgICAgICAgICAgICAgIG8gOj0gc2xvYWQob3duZXJQb3MoKSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIC0+IHN1cHBseSB7CiAgICAgICAgICAgICAgICBzdXBwbHkgOj0gc2xvYWQodG90YWxTdXBwbHlQb3MoKSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBtaW50VG9rZW5zKGFtb3VudCkgewogICAgICAgICAgICAgICAgc3N0b3JlKHRvdGFsU3VwcGx5UG9zKCksIHNhZmVBZGQodG90YWxTdXBwbHkoKSwgYW1vdW50KSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWNjb3VudCkgLT4gYmFsIHsKICAgICAgICAgICAgICAgIGJhbCA6PSBzbG9hZChhY2NvdW50VG9TdG9yYWdlT2Zmc2V0KGFjY291bnQpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFRvQmFsYW5jZShhY2NvdW50LCBhbW91bnQpIHsKICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgOj0gYWNjb3VudFRvU3RvcmFnZU9mZnNldChhY2NvdW50KQogICAgICAgICAgICAgICAgc3N0b3JlKG9mZnNldCwgc2FmZUFkZChzbG9hZChvZmZzZXQpLCBhbW91bnQpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGRlZHVjdEZyb21CYWxhbmNlKGFjY291bnQsIGFtb3VudCkgewogICAgICAgICAgICAgICAgbGV0IG9mZnNldCA6PSBhY2NvdW50VG9TdG9yYWdlT2Zmc2V0KGFjY291bnQpCiAgICAgICAgICAgICAgICBsZXQgYmFsIDo9IHNsb2FkKG9mZnNldCkKICAgICAgICAgICAgICAgIHJlcXVpcmUobHRlKGFtb3VudCwgYmFsKSkKICAgICAgICAgICAgICAgIHNzdG9yZShvZmZzZXQsIHN1YihiYWwsIGFtb3VudCkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFjY291bnQsIHNwZW5kZXIpIC0+IGFtb3VudCB7CiAgICAgICAgICAgICAgICBhbW91bnQgOj0gc2xvYWQoYWxsb3dhbmNlU3RvcmFnZU9mZnNldChhY2NvdW50LCBzcGVuZGVyKSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzZXRBbGxvd2FuY2UoYWNjb3VudCwgc3BlbmRlciwgYW1vdW50KSB7CiAgICAgICAgICAgICAgICBzc3RvcmUoYWxsb3dhbmNlU3RvcmFnZU9mZnNldChhY2NvdW50LCBzcGVuZGVyKSwgYW1vdW50KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGRlY3JlYXNlQWxsb3dhbmNlQnkoYWNjb3VudCwgc3BlbmRlciwgYW1vdW50KSB7CiAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0IDo9IGFsbG93YW5jZVN0b3JhZ2VPZmZzZXQoYWNjb3VudCwgc3BlbmRlcikKICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QWxsb3dhbmNlIDo9IHNsb2FkKG9mZnNldCkKICAgICAgICAgICAgICAgIHJlcXVpcmUobHRlKGFtb3VudCwgY3VycmVudEFsbG93YW5jZSkpCiAgICAgICAgICAgICAgICBzc3RvcmUob2Zmc2V0LCBzdWIoY3VycmVudEFsbG93YW5jZSwgYW1vdW50KSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLyogLS0tLS0tLS0tLSB1dGlsaXR5IGZ1bmN0aW9ucyAtLS0tLS0tLS0tICovCiAgICAgICAgICAgIGZ1bmN0aW9uIGx0ZShhLCBiKSAtPiByIHsKICAgICAgICAgICAgICAgIHIgOj0gaXN6ZXJvKGd0KGEsIGIpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGd0ZShhLCBiKSAtPiByIHsKICAgICAgICAgICAgICAgIHIgOj0gaXN6ZXJvKGx0KGEsIGIpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHNhZmVBZGQoYSwgYikgLT4gciB7CiAgICAgICAgICAgICAgICByIDo9IGFkZChhLCBiKQogICAgICAgICAgICAgICAgaWYgb3IobHQociwgYSksIGx0KHIsIGIpKSB7IHJldmVydCgwLCAwKSB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gY2FsbGVkQnlPd25lcigpIC0+IGNibyB7CiAgICAgICAgICAgICAgICBjYm8gOj0gZXEob3duZXIoKSwgY2FsbGVyKCkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmV2ZXJ0SWZaZXJvQWRkcmVzcyhhZGRyKSB7CiAgICAgICAgICAgICAgICByZXF1aXJlKGFkZHIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmVxdWlyZShjb25kaXRpb24pIHsKICAgICAgICAgICAgICAgIGlmIGlzemVybyhjb25kaXRpb24pIHsgcmV2ZXJ0KDAsIDApIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ&lang=en&optimize=false&runs=200&evmVersion=null) –≤ Remix, –ø–æ–≤—ã–∑—ã–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ—É–Ω—Ü–∏–∏ –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ –∫–∞–∫ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤–æ—Ç —Ç–∞–∫ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `mint(0x5B38Da6a701c568545dCfcB03FcB875f56beddC4, 42)`:

```
0x40c10f190000000000000000000000005b38da6a701c568545dcfcb03fcb875f56beddc4000000000000000000000000000000000000000000000000000000000000002a
```

_–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ!_ –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç `.yul`, –Ω–µ –∑–∞–±—É–¥—å—Ç–µ —Å–∫–∞–∑–∞—Ç—å –æ–± —ç—Ç–æ–º –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å solidity.

## –í–º–µ—Å—Ç–æ –∑–∞–∫–ª—é—á–µ–Ω–∏—è

–ò–∑—É—á–µ–Ω–∏–µ Yul –ø–æ–º–æ–∂–µ—Ç –∑–∞–∫—Ä–µ–ø–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ä–∞–±–æ—Ç–æ–π EVM, –≥–ª—É–±–∂–µ –ø–æ–Ω—è—Ç—å —Ç–µ–º—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –∏ –Ω–∞—É—á–∏—Ç—å—Å—è —Ä–∞–∑–±–∏—Ä–∞—Ç—å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–æ –≤—Å—Ç–∞–≤–∫–∞–º–∏ –Ω–∞ inline assembly, –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫–∏—Ö –∫–∞–∫ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ [Solady](https://github.com/Vectorized/solady) –∏–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –ù–§–¢ - [ERC721A](https://github.com/chiru-labs/ERC721A/blob/main/contracts/ERC721A.sol).

–¢–∞–∫–∂–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –ø—Ä–æ—Ü–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:
"Inline assembly - —ç—Ç–æ —Å–ø–æ—Å–æ–± –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–æ–π Ethereum –Ω–∞ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Solidity –≤ Yul –Ω–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–∞–∂–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–∏—Å–∞—Ç—å –∫–æ–¥ –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Yul —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏ –∫–æ–≥–¥–∞ –≤—ã —Ç–æ—á–Ω–æ —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —ç—Ç–æ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ."

## –°—Å—ã–ª–∫–∏:

-   [Docs: Yul](https://docs.soliditylang.org/en/latest/yul.html)
-   [Docs: Layout of memory](https://docs.soliditylang.org/en/latest/internals/layout_in_memory.html)
-   [Playlist: Mastering Solidity Assembly (YUL)](https://youtube.com/playlist?list=PL5hld-skrdFrxGUmmEbG1LBvYVyTE9M62&si=jwXH_rtSvoNfrDPg)
-   [Article: Inline Assembly in Solidity: A Practical Starter‚Äôs Guide](https://medium.com/lumos-labs/inline-assembly-in-solidity-34d3ba2cfa7a)
-   [Video: The Dark Arts of Yul](https://www.youtube.com/watch?v=ew3pfnb2_V8)
