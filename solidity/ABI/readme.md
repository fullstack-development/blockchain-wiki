# ABI

**–ê–≤—Ç–æ—Ä:** [–ü–∞–≤–µ–ª –ù–∞–π–¥–∞–Ω–æ–≤](https://github.com/PavelNaydanov) üïµÔ∏è‚Äç‚ôÇÔ∏è

Contract Application Binary Interface (ABI) - —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ Ethereum. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –∫–∞–∫ –∏–∑–≤–Ω–µ –±–ª–æ–∫—á–µ–π–Ω–∞, —Ç–∞–∫ –∏ –≤–Ω—É—Ç—Ä–∏ —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏.

–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ ABI, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–Ω–∏–º–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∞—Å–ø–µ–∫—Ç—ã solidity —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
 - **EVM.** –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞, –¥—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –≤ —Å–µ—Ç–∏ Ethereum. –¢–∞–∫–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –Ω–∞–∑—ã–≤–∞—é—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏
 - **–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç.** –ö–æ–¥ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Å–µ—Ç–∏ Ethereum
 - **Machine-Readable Code.** EVM –Ω–µ –º–æ–∂–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–º —è–∑—ã–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. Solidity –Ω–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Ç–æ–º —á–∏—Å–ª–µ. –õ—é–±–æ–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –≤ –º–∞—à–∏–Ω–æ—á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥ –∏–ª–∏ **–±–∞–π—Ç-–∫–æ–¥**, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –¥–≤–æ–∏—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∫–æ–¥ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —Å—Ç–∞–ª –ø–æ–Ω—è—Ç–µ–Ω EVM –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏—è –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≥–æ –∫–æ–¥–∞ –≤ –±–∞–π—Ç-–∫–æ–¥.
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –º—ã –ø–æ–ª—É—á–∞–µ–º –¥–≤–∞ –ø—Ä–æ–¥—É–∫—Ç–∞:

- **Machine-Readable Code** –∏–ª–∏ –±–∞–π—Ç-–∫–æ–¥. –ú—ã –≥–æ–≤–æ—Ä–∏–ª–∏ –æ –Ω–µ–º –≤—ã—à–µ.
- –î–≤–æ–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è(**ABI**). –û–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –º—ã –ø–æ–Ω–∏–º–∞–ª–∏ —á—Ç–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ –≤ –±–∞–π—Ç-–∫–æ–¥–µ –∏ –º–æ–≥–ª–∏ —Å –Ω–∏–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å.

## –ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ?

–ú—ã –∑–Ω–∞–µ–º, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–∏–º–µ—Ä –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ç–∏–ø–æ–≤:
  - bytes
  - string
  - T[] –¥–ª—è –ª—é–±–æ–≥–æ T(–º–∞—Å—Å–∏–≤ —Å –ª—é–±—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö)

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã —è–≤–ª—è—é—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏(uint, address, bool –∏ —Ç.–¥.)

–î–∞–Ω–Ω—ã–µ –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∏—Ö —Ç–∏–ø–æ–º, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ —ç—Ç–æ–π [—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏](https://docs.soliditylang.org/en/v0.8.19/abi-spec.html). –≠—Ç–æ —Å–ª–æ–∂–Ω–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, –Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —Ç–µ–º –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.

_–í–∞–∂–Ω–æ!_ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø—ã –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø—ã –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ. –î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ç–∏–ø–æ–≤ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è "—Å—Å—ã–ª–∫–∞" –∏–ª–∏ "—Å–¥–≤–∏–≥", –∫–æ—Ç–æ—Ä–∞—è –æ–∑–Ω–∞—á–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤. –í—ã–ø–æ–ª–Ω—è—è —Å–º–µ—â–µ–Ω–∏–µ –Ω–∞ —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö.

### –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π

–î–ª—è –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–Ω–∞—á–∞–ª–∞ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è —Å–µ–ª–µ–∫—Ç–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏(function selector). –≠—Ç–æ –ø–µ—Ä–≤—ã–µ —á–µ—Ç—ã—Ä–µ –±–∞–π—Ç–∞ —Ö—ç—à–∞ Keccak-256 —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏.

```solidity
  bytes4(keccak256("function signature")
```

–°–∏–≥–Ω–∞—Ç—É—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤. –¢–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –æ–¥–Ω–æ–π –∑–∞–ø—è—Ç–æ–π ‚Äî –ø—Ä–æ–±–µ–ª—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

–ü—Ä–∏–º–µ—Ä –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ ```sum()```:
  ```solidity
    sum(uint256,uint256) => cad0899b
  ```
–ù–∞—á–∏–Ω–∞—è —Å –ø—è—Ç–æ–≥–æ –±–∞–π—Ç–∞ –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏:
- –µ—Å–ª–∏ —Ç–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π, —Ç–æ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è —Å—Ä–∞–∑—É –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ(–≤ 32-—Ö –±–∞–π—Ç–∞—Ö)
- –µ—Å–ª–∏ —Ç–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π, —Ç–æ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å(—Å–º–µ—â–µ–Ω–∏–µ –∏–ª–∏ offset) –Ω–∞ –Ω–∞—á–∞–ª–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—á–∞–ª–∞ –±–ª–æ–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –ê —É–∂–µ –ø–æ —Å–º–µ—â–µ–Ω–∏—é –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å–∞–º–æ –∑–Ω–∞—á–µ–Ω–∏–µ.

### –ó–∞–∫—Ä–µ–ø–ª—è–µ–º –ø—Ä–∏–º–µ—Ä–æ–º

–í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±—ã–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ [–ø—Ä–∏–º–µ—Ä–æ–≤](https://docs.soliditylang.org/en/v0.8.19/abi-spec.html#examples). –ù–∏–∂–µ —Ä–∞–∑–±–µ—Ä–µ–º –ø–æ—Ö–æ–∂–∏–π –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏.

–ë—É–¥–µ–º –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é ```bar(uint256,uint256[])```. –í —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–¥–∞–Ω—ã –∞—Ä–≥—É–º–µ–Ω—Ç—ã ```42``` –∏ –º–∞—Å—Å–∏–≤ ```[21, 22]```. –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

1. –ö–æ–¥–∏—Ä—É–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä —Ñ—É–Ω–∫—Ü–∏–∏, –∫–∞–∫
  ```solidity
    bytes4(keccak256("bar(uint256,uint256[])") => ae2c7970
  ```

  –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø–æ–ª—É—á–∞–µ–º:

  ```solidity
    0xae2c7970
  ```

2. –ö–æ–¥–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç ```42```. –¢–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞ uint256 —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º. –ü–æ—ç—Ç–æ–º—É –∫–æ–¥–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ ```42``` –Ω–∞ –º–µ—Å—Ç–µ. ```42``` –≤ hex —Ä–∞–≤–Ω–æ ```2a```. ```2a``` –¥–æ–ø–æ–ª–Ω—è–µ–º –¥–æ 32-x –±–∞–π—Ç–Ω–æ–≥–æ —Å–ª–æ–≤–∞.
  ```solidity
    000000000000000000000000000000000000000000000000000000000000002a
  ```

  –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø–æ–ª—É—á–∞–µ–º:

  ```solidity
    0xae2c7970 + 000000000000000000000000000000000000000000000000000000000000002a
  ```
3. –ö–æ–¥–∏—Ä—É–µ–º –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç ```[21, 22]```. –¢–∏–ø –∞—Ä–≥—É–º–µ–Ω—Ç–∞ ```uint256[]``` —è–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º. –ü–æ—ç—Ç–æ–º—É –∫–æ–¥–∏—Ä—É–µ–º —Å–Ω–∞—á–∞–ª–∞ —Å–¥–≤–∏–≥(—Å—Å—ã–ª–∫—É) –Ω–∞ –º–µ—Å—Ç–æ, –≥–¥–µ –±—É–¥–µ—Ç –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞. –ü–æ–º–Ω–∏–º, —á—Ç–æ —Å—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –æ—Ç –Ω–∞—á–∞–ª–∞ –±–ª–æ–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ ```000000000000000000000000000000000000000000000000000000000000002a => 32 –±–∞–π—Ç–∞ + 32 –±–∞–π—Ç–∞(–∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥—É—â–µ–≥–æ —Å–¥–≤–∏–≥–∞)```. –ü–æ–ª—É—á–∞–µ—Ç—Å—è –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ –±—É–¥–µ—Ç –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ—Å–ª–µ 64 –±–∞–π—Ç. –ö–æ–¥–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ ```64```. –í hex —ç—Ç–æ —Ä–∞–≤–Ω–æ ```40```. –ü–æ —Ç—Ä–∞–¥–∏—Ü–∏–∏ –¥–æ–ø–æ–ª–Ω—è–µ–º –¥–æ 32-—Ö –±–∞–π—Ç.

```solidity
  0000000000000000000000000000000000000000000000000000000000000040
```

–ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø–æ–ª—É—á–∞–µ–º:
  ```solidity
    0xae2c7970 + 000000000000000000000000000000000000000000000000000000000000002a + 0000000000000000000000000000000000000000000000000000000000000040
  ```
4. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–ª–∏ —Å–¥–≤–∏–≥, –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º—É –¥–ª–∏–Ω—É –º–∞—Å—Å–∏–≤–∞. –ß—Ç–æ–±—ã –∑–Ω–∞—Ç—å, –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å—á–∏—Ç—ã–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –¥–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ —Ä–∞–≤–Ω–∞ ```2```. –ö–æ–¥–∏—Ä—É–µ–º:
  ```solidity
    0000000000000000000000000000000000000000000000000000000000000002
  ```

  –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø–æ–ª—É—á–∞–µ–º:
  ```solidity
    0xae2c7970 + 000000000000000000000000000000000000000000000000000000000000002a + 0000000000000000000000000000000000000000000000000000000000000040 + 0000000000000000000000000000000000000000000000000000000000000002
  ```
5. –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ ```21```(15 –≤ hex) –∏ ```22```(16 hex). –î–æ–ø–æ–ª–Ω—è–µ–º —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ 32-x –±–∞–π—Ç–Ω—ã—Ö —Å–ª–æ–≤
  ```solidity
    21 => 0000000000000000000000000000000000000000000000000000000000000015
    22 => 0000000000000000000000000000000000000000000000000000000000000016
  ```

  –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø–æ–ª—É—á–∞–µ–º:
  ```solidity
    0xae2c7970 + 000000000000000000000000000000000000000000000000000000000000002a + 00000000000000000000000000000000000000000000000000000000000000040 + 0000000000000000000000000000000000000000000000000000000000000002 + 0000000000000000000000000000000000000000000000000000000000000015 + 0000000000000000000000000000000000000000000000000000000000000016
  ```

6. –î–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º

  ```
  Encoded function selector:
  0xae2c7970

  Arguments block:
  0 - 000000000000000000000000000000000000000000000000000000000000002a - encoded 42 value
  1 - 0000000000000000000000000000000000000000000000000000000000000040 - encoded offset for [21, 22]
  2 - 0000000000000000000000000000000000000000000000000000000000000002 - number of items in the array [21, 22]
  3 - 0000000000000000000000000000000000000000000000000000000000000015 - encoded 21 value(the first array item)
  4 - 0000000000000000000000000000000000000000000000000000000000000016 - encoded 22 value(the second array item)
  ```

  –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º—ã –ø–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ö—ç—à:
  ```solidity
    0xae2c7970000000000000000000000000000000000000000000000000000000000000002a0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000150000000000000000000000000000000000000000000000000000000000000016
  ```

## –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç ABI?

–ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ ABI –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –≤–∏–¥–µ **json —Ñ–∞–π–ª–∞**. –ü—Ä–∏–º–µ—Ä ABI ERC20 —Ç–æ–∫–µ–Ω–∞ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [—Ç—É—Ç](./erc20ABI.json).

–§–æ—Ä–º–∞—Ç JSON –¥–ª—è ABI –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π, —Å–æ–±—ã—Ç–∏–π –∏ –æ—à–∏–±–æ–∫.

–û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–±—ä–µ–∫—Ç JSON —Å –ø–æ–ª—è–º–∏:
- **type**: —Ç–∏–ø —Ñ—É–Ω–∫—Ü–∏–∏("function", "constructor", "receive","fallback");
- **name**: –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏;
- **inputs**: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –≤—Ö–æ–¥(–∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏), –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç: *name*(–∏–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞), *type* –∏ *components*(–¥–ª—è –∫–æ—Ä—Ç–µ–∂–µ–π)
- **outputs**: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –≤—ã—Ö–æ–¥(–≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è), –ø–æ—Ö–æ–∂ –Ω–∞ **inputs**.
- **stateMutability**: pure, view, nonpayable –∏ payable.

_–í–∞–∂–Ω–æ!_ –¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –∑–Ω–∞—á–∏—Ç –∏ –Ω–µ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è. –û–¥–Ω–∞–∫–æ ABI —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã—Ö–æ–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö –≤ –ø–æ–ª–µ **outputs**.

## Encoding –∏ decoding

–î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–π—Ç-–∫–æ–¥–æ–º —Å–º–∞—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –¥–∞–Ω–Ω—ã–µ –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –∏ –¥–µ–∫–æ–¥–∏—Ä—É—é—Ç—Å—è. –≠—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å.

–í solidity —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö:
- ```solidity
  abi.decode(bytes memory encodedData, (...)) returns (...)
  ```
- ```solidity
  abi.encode(...) returns (bytes memory)
  ```

- ```solidity
  abi.encodePacked(...) returns (bytes memory)
  ```

- ```solidity
  abi.encodeWithSelector(bytes4 selector, ...) returns (bytes memory)
  ```
- ```solidity
  abi.encodeWithSignature(string memory signature, ...) returns (bytes memory)
  ```

- ```solidity
  abi.encodeCall(function functionPointer, (...)) returns (bytes memory)
  ```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ [—Ç—É—Ç](https://docs.soliditylang.org/en/v0.8.19/units-and-global-variables.html#abi-encoding-and-decoding-functions)

–ù–µ–ø–ª–æ—Ö–∞—è [—Å—Ç–∞—Ç—å—è](https://coinsbench.com/solidity-abi-encode-and-decode-b339eb52c5b5), –∫–æ—Ç–æ—Ä–∞—è –¥–∞–µ—Ç —á—É—Ç—å –±–æ–ª—å—à–µ –ø–æ—è—Å–Ω–µ–Ω–∏–π –¥–ª—è —ç—Ç–∏—Ö –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

## Encode vs encodePacked
```solidity
abi.encode();
```

–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, —Å–æ–≥–ª–∞—Å–Ω–æ –≤—ã—à–µ –æ–ø–∏—Å–∞–Ω–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

```solidity
abi.encodePacked();
```

–≠—Ç–æ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π, —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –∫–æ–¥–∏—Ä–æ–≤–∫–∏. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ó–Ω–∞—á–µ–Ω–∏—è, —Ç–∏–ø—ã –∫–æ—Ç–æ—Ä—ã—Ö –∫–æ—Ä–æ—á–µ 32 –±–∞–π—Ç–æ–≤ –Ω–µ –¥–æ–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω—É–ª—è–º–∏ –∏ –Ω–µ –¥–æ–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–Ω–∞–∫–∞–º–∏
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø—ã –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ –∏ –±–µ–∑ –¥–ª–∏–Ω—ã.
- –≠–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞ –¥–æ–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω—É–ª—è–º–∏, –Ω–æ –≤—Å–µ –µ—â–µ –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ
- –°—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è

–ü–æ–¥—Ä–æ–±–Ω–µ–µ [—Ç—É—Ç](https://docs.soliditylang.org/en/v0.8.19/abi-spec.html#non-standard-packed-mode).

_–í–∞–∂–Ω–æ!_ –ï—Å–ª–∏ –¥–ª—è ```keccak256(abi.encodePacked(a, b))```, –≥–¥–µ ```a``` –∏ ```b``` –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø—ã, —Ç–æ –ª–µ–≥–∫–æ –ø–æ–ª—É—á–∏—Ç—å **–∫–æ–ª–ª–∏–∑–∏—é —Ö–µ—à–µ–π**. –ë–æ–ª–µ–µ —Ç–æ–≥–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ —Å–ª–µ–¥—É—é—â–µ–µ ```abi.encodePacked("a", "bc") == abi.encodePacked("ab", "c")```. –î–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Ç–∏–ø–∞–º–∏ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π ```abi.encode()```.

–≠—Ç–∏ –∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª–µ–∑–Ω—ã–µ –Ω–∞—Ä–∞–±–æ—Ç–∫–∏ –ø–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–º–æ—â–∏ abi –º–æ–∂–Ω–æ –æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤ remix —Å –Ω–∞—à–∏–º –∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º [–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º](contracts/Encoding.sol).

## Links

1. [Solidity ABI docs](https://docs.soliditylang.org/en/v0.8.19/abi-spec.html#json)
2. [ABI Encoding and Decoding Functions](https://docs.soliditylang.org/en/v0.8.19/units-and-global-variables.html#abi-encoding-and-decoding-functions)
3. [Everything You Need To Know About Solidity‚Äôs Application Binary Interface (ABI)](https://101blockchains.com/solidity-abi/)
4. [ABI encode and decode using solidity](https://medium.com/coinmonks/abi-encode-and-decode-using-solidity-2d372a03e110)
5. [Solidity ABI Encode and Decode](https://coinsbench.com/solidity-abi-encode-and-decode-b339eb52c5b5)