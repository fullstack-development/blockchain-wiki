# –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º LayerZero v2. OFT-—Ç–æ–∫–µ–Ω  

**–ê–≤—Ç–æ—Ä:** [–†–æ–º–∞–Ω –Ø—Ä–ª—ã–∫–æ–≤](https://github.com/rlkvrv) üßê  

–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è –ø–æ–∫–∞–∂—É, –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ–º–Ω–∏—á–µ–π–Ω-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –±–∞–∑–µ LayerZero v2. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –º—ã –Ω–∞–ø–∏—à–µ–º OFT (Omnichain Fungible Token) —Ç–æ–∫–µ–Ω, —Ä–∞–∑–±–µ—Ä–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞–∫–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ–±—Å—É–¥–∏–º –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã.  

–û–±–∑–æ—Ä –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏ –≤–∞–π—Ç–ø–µ–π–ø–µ—Ä–∞ —è —Å–¥–µ–ª–∞–ª –≤ [–æ—Ç–¥–µ–ª—å–Ω–æ–π](../architecture/README.md) —Å—Ç–∞—Ç—å–µ (—Ç–∞–º –∂–µ –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –æ–º–Ω–∏—á–µ–π–Ω-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π). –ó–¥–µ—Å—å –º—ã —Å—Ñ–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –∫–æ–¥–µ.  

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:* —É LayerZero —Ö–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –ø–æ—ç—Ç–æ–º—É, —á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è, —è –±—É–¥—É –∏–Ω–æ–≥–¥–∞ –æ—Ç—Å—ã–ª–∞—Ç—å —á–∏—Ç–∞—Ç–µ–ª—è –∫ –Ω–µ–π. –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ –∏ –Ω–µ —Å–∞–º—ã–µ –æ—á–µ–≤–∏–¥–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã.  

–ó–∞–¥–∞—á–∞ —Å—Ç–∞—Ç—å–∏ ‚Äî –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å –≤–∞—Å —Å –∫–ª—é—á–µ–≤—ã–º–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –∏ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π OApp, —á—Ç–æ–±—ã –ø—Ä–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –≤—Å–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å LayerZero –∏ –ø–æ–Ω—è—Ç—å, –Ω–∞ —á—Ç–æ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ.  

–°—Ç–∞—Ç—å—è –ø–æ–¥–æ–π–¥–µ—Ç —Ç–µ–º, –∫—Ç–æ —Ö–æ—á–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å OFT-—Ç–æ–∫–µ–Ω–∞–º–∏ –∏, –≤–æ–∑–º–æ–∂–Ω–æ, —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π. –í–æ –≤—Ç–æ—Ä–æ–º —Å–ª—É—á–∞–µ —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏–∑ —Å—Ç–∞—Ç—å–∏ ‚Äî –≤ –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –≤–µ—Å–µ–ª–æ.  

–¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è:
- **–ò—Å—Ö–æ–¥–Ω–∞—è —Å–µ—Ç—å** - –±–ª–æ–∫—á–µ–π–Ω, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –≤ –¥—Ä—É–≥—É—é —Å–µ—Ç—å.  
- **–°–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è** - –±–ª–æ–∫—á–µ–π–Ω, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏.
- **OApp** - Omnichain Application.
- **OFT** -  Omnichain Fungible Token.
- **EID** - Endpoint ID.

## –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ OApp

–ß—Ç–æ–±—ã –Ω–µ –∑–∞—Å–∫—É—á–∞—Ç—å, —Å—Ä–∞–∑—É –ø–µ—Ä–µ–π–¥–µ–º –∫ –ø—Ä–∞–∫—Ç–∏–∫–µ –∏ –æ—Ç–ø—Ä–∞–≤–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –º–µ–∂–¥—É OApp-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–º–∏ –≤ –¥–≤—É—Ö –±–ª–æ–∫—á–µ–π–Ω–∞—Ö (–¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å EVM-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å–µ—Ç–∏). –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –±–∞–∑–æ–≤—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —Ä–∞–±–æ—Ç—ã –æ–º–Ω–∏—á–µ–π–Ω-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –≤—Å–µ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–ª–æ–∂–Ω—ã–µ –≤–µ—â–∏ –±—É–¥—É—Ç –¥–∞–≤–∞—Ç—å—Å—è –ª–µ–≥—á–µ, –∞ –≤ –≥–æ–ª–æ–≤–µ —Å—Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã.  

–í [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.layerzero.network/v2/developers/evm/getting-started#example-omnichain-application) –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥–≤–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞: `SourceOApp` –∏ `DestinationOApp`, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –±–ª–æ–∫—á–µ–π–Ω–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è Remix (—Å–º. —Ä–∞–∑–¥–µ–ª *Example Omnichain Application*). –≠—Ç–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —É–∂–µ –Ω–∞–ø–∏—Å–∞–Ω—ã ‚Äî –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏—Ö –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å.  

–≠—Ç–æ –¥–≤–∞ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. `Source` –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç [OAppSender](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oapp-evm/contracts/oapp/OAppSender.sol), –∞ `Destination` –æ—Ç [OAppReceiver](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oapp-evm/contracts/oapp/OAppReceiver.sol).  

–ù–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî –ø–µ—Ä–µ—Å–ª–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫—É) –∏–∑ –æ–¥–Ω–æ–≥–æ –±–ª–æ–∫—á–µ–π–Ω–∞ –≤ –¥—Ä—É–≥–æ–π.

–ß—Ç–æ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è? –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –Ω–µ —Ç–∞–∫ –º–Ω–æ–≥–æ:  

1. –î–≤–∞ OApp-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—ã–µ –≤ —Ä–∞–∑–Ω—ã—Ö –±–ª–æ–∫—á–µ–π–Ω–∞—Ö.  
2. –ê–¥—Ä–µ—Å–∞ `Endpoint` –≤ –æ–±–µ–∏—Ö —Å–µ—Ç—è—Ö, –∞ —Ç–∞–∫–∂–µ –∏—Ö `EID` (Endpoint ID). –ò—Ö –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [—ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ](https://docs.layerzero.network/v2/developers/evm/technical-reference/deployed-contracts).  

![contract-address-table](./img/contract-address-table.png)  
*–¢–∞–±–ª–∏—Ü–∞ —Å –∞–¥—Ä–µ—Å–∞–º–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏ `EID`. –ò—Å—Ç–æ—á–Ω–∏–∫: LayerZero Chains.*  

### Source OApp  

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∫–æ–¥ `SourceOApp` (–≤ Remix) ‚Äî –æ–Ω –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π. –ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏:  

- `SourceOApp::quote` ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ —Å–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ–±—ã —Ö–≤–∞—Ç–∏–ª–æ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ —Å—Ç–µ–∫–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ü–∞—Ä–∞–º–µ—Ç—Ä `_payInLzToken` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –æ–ø–ª–∞—Ç–∞ –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è *–Ω–µ* –≤ –Ω–∞—Ç–∏–≤–Ω–æ–º —Ç–æ–∫–µ–Ω–µ —Å–µ—Ç–∏.  

```solidity
function quote(
    uint32 _dstEid,
    string memory _message,
    bool _payInLzToken
) public view returns (MessagingFee memory fee) {
    bytes memory payload = abi.encode(_message);
    fee = _quote(_dstEid, payload, _options, _payInLzToken);
}
```

- `SourceOApp::send` ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã –≥–∞–∑–∞ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.  

```solidity
function send(
    uint32 _dstEid,
    string memory _message
) external payable {
    // –ö–æ–¥–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º _lzSend.
    bytes memory _encodedMessage = abi.encode(_message);
    _lzSend(
        _dstEid,
        _encodedMessage,
        _options,
        // –ö–æ–º–∏—Å—Å–∏—è –≤ –Ω–∞—Ç–∏–≤–Ω–æ–º —Ç–æ–∫–µ–Ω–µ (–∏–ª–∏ —Ç–æ–∫–µ–Ω–µ ZRO).
        MessagingFee(msg.value, 0),
        // –ê–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏ (–Ω–∞ —Å–ª—É—á–∞–π –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏).
        payable(msg.sender) 
    );
    emit MessageSent(_message, _dstEid);
}
```

### –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ OApp  

–ê–¥—Ä–µ—Å `Endpoint` –∑–∞–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `SourceOApp::setPeer(uint32 eid, bytes32 peer)` –≤ –æ–±–æ–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö (–≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏ –∏ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è).  

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `OAppCore`, –∫–æ—Ç–æ—Ä–∞—è —Å–≤—è–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–µ–∂–¥—É —Å–æ–±–æ–π.  

*–í–∞–∂–Ω–æ!* `SourceOApp::setPeer` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞–¥—Ä–µ—Å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `bytes32`. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —Ñ–æ—Ä–º–∞—Ç—ã –∞–¥—Ä–µ—Å–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö –±–ª–æ–∫—á–µ–π–Ω–∞—Ö –º–æ–≥—É—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ EVM —ç—Ç–æ 20 –±–∞–π—Ç, –∞ –≤ Solana ‚Äî 32 –±–∞–π—Ç–∞).  

![remix-set-peer](./img/remix-set-peer.png)  

–ß—Ç–æ–±—ã –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ EVM-–∞–¥—Ä–µ—Å –≤ `bytes32`, –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–µ–π:  

```solidity
function addressToBytes32(address _addr) public pure returns (bytes32) {
    return bytes32(uint256(uint160(_addr)));
}
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `peer` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤–µ—Ä–Ω–æ.  

![remix-get-peer](./img/remix-get-peer.png)  

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:* `EID` –Ω–µ–æ–±—Ö–æ–¥–∏–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ —É –≤—Å–µ—Ö –±–ª–æ–∫—á–µ–π–Ω–æ–≤ –µ—Å—Ç—å `chain ID`.  

### Destination OApp  

–í OApp-—Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –æ–¥–Ω–∞ –∫–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚Äî `_lzReceive`. –û–Ω–∞ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–∞–∫, —á—Ç–æ–±—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –æ–±—ã—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞.  

```solidity
function _lzReceive(
    Origin calldata _origin,
    bytes32 /*_guid*/,
    bytes calldata message,
    address /*executor*/,  // –ê–¥—Ä–µ—Å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è, —É–∫–∞–∑–∞–Ω–Ω—ã–π –¥–ª—è OApp.
    bytes calldata /*_extraData*/  // –õ—é–±—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –æ–ø—Ü–∏–∏.
) internal override {
    // –î–µ–∫–æ–¥–∏—Ä—É–µ–º –ø–æ–ª–µ–∑–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ.
    data = abi.decode(message, (string));
    emit MessageReceived(data, _origin.srcEid, _origin.sender, _origin.nonce);
}
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å  

–¢–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω–∏–º –≤—Å–µ —à–∞–≥–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –î–ª—è –±–æ–ª—å—à–µ–≥–æ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –±–ª–æ–∫—á–µ–π–Ω—ã –∏–∑ [—ç—Ç–æ–≥–æ —Å–ø–∏—Å–∫–∞](https://docs.layerzero.network/v2/developers/evm/technical-reference/deployed-contracts) –≤–º–µ—Å—Ç–æ —Ç–µ—Ö, —á—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.  

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:* –∫–æ–ø–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è. –í Remix, –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥—É—é —Å–µ—Ç—å, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è (–¥–∞–∂–µ –µ—Å–ª–∏ –≤–∫–ª–∞–¥–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π).  

–ù–∞–ø–æ–º–Ω—é: —á—Ç–æ–±—ã –≤ Remix –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º —É–∂–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≤–æ –≤–∫–ª–∞–¥–∫–µ **Contract** –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –∞–¥—Ä–µ—Å –≤ **At Address**.  

![remix-at-address](./img/remix-at-address.png)  

–ü–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π:
1. –í—ã–±–∏—Ä–∞–µ–º –¥–≤–∞ –±–ª–æ–∫—á–µ–π–Ω–∞. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —É –Ω–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –æ–ø–ª–∞—Ç—ã –≥–∞–∑–∞.  
2. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é LayerZero ‚Üí [Chains](https://docs.layerzero.network/v2/developers/evm/technical-reference/deployed-contracts) –∏ –Ω–∞—Ö–æ–¥–∏–º –∞–¥—Ä–µ—Å–∞ `Endpoint` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ `EID`. –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Ö ‚Äî –æ–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–∞–ª—å—à–µ.  
3. –î–µ–ø–ª–æ–∏–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç `SourceOApp` –≤ **–∏—Å—Ö–æ–¥–Ω—É—é —Å–µ—Ç—å**. –î–ª—è —ç—Ç–æ–≥–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–¥—Ä–µ—Å `Endpoint` –≤ —ç—Ç–æ–π —Å–µ—Ç–∏.  
4. –î–µ–ø–ª–æ–∏–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç `DestinationOApp` –≤ **—Å–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è**, —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π `Endpoint`. –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–¥—Ä–µ—Å.  
5. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—É—é —Å–µ—Ç—å, –ø–µ—Ä–µ–≤–æ–¥–∏–º –∞–¥—Ä–µ—Å–∞ –≤ —Ñ–æ—Ä–º–∞—Ç `bytes32`. –î–ª—è —ç—Ç–æ–≥–æ –≤—ã–∑—ã–≤–∞–µ–º `Source::addressToBytes32` (–∫–∞–∫ –¥–ª—è OApp –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏, —Ç–∞–∫ –∏ –¥–ª—è OApp –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è).  
6. –°–≤—è–∑—ã–≤–∞–µ–º OApps —á–µ—Ä–µ–∑ `setPeer`, –≤—ã–ø–æ–ª–Ω–∏–≤ –¥–≤–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:  
   - `Source::setPeer(uint32 eid, bytes32 peer)`  
   - `Destination::setPeer(uint32 eid, bytes32 peer)`  
7. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º, —Å–∫–æ–ª—å–∫–æ –Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –æ–ø–ª–∞—Ç—ã –≥–∞–∑–∞ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è. –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º `Source::quote(uint32 dstEid, string message, bool payLzToken)`. –ü–∞—Ä–∞–º–µ—Ç—Ä `payLzToken` –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `false`.  
   
   ![remix-quote](./img/remix-quote.png)  

8. –í—Å—Ç–∞–≤–ª—è–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π `fee` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Wei) –≤ –ø–æ–ª–µ **Value** –≤ Remix –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `Source::send(uint32 dstEid, string message)`.  
   
   ![remix-value](./img/remix-value.png)  
   ![remix-send](./img/remix-send.png)  

9. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –Ω–∞ [testnet.layerzeroscan.com](https://testnet.layerzeroscan.com/). –ò—â–µ–º –ø–æ —Ö–µ—à—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–µ–≥–æ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –≤ –ª–æ–≥–∞—Ö Remix).  
   
   ![remix-tx-hash](./img/remix-tx-hash.png)  
   ![layerzero-scan-tx](./img/layerzero-scan-tx.png)  

10. –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ (—Å—Ç–∞—Ç—É—Å **Delivered**), –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `Destination::data`.  
   
    ![remix-data](./img/remix-data.png)  

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:* –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –Ω–µ–º–Ω–æ–≥–æ ETH –≤ **Arbitrum** –∏ POL –≤ **Polygon**, –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–º–∏ –º–Ω–æ–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –º–µ–π–Ω–Ω–µ—Ç–µ. –≠—Ç–æ –æ–±–æ–π–¥–µ—Ç—Å—è –≤—Å–µ–≥–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ü–µ–Ω—Ç–æ–≤, –Ω–æ –∏–Ω–æ–≥–¥–∞ –ø—Ä–æ—â–µ –∑–∞–ø–ª–∞—Ç–∏—Ç—å, —á–µ–º –∏—Å–∫–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã.  

–î–ª—è —ç—Ç–æ–≥–æ:  

- –û—Ç–∫—Ä–æ–π—Ç–µ Remix.  
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –Ω–∏–∂–µ –∞–¥—Ä–µ—Å–∞–º (—á–µ—Ä–µ–∑ **At Address**).  
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.  

**–í–∞–∂–Ω–æ:** —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ - **Arbitrum ‚Üí Polygon**.  

–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã:
- **Arbitrum:**  
  - `SourceOApp`: `0x6b5ebc0bdb2572533f1cbe09026663a524421594`  
  - `EID`: `30110`  
- **Polygon:**  
  - `DestinationOApp`: `0x0c02cb84eef5f3ea61be9dfec7f884dffc1fa6c0`  
  - `EID`: `30109`  

–ü—Ä–∏–º–µ—Ä—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:  
- [–ü—Ä–∏–º–µ—Ä 1](https://layerzeroscan.com/tx/0x55615e9ee9be40614756fed61af5e5ad35b4e63cceefce4e3d49a6ccf0cf9f95)  
- [–ü—Ä–∏–º–µ—Ä 2](https://layerzeroscan.com/tx/0x9124aa03fefd50d7d2345c941e7e9e26c41d1b98023326548ce5346c0fa22257)  

–ö–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—à—å –≤ –º–µ–π–Ω–Ω–µ—Ç–µ, –≤–æ–ª–µ–π-–Ω–µ–≤–æ–ª–µ–π –Ω–∞—á–∏–Ω–∞–µ—à—å –≤—Å–µ –¥–µ–ª–∞—Ç—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ –∏ –≥–ª—É–±–∂–µ –≤–Ω–∏–∫–∞–µ—à—å –≤ –¥–µ—Ç–∞–ª–∏. –•–æ—Ç—è –¥–∞–∂–µ —ç—Ç–æ –Ω–µ —Å–ø–∞—Å–∞–µ—Ç –æ—Ç –æ—à–∏–±–æ–∫ üòÅ. –Ø, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –Ω–∞–∫–æ—Å—è—á–∏–ª ‚Äî —É–∫–∞–∑—ã–≤–∞–ª –Ω–µ–≤–µ—Ä–Ω—ã–π `EID` –∏ –∑–∞–±—ã–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã. –¢–∞–∫ —á—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å!  

## OFT-—Ç–æ–∫–µ–Ω  

–í –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã —Å–æ–∑–¥–∞–ª–∏ –±–∞–∑–æ–≤–æ–µ –æ–º–Ω–∏—á–µ–π–Ω-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å `DestinationOApp` –≤ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –±–ª–æ–∫—á–µ–π–Ω (–≤–∫–ª—é—á–∞—è –Ω–µ-EVM —Å–µ—Ç–∏), –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π `peer` –≤ `SourceOApp` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç—É–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.  

–ú–∏–Ω—É—Å —ç—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏. –õ—É—á—à–µ –¥–µ–ª–∞—Ç—å —Ç–∞–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –º–æ–≥–ª–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å, –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è. OApp-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª—é–±—É—é –ª–æ–≥–∏–∫—É –∏ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.  

–û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∫–µ–π—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ‚Äî **OFT-—Ç–æ–∫–µ–Ω**. –ü—Ä–æ—Ç–æ–∫–æ–ª LayerZero —É–∂–µ –ø—Ä–æ–¥—É–º–∞–ª, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–∫–æ–π —Ç–æ–∫–µ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç **OFT**. –≠—Ç–æ ERC20-—Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ª—é–±–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –±–ª–æ–∫—á–µ–π–Ω–æ–≤. –ß—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –Ω–æ–≤—ã–π –±–ª–æ–∫—á–µ–π–Ω, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤ –Ω–µ–º –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –µ–≥–æ –∫ –æ—Å—Ç–∞–ª—å–Ω—ã–º.  

–í–æ–∑–Ω–∏–∫–∞–µ—Ç –ª–æ–≥–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å: —á–µ–º —ç—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –º–æ—Å—Ç–∞? –Ø —É–∂–µ –æ—Ç–≤–µ—á–∞–ª –Ω–∞ –Ω–µ–≥–æ –≤ –æ–±–∑–æ—Ä–Ω–æ–π —Å—Ç–∞—Ç—å–µ, –Ω–æ –µ—Å–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ ‚Äî –≥–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –≤ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–µ–Ω–æ–≤.  

### –ü—Ä–∏–º–µ—Ä USDT0  

–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ OFT-—Ç–æ–∫–µ–Ω–∞ ‚Äî [USDT0](https://usdt0.to/). –≠—Ç–æ —Ö–æ—Ä–æ—à–æ –∑–Ω–∞–∫–æ–º—ã–π –≤—Å–µ–º Tether USD (USDT), –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Å–≤–æ–π —Ç–æ–∫–µ–Ω –Ω–∞ **OFT-—Ä–µ–ª—å—Å—ã**. –í–æ–∑–º–æ–∂–Ω–æ, –∫–æ–≥–¥–∞ –≤—ã —á–∏—Ç–∞–µ—Ç–µ —ç—Ç—É —Å—Ç–∞—Ç—å—é, —Ç–æ–∫–µ–Ω USDT —É–∂–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ USDT0 –≤–æ –≤—Å–µ—Ö —Å–µ—Ç—è—Ö, –∫—Ä–æ–º–µ Ethereum. –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–ª–æ–∫—á–µ–π–Ω–∞—Ö.  

–í —Å–ª—É—á–∞–µ —Å USDT0 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ **OFTAdapter** ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –±–ª–æ–∫–∏—Ä—É–µ—Ç/—Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ –±–∞–∑–æ–≤–æ–π —Å–µ—Ç–∏, –∞ –≤–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –±–ª–æ–∫—á–µ–π–Ω–∞—Ö ‚Äî –º–∏–Ω—Ç–∏—Ç/—Å–∂–∏–≥–∞–µ—Ç. OFTAdapter –Ω–µ–æ–±—Ö–æ–¥–∏–º, –µ—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –æ–±—ã—á–Ω—ã–π ERC20-—Ç–æ–∫–µ–Ω, –Ω–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –µ–≥–æ –≤ OFT.  

![usdt0](./img/usdt0.png)  
*–ò—Å—Ç–æ—á–Ω–∏–∫: –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è USDT0*  

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —É –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –Ω–æ –≤—Å–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã, –∏ –∫–æ–¥ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –±–ª–æ–∫—á–µ–π–Ω-—ç–∫—Å–ø–ª–æ—Ä–µ—Ä–∞—Ö (—Å—Å—ã–ª–∫–∏ [–∑–¥–µ—Å—å](https://docs.usdt0.to/technical-documentation/developer#id-3.-deployments)). –¢–∞–∫–∂–µ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –ø–æ –∞—É–¥–∏—Ç—É USDT0 ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –Ω–∏–º–∏ [—Ç—É—Ç](https://github.com/Everdawn-Labs/usdt0-audit-reports). –í –Ω–∏—Ö –º–Ω–æ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.  

## –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è OFT-—Ç–æ–∫–µ–Ω–∞?  

–°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å OFT-—Ç–æ–∫–µ–Ω –¥–ª—è LayerZero ‚Äî [—Å–æ–∑–¥–∞—Ç—å](https://docs.layerzero.network/v2/developers/evm/oft/quickstart) –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–≤–æ–µ–π –º–∞—à–∏–Ω–µ —á–µ—Ä–µ–∑ npm. –î–ª—è —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É:  

```bash
npx create-lz-oapp@latest
```  

–ó–∞—Ç–µ–º –≤—ã–±–∏—Ä–∞–µ–º **OFT**.  

![create-lz-oapp](./img/create-lz-oapp.png)  

–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –º—ã –ø–æ–ª—É—á–∏–º –≥–æ—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Å OFT-—Ç–æ–∫–µ–Ω–æ–º. –ü—Ä–∏—á–µ–º –æ–Ω **–∏–∑ –∫–æ—Ä–æ–±–∫–∏** –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ Hardhat, —Ç–∞–∫ –∏ Foundry, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ —É–¥–æ–±–Ω–æ. –û—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–µ–π–º–∏–Ω–≥, –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö. –í –ø—Ä–æ–µ–∫—Ç–µ —É–∂–µ –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –¥–µ–ø–ª–æ—è, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≥–∞–∑–∞.  

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ OFT-—Ç–æ–∫–µ–Ω–∞  

–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ OFT –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:  

![oapp-inherits-docs](./img/oapp-inherits-docs.png)  
*–ò—Å—Ç–æ—á–Ω–∏–∫: –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è LayerZero*  

–ù–æ –µ—Å–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ OFT-—Ç–æ–∫–µ–Ω –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ, –æ–Ω –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —á—É—Ç—å –±–æ–ª—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ —è –Ω–∞–ø–∏—Å–∞–ª —Ç–æ–∫–µ–Ω [MetaLampOFTv1](./contracts/contracts/MetaLampOFTv1.sol). –ß–∏—Ç–∞—Ç—å —Å—Ö–µ–º—É **—Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö**.  

![oapp-inherits](./img/oapp-inherits.png)  
*–°—Ö–µ–º–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è OFT-—Ç–æ–∫–µ–Ω–∞*  

–ó–¥–µ—Å—å –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –¥–≤–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ ‚Äî [OAppPreCrimeSimulator](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oapp-evm/contracts/precrime/OAppPreCrimeSimulator.sol) –∏ [OAppOptionsType3](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oapp-evm/contracts/oapp/libs/OAppOptionsType3.sol), –æ –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º —á—É—Ç—å –ø–æ–∑–∂–µ. –¢–∞–∫–∂–µ –≤–∏–¥–Ω–æ, —á—Ç–æ [OApp](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oapp-evm/contracts/oapp/OApp.sol) –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç [OAppCore](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oapp-evm/contracts/oapp/OAppCore.sol) –∏ –º–æ–∂–µ—Ç –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å, —Ç–∞–∫ –∏ –ø–æ–ª—É—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ [OAppSender](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oapp-evm/contracts/oapp/OAppSender.sol) –∏ [OAppReceiver](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oapp-evm/contracts/oapp/OAppReceiver.sol).  

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:* –µ—Å–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç, –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [–∑–¥–µ—Å—å](./contracts/contracts/MetaLampOFTv1.sol). –î–ª—è —ç—Ç–æ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `pnpm install` –≤ –ø–∞–ø–∫–µ `protocols/layerzero-v2/smart-contracts/contracts`.  

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∑–∞–≥–ª—è–Ω—É—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π [LayerZero-Labs/devtools](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oft-evm/contracts) ‚Äî —Ç–∞–º –µ—Å—Ç—å –≤—Å–µ –ø—Ä–∏–º–µ—Ä—ã.

## –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª OFT  

–¢–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π **ERC20 OFT-—Ç–æ–∫–µ–Ω**:  

```solidity
// SPDX-License-Identifier: UNLICENSED

pragma solidity ^0.8.22;

import { Ownable } from "@openzeppelin/contracts/access/Ownable.sol";
import { OFT } from "@layerzerolabs/oft-evm/contracts/OFT.sol";

contract MetaLampOFTv1 is OFT {
    constructor(
        string memory _name,
        string memory _symbol,
        address _lzEndpoint,
        address _delegate
    ) OFT(_name, _symbol, _lzEndpoint, _delegate) Ownable(_delegate) {}
}
```

- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã `_name` –∏ `_symbol` –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ, —Ç–∞–∫ –∫–∞–∫ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π —Å–µ—Ç–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Ç–æ–∫–µ–Ω–∞ (OApp).  
- `_lzEndpoint` ‚Äî —ç—Ç–æ –∞–¥—Ä–µ—Å Endpoint –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å LayerZero.  
- `_delegate` ‚Äî –∞–¥—Ä–µ—Å –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ç–æ–∫–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫–∂–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ OApp.  

–í —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ç–æ–∫–µ–Ω–∞ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª—é–±—É—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, **Permit**). –ù–æ –≤—Å–µ, —á—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∫–∏ OFT, —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ `OFT`.  

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –≤ **OFT**, ‚Äî `_debit` –∏ `_credit`. –û–Ω–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç –±–∞–∑–æ–≤—É—é –º–µ—Ö–∞–Ω–∏–∫—É **mint/burn**, –Ω–æ –∏—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ —Ç–æ–∫–µ–Ω–∞.  

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏ (`send`)  

–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ ‚Äî [`OFTCore::send`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oft-evm/contracts/OFTCore.sol#L175). –ï—Å–ª–∏ –ø–æ–º–Ω–∏—Ç–µ, –≤ –ø—Ä–∏–º–µ—Ä–µ —Å Remix —É –Ω–∞—Å —É–∂–µ –±—ã–ª–∞ –ø–æ—Ö–æ–∂–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –Ω–æ —Ç–µ–ø–µ—Ä—å –æ–Ω–∞ —Å—Ç–∞–ª–∞ —Å–ª–æ–∂–Ω–µ–µ:  

```solidity
function send(
    SendParam calldata _sendParam, // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
    MessagingFee calldata _fee, // –ö–æ–º–∏—Å—Å–∏—è –Ω–∞ –æ–ø–ª–∞—Ç—É –≥–∞–∑–∞ –∏ —Å—Ç–µ–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    address _refundAddress // –ê–¥—Ä–µ—Å –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏
) external payable virtual returns (
    MessagingReceipt memory msgReceipt, // –û—Å–Ω–æ–≤–Ω–æ–π —á–µ–∫ –ø–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    OFTReceipt memory oftReceipt // –î–æ–ø –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –¥–ª—è OFT
) { ... }
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏: 

```solidity
struct SendParam {
    uint32 dstEid; // Endpoint ID —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.
    bytes32 to; // –ê–¥—Ä–µ—Å OApp –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.
    uint256 amountLD; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö decimals.
    uint256 minAmountLD; // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö decimals.
    bytes extraOptions; // –û–ø—Ü–∏–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≤—ã–∑—ã–≤–∞—é—â–µ–π —Å—Ç–æ—Ä–æ–Ω–æ–π.
    bytes composeMsg; // –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏ send().
    bytes oftCmd; // –ö–æ–º–∞–Ω–¥–∞ OFT, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö.
}
```

–¢–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç MessagingReceipt:

```solidity
struct MessagingReceipt {
    bytes32 guid; // GUID –¥–ª—è –æ–Ω—á–µ–π–Ω –∏ –æ—Ñ—Ñ—á–µ–π–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è.
    uint64 nonce; // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π nonce –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–µ–º –≤ –∫–∞–Ω–∞–ª–µ.
    MessagingFee fee; // –ö–æ–º–∏—Å—Å–∏—è –Ω–∞ –≥–∞–∑ –∏ –æ–ø–ª–∞—Ç—É —Å—Ç–µ–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
}
```

#### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `send`  

–ï—Å–ª–∏ –Ω–µ —É–≥–ª—É–±–ª—è—Ç—å—Å—è –≤ –¥–µ—Ç–∞–ª–∏, —Ñ—É–Ω–∫—Ü–∏—è `send` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö —à–∞–≥–∞:  

1. **–í—ã–∑—ã–≤–∞–µ—Ç `_debit`** ‚Äî —Å–∂–∏–≥–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥—Ä—É–≥—É—é –ª–æ–≥–∏–∫—É –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ —Å–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (–ø–æ–∫–∞ –º–æ–∂–Ω–æ –Ω–µ –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏—è –Ω–∞ LD –∏ SD amounts).  
2. **–§–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ `_buildMsgAndOptions` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è OFT –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.  
3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ `_lzSend` ‚Äî —ç—Ç–æ –ø–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ **OApp**. –í—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —à–∞–≥–∏ –±—ã–ª–∏ –ª–∏—à—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π. `_lzSend` –ø–µ—Ä–µ–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Endpoint –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –µ–º—É —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–º–∏—Å—Å–∏–∏.  

–í–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `send` –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏ –¥—Ä—É–≥–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏. –í—Å–µ `internal`-–º–µ—Ç–æ–¥—ã –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ –∏–º–µ—é—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `virtual`, –ø–æ—ç—Ç–æ–º—É –∏—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤ —Å–≤–æ–µ–º OFT-—Ç–æ–∫–µ–Ω–µ.  

![oft-core-send-diagram](./img/oft-core-send-diagram.png)  
*–ì—Ä–∞—Ñ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `OFTCore::send`*  

–Ø —É—Å–ª–æ–≤–Ω–æ —Ä–∞–∑–¥–µ–ª–∏–ª –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ç–∫–∏ ‚Äî —Ç–∞–∫ –ø—Ä–æ—â–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å –ø–æ —à–∞–≥–∞–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è.

##### Local Decimals –∏ Shared Decimals  

–¢–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤, –Ω–∞—á–∏–Ω–∞—è —Å —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π `_debitView` –∏ `_removeDust`, –∞ —Ç–∞–∫–∂–µ —Ç–∞–∫–∏—Ö –ø–æ–Ω—è—Ç–∏–π, –∫–∞–∫ **Local Decimals (LD)** –∏ **Shared Decimals (SD)**. –¢–æ –µ—Å—Ç—å –ø–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ **–≤–µ—Ç–∫–µ 1**.  

![oft-core-send-branch-1](./img/oft-core-send-branch-1.png)  
*–°–∂–∏–≥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è `amount`*  

–ó–∞—á–µ–º –Ω—É–∂–Ω—ã LD –∏ SD? –ß—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –±–ª–æ–∫—á–µ–π–Ω–∞–º–∏ (–≤–∫–ª—é—á–∞—è –Ω–µ-EVM —Å–µ—Ç–∏) –∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å, –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–µ–Ω–æ–≤ –≤ LayerZero –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `uint64` –∏ `decimals = 6`.  

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π `totalSupply` –º–æ–∂–µ—Ç –±—ã—Ç—å 18,446,744,073,709.551615.  

–§—É–Ω–∫—Ü–∏—é `OFTCore::sharedDecimals` –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —É–º–µ–Ω—å—à–∏–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å `sharedDecimals` –¥–æ 4, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –≤–æ–∑—Ä–∞—Å—Ç–µ—Ç –¥–æ 1,844,674,407,370,955.1615, –Ω–æ —Ç–æ—á–Ω–æ—Å—Ç—å —Å–Ω–∏–∑–∏—Ç—Å—è.  

–£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å `sharedDecimals` –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è ‚Äî –∫–æ–º–∞–Ω–¥–∞ LayerZero –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∞ —Ç–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –∏ —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –µ–≥–æ —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±–ª–æ–∫—á–µ–π–Ω–æ–≤.  

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç? –ï—Å—Ç—å –¥–≤–∞ –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–∞:  

1. **–£–¥–∞–ª–µ–Ω–∏–µ "–ø—ã–ª–∏"** ‚Äî —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.  
2. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è** –º–µ–∂–¥—É `local decimals` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–µ—Ç–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è) –∏ `shared decimals` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ).  

–î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `decimalConversionRate`, –∫–æ—Ç–æ—Ä–∞—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ:  

```solidity
decimalConversionRate = 10 ** (_localDecimals - sharedDecimals());
```

**–ü—Ä–∏–º–µ—Ä:**  

–î–æ–ø—É—Å—Ç–∏–º, –≤ EVM-–±–ª–æ–∫—á–µ–π–Ω–∞—Ö —á–∞—â–µ –≤—Å–µ–≥–æ `decimals = 18`, —Ç–æ–≥–¥–∞:  
```solidity
decimalConversionRate = 10 ** (18 - 6) = 1,000,000,000,000
```

–ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ **1 —Ç–æ–∫–µ–Ω**, —Ç–æ –æ–Ω –≤ `decimals = 18` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ `1,123,123,123,123,123,123`.  

1. –£–¥–∞–ª–µ–Ω–∏–µ "–ø—ã–ª–∏" (`_removeDust`). –§—É–Ω–∫—Ü–∏—è `_removeDust` –æ–∫—Ä—É–≥–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤–Ω–∏–∑, —É–¥–∞–ª—è—è "–ø—ã–ª—å":  

    ```solidity
    function _removeDust(uint256 _amountLD) internal view virtual returns (uint256 amountLD) {
        return (_amountLD / decimalConversionRate) * decimalConversionRate;
    }
    ```

    **–î–æ:** `1,123,123,123,123,123,123` (1.123123123123123123)  
    **–ü–æ—Å–ª–µ:** `1,123,123,000,000,000,000` (1.123123000000000000)  

2. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ SD (`_toSD`). –î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ —Å–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ **shared decimals**:  

    ```solidity
    function _toSD(uint256 _amountLD) internal view virtual returns (uint64 amountSD) {
        return uint64(_amountLD / decimalConversionRate);
    }
    ```

    –ú—ã –æ–±—Ä–µ–∑–∞–µ–º 12 –∑–Ω–∞–∫–æ–≤, –ø–æ–ª—É—á–∞—è `1,123,123` (1.123123).  

3. –û–±—Ä–∞—Ç–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è (`_toLD`). –í —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è:  

    ```solidity
    function _toLD(uint64 _amountSD) internal view virtual returns (uint256 amountLD) {
        return _amountSD * decimalConversionRate;
    }
    ```

    –ï—Å–ª–∏ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è `decimals = 18`, –º—ã —Å–Ω–æ–≤–∞ –ø–æ–ª—É—á–∏–º 1.123123000000000000.  

–ú–æ–∂–µ—Ç–µ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ –≤–∑—è—Ç—å ETH –ø–æ —Ç–µ–∫—É—â–∏–º —Ü–µ–Ω–∞–º –∏ –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–∞–∫–∏–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä–∏ –∏–∑-–∑–∞ —Ç–∞–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏. –Ø –ø–æ—Å—á–∏—Ç–∞–ª –∏ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ "–ø—ã–ª—å".

–ü–æ–º–∏–º–æ `_removeDust`, —Ñ—É–Ω–∫—Ü–∏—è `_debitView` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ "–ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ", –µ—Å–ª–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤–∑–∏–º–∞—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏.  

–ú—ã —Ä–∞–∑–æ–±—Ä–∞–ª–∏ –≤—Å—é **–≤–µ—Ç–∫—É 1**. –° —Ñ—É–Ω–∫—Ü–∏–µ–π `ERC20::_burn` –¥—É–º–∞—é –≤—Å–µ –∏ —Ç–∞–∫ –ø–æ–Ω—è—Ç–Ω–æ.

#### –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ–ø—Ü–∏–π –¥–ª—è –µ–≥–æ –æ—Ç–ø—Ä–∞–≤–∫–∏  

–¢–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä–µ–º **–≤–µ—Ç–∫—É 2** ‚Äî —Ñ—É–Ω–∫—Ü–∏—é `_buildMsgAndOptions`. –ï–µ –º–æ–∂–Ω–æ –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —Ç—Ä–∏ —ç—Ç–∞–ø–∞:  

1. –ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
2. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ü–∏–π
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

![oft-core-send-branch-2](./img/oft-core-send-branch-2.png)  
*–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –æ–ø—Ü–∏–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏*  

**–®–∞–≥ 1:** –ö–æ–¥–∏—Ä–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [`OFTMsgCodec`](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oft-evm/contracts/libs/OFTMsgCodec.sol). –ï–µ –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–ø–∞–∫–æ–≤–∞—Ç—å –±–∞–π—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏.  

```solidity
function _buildMsgAndOptions(
    SendParam calldata _sendParam, // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–ø—Ä–∞–≤–∫–∏
    uint256 _amountLD // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ —Å local decimals
) internal view virtual returns (bytes memory message, bytes memory options) {
    // 1. –ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    bool hasCompose;
    (message, hasCompose) = OFTMsgCodec.encode(
        _sendParam.to,
        _toSD(_amountLD),
        _sendParam.composeMsg
    );

    // 2. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ü–∏–π
    uint16 msgType = hasCompose ? SEND_AND_CALL : SEND;
    options = combineOptions(_sendParam.dstEid, msgType, _sendParam.extraOptions);

    // 3. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä
    address inspector = msgInspector;
    if (inspector != address(0)) IOAppMsgInspector(inspector).inspect(message, options);
}
```

**–®–∞–≥ 2:** –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ü–∏–π. –ò–∑ —á–µ–≥–æ —Å–æ—Å—Ç–æ—è—Ç –æ–ø—Ü–∏–∏ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —á—É—Ç—å –ø–æ–∑–∂–µ. –ó–¥–µ—Å—å —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ –æ–Ω–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ [`combineOptions`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oapp-evm/contracts/oapp/libs/OAppOptionsType3.sol#L63).

–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç–∞–∫—Ç `OAppOptionsType3` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ "–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–µ" –æ–ø—Ü–∏–∏ (`enforcedOptions`). –¢–∞–∫–∏–µ –æ–ø—Ü–∏–∏ –∑–∞–¥–∞–µ—Ç –≤–ª–∞–¥–µ–ª–µ—Ü OApp, –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç, —á—Ç–æ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –±–ª–æ–∫—á–µ–π–Ω–µ –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å `gasLimit` –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π *native drop* (–æ–± —ç—Ç–æ–º —Ç–æ–∂–µ –ø–æ–∑–∂–µ).  

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–±—ã—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω—ã–µ (composed), –≤ OFT –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–≤–∞ —Ç–∏–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ `enforcedOptions`:  
- **1 - `SEND`** ‚Äî –æ–±—ã—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–≤–∫–ª—é—á–∞—è –ø–µ—Ä–µ–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤);
- **2 - `SEND_AND_CALL`** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è `compose`-—Å–æ–æ–±—â–µ–Ω–∏–π (–æ—Ç–ø—Ä–∞–≤–∫–∞ + –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è). 

**–ü—Ä–∏–º–µ—Ä**

–î–æ–ø—É—Å—Ç–∏–º, –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ —Å Remix, –µ—Å–ª–∏ –≤—ã –≤–µ—Ä–Ω–µ—Ç–µ—Å—å –∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É `Source` –≤ –Ω–µ–º –∑–∞–¥–∞–Ω—ã —Ç–∞–∫–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –æ–ø—Ü–∏–∏:  

```solidity
bytes _options = OptionsBuilder.newOptions().addExecutorLzReceiveOption(50000, 0);
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç `{ gasLimit: 50000, value: 0 }`. –¢–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–≤–æ–∏—Ç—å –ª–∏–º–∏—Ç –≥–∞–∑–∞ –≤ –¥–≤–∞ —Ä–∞–∑–∞ + –¥–æ–±–∞–≤–∏—Ç—å 0.5 ETH native drop. –¢–æ–≥–¥–∞ –≤–ª–∞–¥–µ–ª–µ—Ü OApp –∑–∞–¥–∞–µ—Ç `enforcedOptions`:  

```solidity
{ gasLimit: 100000, value: 0.5 ETH }
```

–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è:  

```solidity
{ gasLimit: 150000, value: 0.5 ETH }
```

–§—É–Ω–∫—Ü–∏—è `combineOptions` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–ø—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:  

```solidity
function combineOptions(
    uint32 _eid,
    uint16 _msgType,
    bytes calldata _extraOptions
) public view virtual returns (bytes memory) {
    bytes memory enforced = enforcedOptions[_eid][_msgType];

    if (enforced.length == 0) return _extraOptions;
    if (_extraOptions.length == 0) return enforced;

    if (_extraOptions.length >= 2) {
        _assertOptionsType3(_extraOptions);
        return bytes.concat(enforced, _extraOptions[2:]);
    }

    revert InvalidOptions(_extraOptions);
}
```

–ù–∞ —Å—Ö–µ–º–µ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

![combine-options](./img/combine-options.png)  
*–í—ã–±–æ—Ä –æ–ø—Ü–∏–π –∏ –∏—Ö –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ*  

- –ï—Å–ª–∏ `enforcedOptions` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `extraOptions`.  
- –ï—Å–ª–∏ `extraOptions` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `enforcedOptions`.  
- –ï—Å–ª–∏ –∑–∞–¥–∞–Ω—ã –æ–±–∞ ‚Üí `extraOptions` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º–∏, —á—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å—Å—è.  

**–®–∞–≥ 3:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ). –ï—Å–ª–∏ –≤ OApp –∑–∞–¥–∞–Ω –∞–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `msgInspector`, —Ç–æ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏—è –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `message` –∏ `options`.  

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –∑–∞–¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö –≤ –¥—Ä—É–≥–æ–π –±–ª–æ–∫—á–µ–π–Ω.  

–ú—ã —Ä–∞–∑–æ–±—Ä–∞–ª–∏ **–≤–µ—Ç–∫—É 2** ‚Äî –ø—Ä–æ—Ü–µ—Å—Å –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ü–∏–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.

#### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è  

–ù–∞–∫–æ–Ω–µ—Ü, –¥–æ–±—Ä–∞–ª–∏—Å—å –¥–æ **—Ç—Ä–µ—Ç—å–µ–π –≤–µ—Ç–∫–∏** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ `send`, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Endpoint.  

![oft-core-send-branch-3](./img/oft-core-send-branch-3.png)  
*–°—Ö–µ–º–∞ –≤—ã–∑–æ–≤–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è*  

–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è `OAppSender::_lzSend`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è:  

1. –í—ã–∑—ã–≤–∞–µ—Ç `_payNative`, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ö–≤–∞—Ç–∞–µ—Ç –ª–∏ `msg.value` –¥–ª—è –æ–ø–ª–∞—Ç—ã `gasLimit` –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –ª–∏–±–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Ç–æ–∫–µ–Ω—ã –Ω–∞ Endpoint —á–µ—Ä–µ–∑ `safeTransferFrom`, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –æ–ø—Ü–∏—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ `_lzPayToken`.  
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ `peer`, –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ (`getPeerOrRevert`).  
3. –í—ã–∑—ã–≤–∞–µ—Ç `Endpoint.send{ value: nativeFee }()`, –æ—Ç–ø—Ä–∞–≤–ª—è—è —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å—Ç–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.  

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ Endpoint, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –µ–≥–æ –¥–∞–ª—å–Ω–µ–π—à—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É, –∞ —Ç–∞–∫–∂–µ –æ–ø–ª–∞—Ç—É —É—Å–ª—É–≥ DVNs –∏ Executor.  

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è  

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –±–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é [`OAppReceiver::lzReceive`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oapp-evm/contracts/oapp/OAppReceiver.sol#L95) ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π. –û–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º `OAppReceiver::_lzReceive`, –∫–æ—Ç–æ—Ä–∞—è —É–∂–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Å —É—á–µ—Ç–æ–º –ª–æ–≥–∏–∫–∏ —Ç–æ–∫–µ–Ω–∞ –≤ [`OFTCore`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oft-evm/contracts/OFTCore.sol#L266).  

–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–≤–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:  

1. –§—É–Ω–∫—Ü–∏—é `lzReceive` –º–æ–≥ –≤—ã–∑–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ** Endpoint.  
2. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `peer`, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏ —á–µ—Ä–µ–∑ `setPeer`.  

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `OFTCore::_lzReceive`.  

![oft-core-lz-receive](./img/oft-core-lz-receive.png)  
*–ì—Ä–∞—Ñ –≤—ã–∑–æ–≤–æ–≤ –¥–ª—è lzReceive*  

–§—É–Ω–∫—Ü–∏—è `OFTCore::_lzReceive` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–≤–∞ –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞:  

- –í—ã–∑—ã–≤–∞–µ—Ç `_credit`, —á—Ç–æ–±—ã —Å–º–∏–Ω—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (–∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥—Ä—É–≥—É—é –∑–∞–ª–æ–∂–µ–Ω–Ω—É—é –≤ —Ç–æ–∫–µ–Ω–µ –ª–æ–≥–∏–∫—É).  
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `Endpoint::sendCompose`, –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –æ—á–µ—Ä–µ–¥—å.  

```solidity
function _lzReceive(
    Origin calldata _origin,
    bytes32 _guid,
    bytes calldata _message,
    address /*_executor*/, // @dev –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
    bytes calldata /*_extraData*/ // @dev –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
) internal virtual override {
    // –ü—Ä–∏–≤–æ–¥–∏–º –∞–¥—Ä–µ—Å –∫ EVM-—Ñ–æ—Ä–º–∞—Ç—É
    address toAddress = _message.sendTo().bytes32ToAddress();

    // –í—ã–∑—ã–≤–∞–µ–º OFT::_credit
    uint256 amountReceivedLD = _credit(toAddress, _toLD(_message.amountSD()), _origin.srcEid);

    // –ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö –≤ –æ—á–µ—Ä–µ–¥—å Endpoint
    if (_message.isComposed()) {
        bytes memory composeMsg = OFTComposeMsgCodec.encode(
            _origin.nonce,
            _origin.srcEid,
            amountReceivedLD,
            _message.composeMsg()
        );
        endpoint.sendCompose(toAddress, _guid, 0 /* –∏–Ω–¥–µ–∫—Å compose-—Å–æ–æ–±—â–µ–Ω–∏—è */, composeMsg);
    }

    emit OFTReceived(_guid, _origin.srcEid, toAddress, amountReceivedLD);
}
```

*–í–∞–∂–Ω–æ!* –ß—Ç–æ–±—ã OApp –º–æ–≥ —Ä–∞–±–æ—Ç–∞—Ç—å —Å `compose`-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏, –æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å [`IOAppComposer`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oapp-evm/contracts/oapp/interfaces/IOAppComposer.sol). –í –±–∞–∑–æ–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ—Ç.  

### –û—Ü–µ–Ω–∫–∞ `gasLimit` –∏ –∫–æ–º–∏—Å—Å–∏–∏ —Å—Ç–µ–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏  

–î–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:  

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–∞–∑–∞** (`gasLimit`), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.  
2. **–°—Ç–æ–∏–º–æ—Å—Ç—å –≥–∞–∑–∞ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è**, –≤—ã—Ä–∞–∂–µ–Ω–Ω—É—é –≤ —Ç–æ–∫–µ–Ω–∞—Ö –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏–¥–µ—Ç –∏–∑ Ethereum –≤ Polygon, —Ä–∞—Å—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤ POL, –Ω–æ –æ–ø–ª–∞—Ç–∏—Ç—å –Ω—É–∂–Ω–æ –≤ ETH).  

–° `gasLimit` –Ω–µ –≤—Å–µ —Ç–∞–∫ –æ—á–µ–≤–∏–¥–Ω–æ. –î–ª—è —Ä–∞–∑–Ω—ã—Ö –±–ª–æ–∫—á–µ–π–Ω–æ–≤ –º–æ–∂–Ω–æ –ª–∏–±–æ –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å –µ–≥–æ **—Å –∑–∞–ø–∞—Å–æ–º**, –ª–∏–±–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏. –ü–æ–∑–∂–µ –º—ã —Ä–∞–∑–±–µ—Ä–µ–º, –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.  

–î–æ–ø—É—Å—Ç–∏–º, –¥–ª—è **EVM-—Å–µ—Ç–µ–π** –±–µ—Ä–µ–º —É—Å—Ä–µ–¥–Ω–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ **80 000 –µ–¥–∏–Ω–∏—Ü –≥–∞–∑–∞**. –¢–æ–≥–¥–∞ –æ–ø—Ü–∏–∏ –≤—ã–≥–ª—è–¥—è—Ç —Ç–∞–∫:  

```solidity
bytes memory options = OptionsBuilder.newOptions().addExecutorLzReceiveOption(80000, 0);
```

–î–∞–ª–µ–µ –Ω—É–∂–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É [`SendParam`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oft-evm/contracts/interfaces/IOFT.sol#L10), –∑–∞–ø–æ–ª–Ω–∏–≤ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è:  

```solidity
SendParam memory sendParam = SendParam(
    40267, // EID
    addressToBytes32(0x32bb35Fc246CB3979c4Df996F18366C6c753c29c), // –ê–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è OFT-—Ç–æ–∫–µ–Ω–æ–≤ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
    1e18, // amountLD
    1e18, // minAmountLD
    options,
    "", // composeMsg
    ""  // oftCmd
);
```

–ß—Ç–æ–±—ã –ø–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–º–∏—Å—Å–∏—é —Å—Ç–µ–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ Executer, –≤—ã–∑—ã–≤–∞–µ–º [`OFTCore::quoteSend`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oft-evm/contracts/OFTCore.sol#L145):  

```solidity
MessagingFee memory fee = OFT.quoteSend(sendParam, false);
```

![oft-core-quote-send](./img/oft-core-quote-send.png)  
*–ì—Ä–∞—Ñ –≤—ã–∑–æ–≤–æ–≤ quoteSend*  

–®–∞–≥–∏ 1 –∏ 2 –∑–¥–µ—Å—å —Å—Ö–æ–∂–∏ —Å `OFTCore::send`, –Ω–æ `_debit` –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è. –ù–∞ **—Ç—Ä–µ—Ç—å–µ–º —à–∞–≥–µ** –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—ã–∑–æ–≤ `Endpoint::quote`, –≥–¥–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–º–∏—Å—Å–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ü–µ–Ω –Ω–∞ –≥–∞–∑ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.  

–†–∞—Å—á–µ—Ç—ã, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ Endpoint, –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [–∑–¥–µ—Å—å](https://github.com/LayerZero-Labs/LayerZero-v2/blob/a3637f851ab1b987bff9fb3db31bf40a59ac374b/packages/layerzero-v2/evm/protocol/contracts/EndpointV2.sol#L55).  

–ó–Ω–∞—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—É—é –∫–æ–º–∏—Å—Å–∏—é, –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:  

```solidity
OFT.send{ value: fee.nativeFee }(sendParam, fee, refundAddress);
```

–ü—Ä–∏–º–µ—Ä –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Ç–µ—Å—Ç–∞—Ö ‚Äî [`test_send_oft`](./contracts/test/foundry/MetaLampOFTv1.t.sol).  

#### –õ–∏–º–∏—Ç `gasLimit`  

–†–∞–Ω–µ–µ –º—ã –æ–±—Å—É–∂–¥–∞–ª–∏ `enforcedOptions`. –ï—Å–ª–∏ —É–∂–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≥–∞–∑–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–µ—Ç–∏, –µ–≥–æ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á–µ—Ä–µ–∑ [`OAppOptionsType3::setEnforcedOptions`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oapp-evm/contracts/oapp/libs/OAppOptionsType3.sol#L28).

### –û—Ü–µ–Ω–∫–∞ –ª–∏–º–∏—Ç–æ–≤ —Ç–æ–∫–µ–Ω–∞  

–î–ª—è OFT —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ [`OFTCore::quoteOFT`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oft-evm/contracts/OFTCore.sol#L108). –û–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞.  

```solidity
function quoteOFT(
    SendParam calldata _sendParam
) external view virtual returns (
    OFTLimit memory oftLimit, // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç 0 –¥–æ totalSupply.
    OFTFeeDetail[] memory oftFeeDetails, // –ö–æ–º–∏—Å—Å–∏–∏ —Ç–æ–∫–µ–Ω–∞, —Ç–æ–∂–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.
    OFTReceipt memory oftReceipt // amountSentLD –∏ amountReceivedLD
) {}
```

## –ö–∞–∫ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å OFT-—Ç–æ–∫–µ–Ω  

–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç OFT-—Ç–æ–∫–µ–Ω–∞ –±—ã–ª —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ `npx create-lz-oapp@latest`, –≤ –Ω–µ–º —É–∂–µ –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –¥–µ–ø–ª–æ—è. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env` –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Å–µ—Ç–∏ –≤ [`hardhat.config.ts`](./contracts/hardhat.config.ts) –¥–ª—è –¥–µ–ø–ª–æ—è –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ —ç–∫—Å–ø–ª–æ—Ä–µ—Ä–∞—Ö.  

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É:  

```bash
npx hardhat lz:deploy
```

–ó–∞—Ç–µ–º —Å–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º, –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ–≥–∞ —É–∫–∞–∑–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –µ—Å—Ç—å [–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.layerzero.network/v2/developers/evm/create-lz-oapp/deploying) –∏–ª–∏ –≤ [`README`](./contracts/README.md#layerzero-hardhat-helper-tasks) –ø—Ä–æ–µ–∫—Ç–∞.  

![deploy-contracts](./img/deploy-contracts.png)  
*–î–µ–ø–ª–æ–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ —Ç–µ—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫—á–µ–π–Ω—ã*  

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã, –Ω–æ –∏—Ö –µ—â–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ —Å–≤—è–∑–∞—Ç—å –º–µ–∂–¥—É —Å–æ–±–æ–π.  

–ü–µ—Ä–≤—ã–º —à–∞–≥–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π hardhat-—Å–∫—Ä–∏–ø—Ç:  

```bash
npx hardhat lz:oapp:config:init --contract-name MetaLampOFTv1 --oapp-config layerzero.config.ts
```

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ñ–∞–π–ª [`layerzero.config.ts`](./contracts/layerzero.config.ts), –≤ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–¥–∞—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç–µ–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∞ —Ç–∞–∫–∂–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∞–¥—Ä–µ—Å Executor –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π.  

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫ OApps (–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º —Ç–æ–∫–µ–Ω–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç—è—Ö) –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º Endpoint.  

```bash
npx hardhat lz:oapp:wire --oapp-config layerzero.config.ts
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –∫–∞–∂–¥–æ–π —Å–µ—Ç–∏. –ü–æ—Å–∫–æ–ª—å–∫—É –∏—Ö –±—É–¥–µ—Ç –º–Ω–æ–≥–æ, —Å—Ç–æ–∏—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ö–≤–∞—Ç–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –æ–ø–ª–∞—Ç—É –≥–∞–∑–∞.  

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –±—É–¥—É—Ç –≤—ã–∑–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:  

- `OFTToken::setPeer`  
- `OFTToken::setEnforcedOptions` (–µ—Å–ª–∏ –æ–Ω–∏ —É–∫–∞–∑–∞–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)  
- `Endpoint::setConfig`  
- `Endpoint::setSendLibrary`  
- `Endpoint::setReceiveLibrary`  

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫—á–µ–π–Ω–∞ –º–æ–∂–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ –∑–∞–¥–∞—Ç—å `setEnforcedOptions` –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ–±—Å—É–∂–¥–∞–ª–∏ –≤—ã—à–µ.

–ü—Ä–µ–ª–µ—Å—Ç—å –≤ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏—Ç–µ –∫–∞–∫–∏–µ-—Ç–æ –æ–ø—Ü–∏–∏, —Ç–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–æ–≤—ã—Ö –æ–ø—Ü–∏–π, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–æ.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.layerzero.network/v2/developers/evm/protocol-gas-settings/default-config).  

## –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏  

–û—Ç–ø—Ä–∞–≤–∫–∞ –æ–º–Ω–∏—á–µ–π–Ω-—Ç–æ–∫–µ–Ω–æ–≤ ‚Äî –Ω–µ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ü–µ—Å—Å. –ë–µ–∑ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –æ–±–æ–π—Ç–∏—Å—å —Å–ª–æ–∂–Ω–æ, –ø–æ—ç—Ç–æ–º—É —è –Ω–∞–ø–∏—Å–∞–ª Foundry-—Å–∫—Ä–∏–ø—Ç [`SendTokens`](./contracts/scripts/SendTokens.s.sol), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ `MetaLampOFTv1` –≤ —Å–µ—Ç—è—Ö Ethereum Sepolia –∏ Polygon.  

–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ç–æ–∫–µ–Ω–æ–≤ –∏—Ö –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ –±–∞–ª–∞–Ω—Å. –î–ª—è —ç—Ç–æ–≥–æ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `claim`, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—á–∏—Å–ª—è–µ—Ç 100 MLOFTv1. –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ –≤—ã–∑–≤–∞—Ç—å –µ–µ —á–µ—Ä–µ–∑ –±–ª–æ–∫—á–µ–π–Ω-—ç–∫—Å–ø–ª–æ—Ä–µ—Ä—ã —Å–æ–æ—Ç–≤–µ—Å—Ç–≤—É—é—â–∏—Ö –±–ª–æ–∫—á–µ–π–Ω–æ–≤ (—Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –µ—Å—Ç—å [–∑–¥–µ—Å—å](./contracts/README.md)).  

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤:  

```bash
pnpm send \
--rpc-url <rpc_url> \
<sender_address> \
<src_oft_oapp_address> \
<dst_recipient_address> \
<amount_LD> \
<dst_eid> \
--broadcast
```

–ü—Ä–∏–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∏:  

```bash
pnpm send \
--rpc-url sepolia \
0x32bb35Fc246CB3979c4Df996F18366C6c753c29c \
0xcd5407ae7FA70C6ea1f77eDD7A3dde34BED187F5 \
0x32bb35Fc246CB3979c4Df996F18366C6c753c29c \
1000000000000000000 \
40267 \
--broadcast
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:  

```bash
== Logs ==
  GUID: 
  0x832318c92f1b0abe842f8ec5059d47aad92df8ca8de6a94b4bf8be301b689952
  MessagingReceipt: nonce: 4, fee: 75768729416500
  OFTReceipt: amountSentLD: 1000000000000000000, amountReceivedLD: 1000000000000000000

##### sepolia
‚úÖ  [Success] Hash: 0xb791c8aae098e5bfe449ddf58e012beebbf1ff2c3b81960adddd6abc67a7620e
```

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å —Ö—ç—à —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–µ —Å—Ç–∞—Ç—É—Å –≤ [LayerZeroScan](https://testnet.layerzeroscan.com/). –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å **"Delivered"**, —Ç–æ —Ç–æ–∫–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ –¥–æ—à–ª–∏ –¥–æ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è. –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ `totalSupply` –≤ –æ–±–µ–∏—Ö —Å–µ—Ç—è—Ö.  

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:* —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É **–±–µ–∑ —Ñ–ª–∞–≥–∞** `--broadcast`, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —Å–∫–æ–ª—å–∫–æ **fee** –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –º–Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–ª–∏ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π `nativeFee` –≤ Polygon Amoy ‚Äî –≤–µ—Ä–æ—è—Ç–Ω–æ, –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å `priceFeed`.

### –ß—Ç–æ –µ—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å?  

–£ –º–µ–Ω—è –±—ã–ª–∞ —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ —è –æ—Ç–ø—Ä–∞–≤–∏–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º `gasLimit`, –∏–∑-–∑–∞ —á–µ–≥–æ –æ–Ω–∞ —É–ø–∞–ª–∞ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ç–æ–∫–µ–Ω—ã –±—ã–ª–∏ **—Å–æ–∂–∂–µ–Ω—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏**, –Ω–æ –Ω–µ –±—ã–ª–∏ –≤—ã–ø—É—â–µ–Ω—ã –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –∏ –æ–±—â–∏–π `totalSupply` –Ω–∞—Ä—É—à–∏–ª—Å—è.  

–†–µ—à–µ–Ω–∏–µ –æ–∫–∞–∑–∞–ª–æ—Å—å –ø—Ä–æ—Å—Ç—ã–º: —è –≤—ã–∑–≤–∞–ª `Endpoint::lzReceive` –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –ø–µ—Ä–µ–¥–∞–≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∑–∞—Å—Ç—Ä—è–≤—à–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ–Ω–∞ –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. –¢–∞–∫—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å **–ª—é–±–æ–π**, –∫—Ç–æ –æ–ø–ª–∞—Ç–∏—Ç –≥–∞–∑, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ —É–∂–µ –ø—Ä–æ—à–ª–∞ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –∏ –Ω–µ –≤–∞–∂–Ω–æ, –∫—Ç–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º.  

–≠—Ç–æ –æ–¥–Ω–æ –∏–∑ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ LayerZero ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ –≤—Ä—É—á–Ω—É—é. –û–¥–Ω–∞–∫–æ —ç—Ç–æ –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫. –ü–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ —Ç—â–∞—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ OFT-—Ç–æ–∫–µ–Ω–∞.  

## –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ `gasLimit`  

–í –ø—Ä–æ–µ–∫—Ç–µ, —Å–æ–∑–¥–∞–Ω–Ω–æ–º —á–µ—Ä–µ–∑ `npx create-lz-oapp@latest`, –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≥–∞–∑–∞ (`lzReceive` –∏ `lzCompose`). –û–Ω–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç —Ñ–æ—Ä–∫ –Ω—É–∂–Ω–æ–π —Å–µ—Ç–∏, –ø—Ä–æ–≥–æ–Ω—è—é—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑ –∏ –≤—ã–¥–∞—é—Ç —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.  

–ù–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ `lzReceive` –≤ —à–∞–±–ª–æ–Ω–µ –±—ã–ª–∞ –æ—à–∏–±–æ—á–Ω–æ–π. –Ø –∏—Å–ø—Ä–∞–≤–∏–ª –µ–µ –≤ [—ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏](./contracts/README.md#estimating-lzreceive-and-lzcompose-gas-usage).  

–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω—é–∞–Ω—Å–æ–≤:  

1. –î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `bytes`.  
2. –ï—Å–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –∏–º–µ–µ—Ç –±–∞–ª–∞–Ω—Å–∞, –æ—Ü–µ–Ω–∫–∞ –≥–∞–∑–∞ –±—É–¥–µ—Ç –≤—ã—à–µ. –ü–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å –≤ —Å–ª–æ—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –¥–æ—Ä–æ–∂–µ, —á–µ–º –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏.  
3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ –ø–æ–∫–∞–∑–∞–ª–∏—Å—å –º–Ω–µ –∑–∞–Ω–∏–∂–µ–Ω–Ω—ã–º–∏ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –∑–∞–º–µ—Ä–∞–º–∏ –≤ Gas Profiler –æ—Ç Tenderly.  

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ `bytes`, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–∞–Ω–¥—É:  

```bash
forge script scripts/SendTokens.s.sol \
--via-ir \
--sig "encode(address,uint256,bytes)" \
<recipient_address> \
<amount_LD> \
<compose_msg>
```

–ü—Ä–∏–º–µ—Ä:  

```bash
forge script scripts/SendTokens.s.sol \
--via-ir \
--sig "encode(address,uint256,bytes)" \
0x4cD6778754ba04F069f8D96BCD7B37Ccae6A145d \
1000000000000000000 \
"0x"
```

–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:  

```bash
== Return ==
_msg: bytes 0x0000000000000000000000004cd6778754ba04f069f8d96bcd7b37ccae6a145d00000000000f4240
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≥–∞–∑–∞:  

```bash
pnpm gas:lzReceive \
<rpcUrl> \
<endpointAddress> \
"(<srcEid>,<sender>,<dstEid>,<receiver>,[<message>],<msg.value>)<numOfRuns>"
```

–ì–¥–µ:  
- `rpcUrl` ‚Äî RPC URL —Å–µ—Ç–∏, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π —Å—á–∏—Ç–∞–µ–º —Å—Ä–µ–¥–Ω–∏–π `gasLimit`.  
- `endpointAddress` ‚Äî –∞–¥—Ä–µ—Å Endpoint –≤ —ç—Ç–æ–π —Å–µ—Ç–∏.  
- `srcEid` ‚Äî EID –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏.  
- `sender` ‚Äî –∞–¥—Ä–µ—Å OApp –≤ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏.  
- `dstEid` ‚Äî EID —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.  
- `receiver` ‚Äî –∞–¥—Ä–µ—Å OApp –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.  
- `message` ‚Äî –º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ `bytes`.  
- `msg.value` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ (–≤ wei).  
- `numOfRuns` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—Å–∫–æ–≤.  

–ü—Ä–∏–º–µ—Ä:  

```bash
pnpm gas:lzReceive \
polygonAmoy \
0x6EDCE65403992e310A62460808c4b910D972f10f \
"(40161,0x000000000000000000000000cd5407ae7fa70c6ea1f77edd7a3dde34bed187f5,40267,0x54d412fee228e13a42f38bc760faeffdfe838536,[0x0000000000000000000000004cd6778754ba04f069f8d96bcd7b37ccae6a145d00000000000f4240],0,10)"
```

–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:  

```bash
== Logs ==
  Starting gas profiling for lzReceive on dstEid: 40267
  ---------------------------------------------------------
  Aggregated Gas Metrics Across All Payloads:
  Overall Average Gas Used: 19051
  Overall Minimum Gas Used: 19051
  Overall Maximum Gas Used: 19051
  Estimated options:
  0x00030100110100000000000000000000000000004e23
  ---------------------------------------------------------
  Finished gas profiling for lzReceive on dstEid: 40267
  ---------------------------------------------------------
```

### OFTProfilerExample  

–ú–Ω–µ –±–æ–ª—å—à–µ –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è —Å–∫—Ä–∏–ø—Ç [`OFTProfilerExample`](./contracts/scripts/OFTProfilerExample.s.sol).  

–û–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –Ω–æ –≤—ã–¥–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã–µ –∫ —Ä–µ–∞–ª—å–Ω—ã–º. –ï–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å, –∏ –æ–Ω –ª–µ–≥–∫–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:  

```bash
pnpm gas:run 10
```

–ì–¥–µ `10` ‚Äî —á–∏—Å–ª–æ –ø—Ä–æ–≥–æ–Ω–æ–≤. –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —É–±—Ä–∞—Ç—å —Ñ–ª–∞–≥ `--via-ir` –≤ –∫–æ–º–∞–Ω–¥–µ, –æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `package.json`.  

## PreCrime  

–í –∏—Å—Ö–æ–¥–Ω–æ–π —Å–µ—Ç–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π:  
- `quote`  
- `msgInspector`  
- `enforcedOptions`  

–ù–æ –≤ **—Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è** –≤—Å–µ —Å–ª–æ–∂–Ω–µ–µ, —Ç–∞–∫ –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥—Ä—É–≥–æ–≥–æ –±–ª–æ–∫—á–µ–π–Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ.  

–í –±–∞–∑–æ–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ OFT-—Ç–æ–∫–µ–Ω–∞ –æ—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–æ—Ç–æ—Ä—ã–π –º—ã –Ω–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ ‚Äî [`OAppPreCrimeSimulator`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oapp-evm/contracts/precrime/OAppPreCrimeSimulator.sol).  

–≠—Ç–æ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å [`PreCrime`](https://github.com/LayerZero-Labs/devtools/blob/05443835db976b7a528b883b19ddf02cb7f36d89/packages/oapp-evm/contracts/precrime/PreCrime.sol). –ú–æ–¥—É–ª—å `PreCrime` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–æ—Ñ—á–µ–π–Ω-—Å–∏–º—É–ª—è—Ü–∏–∏ `_lzReceive`**, –ø–æ –∑–∞–¥—É–º–∫–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ä–∞–∑—É —Å–æ –≤—Å–µ–º–∏ —Å–µ—Ç—è–º–∏ –≥–¥–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. 

–ü—Ä–∏ —ç—Ç–æ–º –≤—ã–∑–æ–≤ `OAppPreCrimeSimulator::lzReceiveAndRevert` **–≤—Å–µ–≥–¥–∞** –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è `revert`, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–º—É–ª—è—Ü–∏–∏ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –æ—à–∏–±–∫–∏ `SimulationResult`, –∫—É–¥–∞ –æ–Ω–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `PreCrime::buildSimulationResult`.  

–≠—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –Ω–æ **–≥–ª–∞–≤–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å** PreCrime ‚Äî –µ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–µ–∫–æ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –¢–æ –µ—Å—Ç—å —É –Ω–µ–≥–æ –µ—Å—Ç—å –ø–æ–ª–Ω–æ–º–æ—á–∏—è –æ—Ç–º–µ–Ω—è—Ç—å —Ç—Ä–Ω–∞–∑–∞–∫—Ü–∏–∏ –µ—â–µ –Ω–∞ —ç—Ç–∞–ø–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –∫–∞–Ω–∞–ª–µ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.

–ë—ç–∫–µ–Ω–¥ –º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `PreCrime` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞. –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, –æ–Ω–∞ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –≤ `MessagingChannel`, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø–æ–ø–∞–¥–µ—Ç –≤ Executor.

## –ö–∞–∫–∏–µ –±—ã–≤–∞—é—Ç –æ–ø—Ü–∏–∏ –∏ –∫–∞–∫ –æ–Ω–∏ —É—Å—Ç—Ä–æ–µ–Ω—ã?  

–ü—Ä–æ—Ç–æ–∫–æ–ª LayerZero —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –û–¥–Ω–∞ –∏–∑ —Ç–∞–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π ‚Äî **options**.  

–ú—ã —É–∂–µ –Ω–µ–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `options` –≤ —Å–∞–º–æ–π –ø—Ä–æ—Å—Ç–æ–π —Ñ–æ—Ä–º–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫:  

```solidity
uint128 GAS_LIMIT = 50000; // gasLimit –¥–ª—è Executor
uint128 MSG_VALUE = 0; // msg.value –¥–ª—è lzReceive() (wei)

bytes memory options = OptionsBuilder.newOptions().addExecutorLzReceiveOption(GAS_LIMIT, MSG_VALUE);
```

–ó–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ü–∏–π –æ—Ç–≤–µ—á–∞–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ [`OptionsBuilder`](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oapp-evm/contracts/oapp/libs/OptionsBuilder.sol).  –ü–µ—Ä–≤–æ–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç `OptionsBuilder`, —ç—Ç–æ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `newOptions`.


```solidity
function newOptions() internal pure returns (bytes memory) {
    return abi.encodePacked(TYPE_3);
}
```

–ö–æ–Ω—Ç—Ä–∞–∫—Ç `OFTCore` –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `OAppOptionsType3`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ **–≤—Å–µ –æ–ø—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–∏–ø–∞ `TYPE_3`** —á–µ—Ä–µ–∑ `_assertOptionsType3`.  

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, `OptionsBuilder::addExecutorLzReceiveOption` –∏–º–µ–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyType3`.  

–ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `TYPE_1` –∏ `TYPE_2`? –≠—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏ –æ–ø—Ü–∏–π –∏–∑ LayerZero v1. –í LayerZero v2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `TYPE_3`, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –±–æ–ª–µ–µ –≥–∏–±–∫–∏–π –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.  

#### –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞  

–û–ø—Ü–∏–∏ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤:  
- `TYPE_1` ‚Äî —Å–æ–¥–µ—Ä–∂–∞–ª —Ç–æ–ª—å–∫–æ `gasLimit`.  
- `TYPE_2` ‚Äî –¥–æ–±–∞–≤–ª—è–ª –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ (`native drop`).  
- `TYPE_3` ‚Äî –≤–∫–ª—é—á–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ü–∏–∏.  

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `TYPE_3` —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:  
- —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞,  
- ID –≤–æ—Ä–∫–µ—Ä–∞,  
- —Ä–∞–∑–º–µ—Ä–∞ –æ–ø—Ü–∏–π,  
- —Ç–∏–ø–∞ –æ–ø—Ü–∏–π,  
- —Å–∞–º–∏—Ö –æ–ø—Ü–∏–π.  

–°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ç–∏–ø –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`TYPE_3`):  

![option-type-3-1](./img/options-type-3-1.png)  

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è —Å–∞–º–∏ –æ–ø—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ `addExecutorLzReceiveOption` –¥–∞–Ω–Ω—ã–µ –∫–æ–¥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `ExecutorOptions`:  

```solidity
// OptionsBuilder library
function addExecutorLzReceiveOption(
    bytes memory _options,
    uint128 _gas,
    uint128 _value
) internal pure onlyType3(_options) returns (bytes memory) {
    bytes memory option = ExecutorOptions.encodeLzReceiveOption(_gas, _value);
    return addExecutorOption(_options, ExecutorOptions.OPTION_TYPE_LZRECEIVE, option);
}

// ---------------------------------------------------------

// ExecutorOptions library
function encodeLzReceiveOption(uint128 _gas, uint128 _value) internal pure returns (bytes memory) {
    return _value == 0 ? abi.encodePacked(_gas) : abi.encodePacked(_gas, _value);
}
```

–ó–¥–µ—Å—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è `GAS_LIMIT` –∏ `MSG_VALUE`:  

![options-type-3-5](./img/options-type-3-5.png)  

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è ID –≤–æ—Ä–∫–µ—Ä–∞, —Ä–∞–∑–º–µ—Ä –∏ —Ç–∏–ø –æ–ø—Ü–∏–∏:  

```solidity
function addExecutorOption(
    bytes memory _options,
    uint8 _optionType,
    bytes memory _option
) internal pure onlyType3(_options) returns (bytes memory) {
    return abi.encodePacked(
        _options,
        ExecutorOptions.WORKER_ID,
        _option.length.toUint16() + 1, // —Ä–∞–∑–º–µ—Ä –æ–ø—Ü–∏–∏ + 1 –±–∞–π—Ç –¥–ª—è —Ç–∏–ø–∞
        _optionType,
        _option
    );
}
```

–ó–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:  
- **Worker ID** (–Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏—Ö –≤—Å–µ–≥–æ –¥–≤–∞):
  - Executor (`id = 1`) ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–ø—Ü–∏–∏ —á–µ—Ä–µ–∑ [`ExecutorOptions`](https://github.com/LayerZero-Labs/LayerZero-v2/blob/main/packages/layerzero-v2/evm/messagelib/contracts/libs/ExecutorOptions.sol).  
  - DVN (`id = 2`) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [`DVNOptions`](https://github.com/LayerZero-Labs/LayerZero-v2/blob/main/packages/layerzero-v2/evm/messagelib/contracts/uln/libs/DVNOptions.sol).  
- **Option Type** (–ø–æ–∫–∞ –∏—Ö 5):  
  - `OPTION_TYPE_LZRECEIVE` = 1  
  - `OPTION_TYPE_NATIVE_DROP` = 2  
  - `OPTION_TYPE_LZCOMPOSE` = 3  
  - `OPTION_TYPE_ORDERED_EXECUTION` = 4  
  - `OPTION_TYPE_LZREAD` = 5  

–§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `addExecutorLzReceiveOption`:  
- `worker id = 1` (Executor)  
- `option type = 1` (`OPTION_TYPE_LZRECEIVE`)  
- `option length = 17` (gasLimit = 16 –±–∞–π—Ç + 1 –±–∞–π—Ç type)  

–ï—Å–ª–∏ `value > 0`, –¥–ª–∏–Ω–∞ `option` –±—É–¥–µ—Ç –±–æ–ª—å—à–µ (`gasLimit 16 + value 16 + type 1 = 33 –±–∞–π—Ç–∞`). –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –Ω—É–ª–µ–≤–æ–π `value` –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è.
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –æ–ø—Ü–∏–π –±—É–¥–µ—Ç —Ç–∞–∫–æ–π:  

```bash
0003 01 0011 01 0000000000000000000000000000c350

opt.type | work.id | ex.opt.type.length | ex.opt.type |         option          |
uint16   | uint8   | uint16             | uint8       | uint128         | 0     |
3        | 1       | 17                 | 1           | 50000 (gasLimit)| value |
```

![options-type-3-2-4](./img/options-type-3-2-4.png)  
*–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ TYPE_3*  

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞–Ω–∏—è –æ–ø—Ü–∏–π  

–î—Ä—É–≥–∏–µ –æ–ø—Ü–∏–∏ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [`OptionsBuilder`](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oapp-evm/contracts/oapp/libs/OptionsBuilder.sol).  

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∏–¥—ã –æ–ø—Ü–∏–π –≤ [Remix](https://remix.ethereum.org/#url=https://docs.layerzero.network/LayerZero/contracts/OptionsGenerator.sol&lang=en&optimize=false&runs=200&evmVersion=null&version=soljson-v0.8.26+commit.8a97fa7a.js).

#### –†–∞–±–æ—Ç–∞ —Å gasLimit  

–ü–∞—Ä–∞–º–µ—Ç—Ä `gasLimit` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞ –≥–∞–∑–∞ –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è. "–°—Ç–æ–∏–º–æ—Å—Ç—å" –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–∫–æ–¥–æ–≤ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –±–ª–æ–∫—á–µ–π–Ω–∞—Ö, –ø–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–π —Å–µ—Ç–∏.  

–£ –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫—á–µ–π–Ω–∞ –µ—Å—Ç—å **–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –≥–∞–∑–∞** (`nativeCap`), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ —Å–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è. –ü–æ–ª—É—á–∏—Ç—å —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ `Executor::dstConfig(dstEid)`, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É `DstConfig`:  

```solidity
struct DstConfig {
    uint64 baseGas;
    uint16 multiplierBps;
    uint128 floorMarginUSD;
    uint128 nativeCap;
}
```

- **`baseGas`** ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≥–∞–∑–∞ –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (`lzReceive`, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å—Ç–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏). –≠—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–∞–∑–∞ –¥–ª—è —Å–∞–º–æ–≥–æ –º–∞–ª–µ–Ω—å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.  
- **`multiplierBps`** ‚Äî –º–Ω–æ–∂–∏—Ç–µ–ª—å –≤ **–±–∞–∑–∏—Å–Ω—ã—Ö –ø—É–Ω–∫—Ç–∞—Ö** (1 bps = 0,01%). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≥–∞–∑–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.  
- **`floorMarginUSD`** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç–∞ –≤ USD –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞ –∏ –ø–æ–∫—Ä—ã—Ç–∏—è –∑–∞—Ç—Ä–∞—Ç. –ï—Å–ª–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ USD –Ω–∏–∂–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –æ–Ω–∞ **—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `floorMarginUSD`**.  
- **`nativeCap`** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –≥–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–π OApp –º–æ–∂–µ—Ç —É–∫–∞–∑–∞—Ç—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–µ—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.  

–≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É:  

```bash
npx hardhat lz:oapp:config:get:executor
```

#### Native drop  

`Native drop` ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∞ **–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤** –≤ —Å–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ `addExecutorLzReceiveOption` –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä (`MSG_VALUE`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ.  

–ï—Å—Ç—å —Ç–∞–∫–∂–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è –æ–ø—Ü–∏—è `addExecutorNativeDropOption`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `amount` (—Å—É–º–º—É) –∏ `receiver` (–∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è) –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —É–∫–∞–∑–∞–Ω–∏—è `gasLimit`:  

```solidity
function addExecutorNativeDropOption(
    bytes memory _options,
    uint128 _amount,
    bytes32 _receiver
) internal pure onlyType3(_options) returns (bytes memory) {
    bytes memory option = ExecutorOptions.encodeNativeDropOption(_amount, _receiver);
    return addExecutorOption(_options, ExecutorOptions.OPTION_TYPE_NATIVE_DROP, option);
}
```

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:* –†–∞–Ω–µ–µ –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ –±—ã–ª–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ native drop - 0.5 —Ç–æ–∫–µ–Ω–∞ –≤ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–µ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ —Å–µ—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä ETH, BNB –∏ —Ç.–¥.). –ë–æ–ª–µ–µ —Ç–æ–≥–æ, –±—ã–ª–æ –ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏–µ, —á—Ç–æ —á–µ–º –±–æ–ª—å—à–µ —Å—É–º–º–∞, —Ç–µ–º –±–æ–ª—å—à–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –ø–µ—Ä–µ–¥–∞—á—É. –°–µ–π—á–∞—Å –æ–± —ç—Ç–æ–º –Ω–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–π, –Ω–æ –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å –≤ –≤–∏–¥—É —á—Ç–æ —Ç–∞–∫–æ–≥–æ —Ä–æ–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–æ–∂–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ  

–°—Ç–∞–Ω–¥–∞—Ä—Ç OFT –æ—Å—Ç–∞–≤–∏–ª –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ. –û–Ω –≥–∏–±–∫–∏–π, –¥–∞–µ—Ç —à–∏—Ä–æ–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∞ "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" —É–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–µ—Å—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ ERC20 OFT-—Ç–æ–∫–µ–Ω–∞.  

–û—Ç–¥–µ–ª—å–Ω–æ —Å—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å —É–¥–æ–±—Å—Ç–≤–æ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞:  
- –ì–æ—Ç–æ–≤—ã–µ —Ç–µ—Å—Ç—ã;
- –°–∫—Ä–∏–ø—Ç—ã hardhat –∏ foundry –¥–ª—è –¥–µ–ø–ª–æ—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OApps –≤ —Ä–∞–∑–Ω—ã—Ö –±–ª–æ–∫—á–µ–π–Ω–∞—Ö;
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≥–∞–∑–∞.

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∫–∞–Ω–∞–ª–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö LayerZero, –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å —Ä–∏—Å–∫ –ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –∫–µ–π—Å–æ–≤, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ —Å–ª–æ–∂–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏.  

–ü–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ:  
- –¢—â–∞—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω  
- –ü—Ä–æ–≤–æ–¥–∏—Ç—å –∞—É–¥–∏—Ç –∫–æ–¥–∞  
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –º–µ–π–Ω–Ω–µ—Ç–µ, —Ç–∞–∫ –∫–∞–∫ –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—á–µ–π–Ω (DVN, —Å—Ç–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, Executor). –í —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–µ—Ç—è—Ö –æ—Ü–µ–Ω–∫–∞ –∫–æ–º–∏—Å—Å–∏–π –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.  

–ü—Ä–∞–∫—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –¥–∞–∂–µ –∫—Ä—É–ø–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ Tether, –Ω–µ –∑–∞—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω—ã –æ—Ç –æ—à–∏–±–æ–∫. –ê—É–¥–∏—Ç –∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.  

#### –°—Å—ã–ª–∫–∏  
- [GitHub: LayerZero v2](https://github.com/LayerZero-Labs/LayerZero-v2)  
- [GitHub: LayerZero-Labs/devtools](https://github.com/LayerZero-Labs/devtools/blob/main/packages/oft-evm/contracts)  
- [Docs: LayerZero v2](https://docs.layerzero.network/v2)  
- [Docs: Solidity API](https://docs.layerzero.network/v2/developers/evm/technical-reference/api#endpointv2)  
- [Docs: LayerZero Glossary](https://docs.layerzero.network/v2/home/glossary#lzcompose)  
- [Docs: USDT0](https://docs.usdt0.to/)  
- [Audit: USDT0](https://github.com/Everdawn-Labs/usdt0-audit-reports)  
- [LayerZeroScan](https://layerzeroscan.com/)