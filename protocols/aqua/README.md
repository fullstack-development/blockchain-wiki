# Aqua protocol

**–ê–≤—Ç–æ—Ä:** [–ü–∞–≤–µ–ª –ù–∞–π–¥–∞–Ω–æ–≤](https://github.com/PavelNaydanov) üïµÔ∏è‚Äç‚ôÇÔ∏è

[Aqua](https://1inch.com/aqua) - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é (shared liquidity layer), —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∫–æ–º–∞–Ω–¥–æ–π 1inch, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∞–∫—Ç–∏–≤—ã —Å—Ä–∞–∑—É –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ –ø—É–ª–∞—Ö –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏.

–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ª–æ—á–∏—Ç—å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å, –ø–æ—Å—Ç–∞–≤—â–∏–∫ –∏–ª–∏ –º–µ–π–∫–µ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –Ω–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ Aqua –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤ –∫–æ—Ç–æ—Ä–æ–π —ç—Ç–∏ –±–∞–ª–∞–Ω—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

–û–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∫—Ä–∞—Å–∏–≤—ã–º —Å–ª–æ–≥–∞–Ω–æ–º *"Shared liquidity to unlock DeFi capital"*.

**–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã**

–ü—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–∏–∑–≤–∞–Ω —Ä–µ—à–∏—Ç—å —Ç—Ä–∏ –ø—Ä–æ–±–ª–µ–º—ã:
- **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–ø–∏—Ç–∞–ª–∞:** –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è 1inch –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –ª–∏—à—å –º–∞–ª–∞—è —á–∞—Å—Ç—å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –≤ –ø—É–ª–∞—Ö —É—á–∞—Å—Ç–≤—É–µ—Ç –Ω–∞ —Ä—ã–Ω–∫–µ. –ë–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤—Ä–µ–º–µ–Ω–∏ —ç—Ç–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –Ω—É–∂–Ω–∞ –¥–ª—è —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –æ–±–º–µ–Ω–µ.
- **–§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏:** –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏, –∫–∞–ø–∏—Ç–∞–ª –¥–æ–ª–∂–µ–Ω —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—É–ª—ã, —É—Ä–æ–≤–Ω–∏ –∫–æ–º–∏—Å—Å–∏–π –∏ –º–µ—Ö–∞–Ω–∏–∑–º—ã. –≠—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å.
- **–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∫–∞–ø–∏—Ç–∞–ª–∞:** –õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –≤ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ø—É–ª –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏, –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–∞—Ö, DAO, –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ –∏ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö –∑–∞—Ä–∞–±–æ—Ç–∫–∞. –ß—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º –≤ –ø—É–ª—ã. –≠—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞—Å –∫ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∫–∞–ø–∏—Ç–∞–ª–∞ –∏–∑ –ø—É–Ω–∫—Ç–∞ 1.

|–ü—Ä–æ–±–ª–µ–º–∞|–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ AMM|Aqua|
|--------|----------------|----|
|Idle liquidity| 85-97% –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç|–û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–∞–ø–∏—Ç–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö|
|Fragmentation|–ö–∞–ø–∏—Ç–∞–ª –¥–µ–ª–∏—Ç—Å—è –ø–æ –ø—É–ª–∞–º/–ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º|–û–¥–Ω–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö|
|Locked capital|–¢–æ–∫–µ–Ω—ã —Ç–µ—Ä—è—é—Ç composability|–°—Ä–µ–¥—Å—Ç–≤–∞ –æ—Å—Ç–∞—é—Ç—Å—è —É –º–µ–π–∫–µ—Ä–∞|

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ?

–†–∞–±–æ—Ç–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ [whitepaper](https://github.com/1inch/aqua/blob/main/whitepaper/aqua-dev-preview.md).

![](./images/aqua-architecture.png)
// –°—Ö–µ–º–∞ –≤–∑—è—Ç–∞ –∏–∑ whitepaper

**–û—Å–Ω–æ–≤–Ω–æ–π workflow:**

- `ship()` ‚Äî –ú–µ–π–∫–µ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- `dock()` ‚Äî –ú–µ–π–∫–µ—Ä –æ–±–Ω—É–ª—è–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- `pull()` ‚Äî –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∑–∞–±–∏—Ä–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã —É –º–µ–π–∫–µ—Ä–∞ –ø—Ä–∏ —Å–≤–æ–ø–µ –≤ –ø–æ–ª—å–∑—É —Ç–µ–π–∫–µ—Ä–∞
- `push()` ‚Äî –¢–µ–π–∫–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω—ã –≤ –ø–æ–ª—å–∑—É –º–µ–π–∫–µ—Ä–∞

**–ü–æ—è—Å–Ω–µ–Ω–∏—è –∫ workflow:**

–ú–µ–π–∫–µ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –Ω–∞ Aqua —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏ [ship()](https://github.com/1inch/aqua/blob/main/src/Aqua.sol#L40) –∏ [dock()](https://github.com/1inch/aqua/blob/main/src/Aqua.sol#L54) –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–æ–≤ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–Ω–∞ —Å—Ö–µ–º–µ Aqua App) –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.

–°—Ç—Ä–∞—Ç–µ–≥–∏—è - —ç—Ç–æ —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –º–µ–π–∫–µ—Ä–∞. –ü–æ —Å—É—Ç–∏, —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Ç–µ–π–∫–µ—Ä–∞ —Å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é –º–µ–π–∫–µ—Ä–∞.

> –ü–æ—á–µ–º—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ? –ü–æ—Ç–æ–º—É —á—Ç–æ —á–∞—Å—Ç–∏—á–Ω–æ —ç—Ç–æ —É–∂–µ –¥–µ–ª–∞–µ—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç Aqua, –æ–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–µ–ª–∞–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä –∞–∫—Ç–∏–≤–æ–≤. –û–¥–Ω–∞–∫–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –æ–±–º–µ–Ω–∞, —É—Å–ª–æ–≤–∏—è, –ø—Ä–æ—Ü–µ—Å—Å - –≤—Å–µ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ Aqua App/—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

–¢–µ–π–∫–µ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç c –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –≤ Aqua [push()](https://github.com/1inch/aqua/blob/main/src/Aqua.sol#L72) –∏ [pull()](https://github.com/1inch/aqua/blob/main/src/Aqua.sol#L63). –∏ —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ–±–º–µ–Ω –º–µ–∂–¥—É —Ç–µ–π–∫–µ—Ä–æ–º –∏ –º–µ–π–∫–µ—Ä–æ–º –ø–æ–ø—É—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –Ω–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ Aqua.

–í–æ–∑—å–º–µ–º [–ø—Ä–∏–º–µ—Ä](https://github.com/1inch/aqua/blob/main/examples/apps/XYCSwap.sol), –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–∞–ø –º–µ–∂–¥—É –º–µ–π–∫–µ—Ä–æ–º –∏ —Ç–µ–π–∫–µ—Ä–æ–º —á–µ—Ä–µ–∑ Aqua App, –∫–æ—Ç–æ—Ä–æ–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é A.

–í–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å—Ö–µ–º—É –Ω–∏–∂–µ. –°—Ö–µ–º–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤ –∫–æ—Ç–æ—Ä–æ–º —Ç–µ–π–∫–µ—Ä –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç ETH –Ω–∞ USDT –º–µ–π–∫–µ—Ä–∞.

![](./images/aqua-swap-process.png)

1. –°–Ω–∞—á–∞–ª–∞ –º–µ–π–∫–µ—Ä –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ A –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π USDT. –î–ª—è —ç—Ç–æ–≥–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `ship(address app, bytes calldata strategy, [USDT], [100e6]))`. –≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å USDT –º–µ–π–∫–µ—Ä–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ê.
2. –¢–µ–ø–µ—Ä—å —Ç–µ–π–∫–µ—Ä –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `swap()` –Ω–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ `AquaApp.sol`. –≠—Ç–æ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –æ–±–º–µ–Ω ETH –Ω–∞ USDT.
3. `AquaApp.sol` –±—É–¥–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –∫—É—Ä—Å –æ–±–º–µ–Ω–∞ –∏ –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `pull()`, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–≤–µ–¥–µ—Ç USDT —Ç–µ–π–∫–µ—Ä—É –æ—Ç –º–µ–π–∫–µ—Ä–∞.
4. `AquaApp.sol` —Å–¥–µ–ª–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤ –Ω–∞ —Ç–µ–π–∫–µ—Ä–∞ (–ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è, —á—Ç–æ —Ç–µ–π–∫–µ—Ä - —ç—Ç–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –≤ —ç—Ç–æ–π —Å—Ö–µ–º–µ).
5. –í–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞, —Ç–µ–π–∫–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏—Ç –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ USDT –∏ –≤—ã–∑–æ–≤–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `push()` –Ω–∞ Aqua, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–≤–µ–¥–µ—Ç ETH –º–µ–π–∫–µ—Ä—É –æ—Ç —Ç–µ–π–∫–µ—Ä–∞.

## –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã Aqua

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ —Ä–∞–∑–±–µ—Ä–µ–º —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Aqua. –î–ª—è —ç—Ç–æ–≥–æ –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –æ–Ω–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç.

–û–±—â–∏–π —Å–ø–∏—Å–æ–∫ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤:
- [AquaApp](https://github.com/1inch/aqua/blob/main/src/AquaApp.sol): –ë–∞–∑–æ–≤—ã–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å Aqua
- [Aqua](https://github.com/1inch/aqua/blob/main/src/Aqua.sol): Core —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª –∏ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –æ–±–º–µ–Ω –º–µ–∂–¥—É –º–µ–π–∫–µ—Ä–æ–º –∏ —Ç–µ–π–∫–µ—Ä–æ–º
- [BalanceLib](https://github.com/1inch/aqua/blob/main/src/libs/Balance.sol): –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –º–µ–π–∫–µ—Ä–∞
- [AquaRouter](https://github.com/1inch/aqua/blob/main/src/AquaRouter.sol): –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º

## Aqua app

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –º–µ–π–∫–µ—Ä —Å–º–æ–≥ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —ç—Ç—É —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Å–æ–∑–¥–∞—Ç—å. –ó–¥–µ—Å—å –Ω—É–∂–Ω—ã "–±–∏–ª–¥–µ—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π", –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é. –ó–¥–µ—Å—å –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç [AquaApp.sol](https://github.com/1inch/aqua/blob/main/src/AquaApp.sol), –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –≤–∞—à —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è.

```solidity
import { TransientLock, TransientLockLib } from "@1inch/solidity-utils/contracts/libraries/TransientLock.sol";
import { IAqua } from "./interfaces/IAqua.sol";

// –ë–∞–∑–æ–≤—ã–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
abstract contract AquaApp {
    using TransientLockLib for TransientLock;

    ...

    // –ê–¥—Ä–µ—Å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ Aqua
    IAqua public immutable AQUA;

    // –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Ä–µ–µ–Ω—Ç—Ä–∞–Ω—Å–∏
    mapping(address maker => mapping(bytes32 strategyHash => TransientLock)) internal _reentrancyLocks;

    // –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –∑–∞—â–∏—Ç—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ç —Ä–µ–µ–Ω—Ç—Ä–∞–Ω—Å–∏
    modifier nonReentrantStrategy(address maker, bytes32 strategyHash) {
        _reentrancyLocks[maker][strategyHash].lock();
        _;
        _reentrancyLocks[maker][strategyHash].unlock();
    }

    constructor(IAqua aqua) {
        AQUA = aqua;
    }

    // –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤–∞—à —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–¥–∞—á–∏ –∞–∫—Ç–∏–≤–æ–≤ –æ—Ç —Ç–µ–π–∫–µ—Ä–∞ –º–µ–π–∫–µ—Ä—É –±–µ–∑–æ–ø–∞—Å–Ω—ã–º.
    function _safeCheckAquaPush(address maker, bytes32 strategyHash, address token, uint256 expectedBalance) internal view {

        require(_reentrancyLocks[maker][strategyHash].isLocked(), MissingNonReentrantModifier());

        (uint256 newBalance,) = AQUA.rawBalances(maker, address(this), strategyHash, token);
        require(newBalance >= expectedBalance, MissingTakerAquaPush(token, newBalance, expectedBalance));
    }
}
```

–ö–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–º–µ—Ç–∏—Ç—å, —Ä–µ–≥–ª–∞–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞—à–µ–≥–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–≤—Å–µ–º –Ω–µ —Å—Ç—Ä–æ–≥–∏–π. –í—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º.

```solidity
contract MyAquaApp is AquaApp {
    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
    struct Strategy {
        address maker;
        address token0;
        address token1;
        uint256 feeBps;
        bytes32 salt; // –°–æ–ª—å, –∫–æ—Ç–æ—Ä–∞—è —Å–¥–µ–ª–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —É–Ω–∏–∫–∞–ª—å–Ω–æ–π
    }

    constructor(IAqua aqua) AquaApp(aqua) { }

    // –§—É–Ω–∫—Ü–∏—è —Å–≤–∞–ø–∞
    function swapExactIn(
        Strategy calldata strategy,
        bool zeroForOne,
        uint256 amountIn,
        uint256 amountOutMin,
        address to,
        bytes calldata takerData
    )
        external
        // –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–µ–Ω—Ç—Ä–∞–Ω—Å–∏
        nonReentrantStrategy(strategy.maker, keccak256(abi.encode(strategy)))
        returns (uint256 amountOut)
    {
        bytes32 strategyHash = keccak256(abi.encode(strategy));

        // –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ amountOut
        require(amountOut >= amountOutMin, InsufficientOutputAmount(amountOut, amountOutMin));

        // –ü–µ—Ä–µ–¥–∞—á–∞ –∞–∫—Ç–∏–≤–æ–≤ —Ç–µ–π–∫–µ—Ä—É –æ—Ç –º–µ–π–∫–µ—Ä–∞
        AQUA.pull(strategy.maker, strategyHash, tokenOut, amountOut, to);

        // –û–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤ –Ω–∞ —Ç–µ–π–∫–µ—Ä–∞ –≥–¥–µ –æ–Ω –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–æ–≤ –æ—Ç –º–µ–π–∫–µ—Ä–∞
        ISwapCallback(msg.sender).swapCallback(tokenIn, tokenOut, amountIn, amountOut, strategy.maker, address(this), strategyHash, takerData);

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –∞–∫—Ç–∏–≤–æ–≤ –º–µ–π–∫–µ—Ä—É –æ—Ç —Ç–µ–π–∫–µ—Ä–∞
        _safeCheckAquaPush(strategy.maker, strategyHash, tokenIn, balanceIn + amountIn);
    }
}
```

–ù—É–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ "–±–∏–ª–¥–µ—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π" - —ç—Ç–æ —Å—É—â–Ω–æ—Å—Ç—å –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, –∫–æ—Ç–æ—Ä–∞—è –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–π. –ü—Ä–∏ —ç—Ç–æ–º –ª—é–±–æ–π –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è/—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏. –¢–æ –µ—Å—Ç—å –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –º–µ–π–∫–µ—Ä—É –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–≤–æ–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–¥ —Å–≤–æ—é –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å, —Ä–∞–±–æ—Ç–∞—é—â—É—é —á–µ—Ä–µ–∑ Aqua.

## Aqua

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç [Aqua.sol](https://github.com/1inch/aqua/blob/main/src/Aqua.sol) —Ä–∞–¥–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –∑–¥–µ—Å—å –∏ —Å–æ–±—Ä–∞–ª–∏—Å—å. –ö–æ–¥ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π –∏ –µ–≥–æ —Å–æ–≤—Å–µ–º –Ω–µ–º–Ω–æ–≥–æ. –ë—É–∫–≤–∞–ª—å–Ω–æ 81 —Å—Ç—Ä–æ—á–∫–∞.

–ö–ª—é—á–µ–≤–æ–µ –∑–¥–µ—Å—å - —ç—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π mapping –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–ª—é—á–µ–π –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫—Ç–æ, –∫–æ–º—É, —Å–∫–æ–ª—å–∫–æ –∏ –∫–∞–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

```solidity
struct Balance {
    uint248 amount;
    uint8 tokensCount;
}

mapping(address maker =>
    mapping(address app =>
        mapping(bytes32 strategyHash =>
            mapping(address token => Balance)))) private _balances;
```

–°—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ `Balance` —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ `amount` (—Å—É–º–º–∞ —Ç–æ–∫–µ–Ω–∞, —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–∞—è –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏), –Ω–æ –∏ `tokensCount` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å–µ—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç–∫–æ–Ω–æ–º–∏—Ç—å –≥–∞–∑ –Ω–∞ —á—Ç–µ–Ω–∏–∏ –∏—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ [Balance.sol](https://github.com/1inch/aqua/blob/main/src/libs/Balance.sol#L39) `amount` –∏ `tokensCount` —É–ø–∞–∫–æ–≤—ã–≤–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω —Å–ª–æ—Ç.

–õ–µ–∫—Å–∏—á–µ—Å–∫–∏ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è `tokensCount` —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π mapping, –Ω–æ —ç—Ç–æ –¥–æ–±–∞–≤–∏–ª–æ –±—ã –ª–∏—à–Ω–µ–µ —á—Ç–µ–Ω–∏–µ –∏–∑ storage.

### –†–æ—É—Ç–µ—Ä

–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç [AquaRouter.sol](https://github.com/1inch/aqua/blob/main/src/AquaRouter.sol) —è–≤–ª—è–µ—Ç—Å—è —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º.

![](./images/aqua-router.png)

–ö–æ–¥ —Ä–æ—É—Ç–µ—Ä–∞ –ø—É—Å—Ç–æ–π –∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å–ª–µ–¥—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
1. [Aqua.sol](https://github.com/1inch/aqua/blob/main/src/Aqua.sol): –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É—á–µ—Ç–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤.
2. [Simulator.sol](https://github.com/1inch/solidity-utils/blob/master/contracts/mixins/Simulator.sol): –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Å–∏–º—É–ª—è—Ü–∏–∏ –≤—ã–∑–æ–≤–æ–≤ —á–µ—Ä–µ–∑ delegatecall –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–ª–æ–∫—á–µ–π–Ω–∞.
3. [Multicall.sol](https://github.com/1inch/solidity-utils/blob/master/contracts/mixins/Multicall.sol): –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–∑–æ–≤–æ–≤ —Ä–æ—É—Ç–µ—Ä–∞ –≤ –µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∏ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã `Simulator.sol` –∏ `Multicall.sol` –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–ø–∫–æ–¥ `delegatecall` –¥–ª—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–∑–æ–≤–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ `Aqua.sol`.

```solidity
contract Simulator {
    error Simulated(address delegatee, bytes data, bool success, bytes result);

    function simulate(address delegatee, bytes calldata data) external payable {
        (bool success, bytes memory result) = delegatee.delegatecall(data);
        // –ü—Ä–µ—Ä—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –≤—ã–∑–æ–≤–µ
        revert Simulated(delegatee, data, success, result);
    }
}
```

```solidity
contract Multicall {
    function multicall(bytes[] calldata data) external {
        for (uint256 i = 0; i < data.length; i++) {
            // –í—ã–∑–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ —Å–∞–º–æ–º —Å–µ–±–µ
            (bool success,) = address(this).delegatecall(data[i]);
            if (!success) {
               // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞
               ...
            }
        }
    }
}
```

### –§—É–Ω–∫—Ü–∏—è ship

–ß—Ç–æ–±—ã –º–µ–π–∫–µ—Ä—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ Aqua –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é [ship()](https://github.com/1inch/aqua/blob/main/src/Aqua.sol#L40). –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –Ω–∞ Aqua.

–ü—Ä–∏ —ç—Ç–æ–º, —Ñ–∏–∑–∏—á–µ—Å–∫–∏, –∞–∫—Ç–∏–≤—ã –æ—Å—Ç–∞—é—Ç—Å—è —É –º–µ–π–∫–µ—Ä–∞ –∏–ª–∏ –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ –∏–ª–∏ EOA –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ –º–µ–π–∫–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Aqua.

–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ `ship()`.

```solidity
function ship(address app, bytes calldata strategy, address[] calldata tokens, uint256[] calldata amounts) external returns(bytes32 strategyHash) {
    // –•–µ—à–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
    strategyHash = keccak256(strategy);
    uint8 tokensCount = tokens.length.toUint8();

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –Ω–µ –ø—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –º–µ–π–∫–µ—Ä –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã
    require(tokensCount != _DOCKED, MaxNumberOfTokensExceeded(tokensCount, _DOCKED));

    emit Shipped(msg.sender, app, strategyHash, strategy);
    for (uint256 i = 0; i < tokens.length; i++) {
        Balance storage balance = _balances[msg.sender][app][strategyHash][tokens[i]];

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ —Ç–æ–∫–µ–Ω—É –±–∞–ª–∞–Ω—Å—ã –Ω—É–ª–µ–≤—ã–µ
        require(balance.tokensCount == 0, StrategiesMustBeImmutable(app, strategyHash));

        // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã
        balance.store(amounts[i].toUint248(), tokensCount);
        emit Pushed(msg.sender, app, strategyHash, tokens[i], amounts[i]);
    }
}
```

### –§—É–Ω–∫—Ü–∏—è dock

–ß—Ç–æ–±—ã –º–µ–π–∫–µ—Ä—É —Å–Ω—è—Ç—å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é [dock()](https://github.com/1inch/aqua/blob/main/src/Aqua.sol#L54). –í—ã–∑–æ–≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω—É–ª–∏—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –Ω–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ Aqua.

–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ `dock()`.

```solidity
function dock(address app, bytes32 strategyHash, address[] calldata tokens) external {
    for (uint256 i = 0; i < tokens.length; i++) {
        // –ü–æ–ª—É—á–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
        Balance storage balance = _balances[msg.sender][app][strategyHash][tokens[i]];

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏
        require(balance.tokensCount == tokens.length, DockingShouldCloseAllTokens(app, strategyHash));

        // –û–±–Ω—É–ª—è–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –ø–æ —Ç–æ–∫–µ–Ω—É
        balance.store(0, _DOCKED);
    }
    emit Docked(msg.sender, app, strategyHash);
}
```

### –§—É–Ω–∫—Ü–∏—è pull

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ç–µ–π–∫–µ—Ä –º–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –º–µ–π–∫–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é [pull()](https://github.com/1inch/aqua/blob/main/src/Aqua.sol#L63) –Ω–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ Aqua. –í—ã–∑–æ–≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–∏—Ç –±–∞–ª–∞–Ω—Å—ã –º–µ–π–∫–µ—Ä–∞ –∏ –ø–µ—Ä–µ–≤–µ–¥–µ—Ç –∞–∫—Ç–∏–≤—ã –æ—Ç –º–µ–π–∫–µ—Ä–∞ —Ç–µ–π–∫–µ—Ä—É.

```solidity
function pull(address maker, bytes32 strategyHash, address token, uint256 amount, address to) external {
    Balance storage balance = _balances[maker][msg.sender][strategyHash][token];
    (uint248 prevBalance, uint8 tokensCount) = balance.load();

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
    balance.store(prevBalance - amount.toUint248(), tokensCount);

    // –¢—Ä–∞–Ω—Å—Ñ–µ—Ä –æ—Ç –º–µ–π–∫–µ—Ä–∞ –∫ —Ç–µ–π–∫–µ—Ä—É
    IERC20(token).safeTransferFrom(maker, to, amount);
    emit Pulled(maker, msg.sender, strategyHash, token, amount);
}
```

### –§—É–Ω–∫—Ü–∏—è push

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ç–µ–π–∫–µ—Ä –º–æ–≥ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–≤–æ—é —á–∞—Å—Ç—å –∞–∫—Ç–∏–≤–∞ –º–µ–π–∫–µ—Ä—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é [push()](https://github.com/1inch/aqua/blob/main/src/Aqua.sol#L63) –Ω–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ Aqua. –í—ã–∑–æ–≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–∏—Ç –±–∞–ª–∞–Ω—Å—ã —Ç–µ–π–∫–µ—Ä–∞ –∏ –ø–µ—Ä–µ–≤–µ–¥–µ—Ç –∞–∫—Ç–∏–≤—ã –æ—Ç —Ç–µ–π–∫–µ—Ä–∞ –∫ –º–µ–π–∫–µ—Ä—É.

```solidity
function push(address maker, address app, bytes32 strategyHash, address token, uint256 amount) external {
    Balance storage balance = _balances[maker][app][strategyHash][token];
    (uint248 prevBalance, uint8 tokensCount) = balance.load();
    require(tokensCount > 0 && tokensCount != _DOCKED, PushToNonActiveStrategyPrevented(maker, app, strategyHash, token));

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –º–µ–π–∫–µ—Ä–∞
    balance.store(prevBalance + amount.toUint248(), tokensCount);

    // –¢—Ä–∞–Ω—Å—Ñ–µ—Ä –æ—Ç —Ç–µ–π–∫–µ—Ä–∞ –∫ –º–µ–π–∫–µ—Ä—É
    IERC20(token).safeTransferFrom(msg.sender, maker, amount);
    emit Pushed(maker, app, strategyHash, token, amount);
}
```

## –†–∏—Å–∫–∏ –∏–ª–∏ —á—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å

–ü—Ä–æ—Ç–æ–∫–æ–ª –Ω–µ –ø–∞–Ω–∞—Ü–µ—è, –æ–Ω –Ω–µ —Ä–µ—à–∞–µ—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ —É–∂–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö AMM —Å –∏—Ö –ø—É–ª–∞–º–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω—É–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç —Ñ—Ä–æ–Ω—Ç—Ä–∞–Ω –∞—Ç–∞–∫ –≤ Aqua —Ä–æ–≤–Ω–æ —Ç–∞–∫–∞—è –∂–µ, –∫–∞–∫ –∏ –≤ Uniswap. –ù–∏–∫–∞–∫–∞—è! –í –∫–∞–∫–æ–º-—Ç–æ –ø–æ–Ω–∏–º–∞–Ω–∏–∏ –≤ Uniswap –µ—Å—Ç—å –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è, —Ç–æ–≥–¥–∞ –∫–∞–∫ –≤ Aqua —ç—Ç–æ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ "–±–∏–ª–¥–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π".

–í –º–æ–º–µ–Ω—Ç–µ –º–µ–π–∫–µ—Ä—ã –±—É–¥—É—Ç —Ç–∞–∫–∂–µ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω—ã –Ω–µ–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –ø–æ—Ç–µ—Ä—è–º. –•–æ—Ç—è —Ç—É—Ç —ç—Ç–æ –±—É–¥–µ—Ç —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

**–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–∫–∞–º–∞**

–ú–µ–π–∫–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–æ–≤–∏–ª –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞ –ø–æ—Ç–µ—Ä—è–µ—Ç —Å–≤–æ–∏ –∞–∫—Ç–∏–≤—ã. –í —ç—Ç–æ–º –ø–ª–∞–Ω–µ –º–µ–π–∫–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –æ—Å–æ–∑–Ω–∞–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å–≤–æ—é –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

**–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –º–µ–π–∫–µ—Ä–∞**

–¢–µ–π–∫–µ—Ä —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –º–µ–π–∫–µ—Ä–æ–º –¥–æ–ª–∂–µ–Ω –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã –≤ Aqua –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–æ–≤. –ü–æ—ç—Ç–æ–º—É –≤—ã–±–æ—Ä –º–µ–π–∫–µ—Ä–∞ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –æ–±–º–µ–Ω–∞ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –º–µ–π–∫–µ—Ä–∞–º–∏ —á–µ—Ä–µ–∑ Aqua –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –æ—Å—Ç–∞–µ—Ç—Å—è –∑–∞–¥–∞—á–µ–π —Ç–µ–π–∫–µ—Ä–∞.

Aqua –≤ —ç—Ç–æ–º –ø–ª–∞–Ω–µ –Ω–µ –¥–æ–ª–∂–Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –º–µ–π–∫–µ—Ä–∞, –æ–Ω–∞ –≤—Å–µ–≥–æ –ª–∏—à—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–ª–æ–π.

**–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ç–µ—Ä–∏ –º–µ–π–∫–µ—Ä–∞**

–í—ã–±—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–µ –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –≤—ã–≥–æ–¥–Ω–æ–π. –ü–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –ø—Ä–æ –∑–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
- –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º —Ç–∏–ø–∞–º
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –±–∞–ª–∞–Ω—Å—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

**–í–∑–ª–æ–º —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞**

–û—Ç –≤–∑–ª–æ–º–∞ –º–æ–∂–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ö–æ–¥—è —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞—É–¥–∏—Ç—ã. –í —ç—Ç–æ–º –ø–ª–∞–Ω–µ —Å–∞–º–∞ Aqua –ø—Ä–æ—Å—Ç–∞ –∏ —è –Ω–µ –¥—É–º–∞—é, —á—Ç–æ –≤ –Ω–µ–π –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ö–∞–∫–µ—Ä–æ–≤. –û–¥–Ω–∞–∫–æ –∏—Ö –ø–æ–ª–µ –±–∏—Ç–≤—ã –±—É–¥–µ—Ç –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö. –ü–æ—ç—Ç–æ–º—É —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ –∑–∞—â–∏—Ç—ã.

## –í—ã–≤–æ–¥

–ü—Ä–æ—Ç–æ–∫–æ–ª –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–º —Ç–∏–ø–æ–º DEX, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ –ø—Ä–æ–¥—É–∫—Ç–æ–º. –≠—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª–∏—Ç—å –º–µ–π–∫–µ—Ä–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å–≤–æ—é –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ª–æ—á–∏—Ç—å –µ–µ.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Aqua –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –µ–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º —Å–æ–≤–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–∏ —ç—Ç–æ–º —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –º–µ–π–∫–µ—Ä–∞.

–ë–µ–∑—É—Å–ª–æ–≤–Ω–æ —Ç–æ, —á—Ç–æ –º–µ–π–∫–µ—Ä–∞–º –¥–æ–ª–∂–Ω–æ —Å—Ç–∞—Ç—å —Å–∏–ª—å–Ω–æ –ø—Ä–æ—â–µ –∏ –≤—ã–≥–æ–¥–Ω–µ–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å–≤–æ–π –∫–∞–ø–∏—Ç–∞–ª —á–µ—Ä–µ–∑ Aqua –ø—Ä–æ—Ç–æ–∫–æ–ª. –ó–∞—Ç—Ä–∞—Ç—ã —Ç–µ–π–∫–µ—Ä–æ–≤ –º–æ–≥—É—Ç —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è –∑–∞ —Å—á–µ—Ç –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω–æ–≥–æ –º–µ–π–∫–µ—Ä–∞, –ø–æ–∏—Å–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç –≥–∞–∑–∞, –µ—Å–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–ª–æ–∂–Ω–∞—è. –ù–æ –ø—Ä–∏ —ç—Ç–æ–º —Ä–∞—Å—Ö–æ–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∏–≤–µ–ª–∏—Ä–æ–≤–∞–Ω—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

–ü—Ä–∏ —ç—Ç–æ–º, –ø—Ä–∏ –≤—Å–µ–º, –¥–ª—è "–±–∏–ª–¥–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–æ–≤–æ–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ –æ–Ω–∏ –º–æ–≥—É—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–≤–æ–∏ —Å–∏–ª—ã –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Å–ø–µ—à–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.

–ù–∞ –º–æ–π –≤–∑–≥–ª—è–¥, Aqua - —ç—Ç–æ –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é. –ò –ø–æ–∂–∞–ª—É–π —ç—Ç–æ –æ–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –Ω–æ–≤–∏–Ω–æ–∫ –≤ DeFi –∫–æ–Ω—Ü–∞ 2025-–≥–æ, –Ω–∞—á–∞–ª–∞ 2026-–≥–æ. –ñ–¥–µ–º –ø–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –Ω–∞ –±–∞–∑–µ Aqua.

P.S. –ò–Ω—Ç–µ—Ä–µ—Å 1inch –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ Aqua –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º [SwapVm](https://github.com/1inch/swap-vm). –ù–æ —ç—Ç–æ —Å–æ–≤—Å–µ–º –¥—Ä—É–≥–∞—è –∏—Å—Ç–æ—Ä–∏—è!

## Links

1. [Whitepaper](https://github.com/1inch/aqua/blob/main/whitepaper/aqua-dev-preview.md)
2. [–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –∫–æ–¥–æ–º](https://github.com/1inch/aqua/blob/main/README.md)
3. –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π [–¥–∞—à–±–æ—Ä–¥](https://dune.com/1inch/idle) 1inch. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–ø–∏—Ç–∞–ª–∞ –≤–Ω—É—Ç—Ä–∏ –ø—É–ª–æ–≤ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏