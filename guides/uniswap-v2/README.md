# Uniswap-v2 smart contracts fork

**–ê–≤—Ç–æ—Ä:** [–ê–ª–µ–∫—Å–µ–π –ö—É—Ü–µ–Ω–∫–æ](https://github.com/bimkon144) üë®‚Äçüíª

–í —ç—Ç–æ–º –≥–∞–π–¥–µ –º—ã –ø–æ–∫–∞–∂–µ–º, –∫–∞–∫ –º—ã —Å–º–æ–≥–ª–∏ –±—ã—Å—Ç—Ä–æ –∏ –ø—Ä–æ—Å—Ç–æ —Ñ–æ—Ä–∫–Ω—É—Ç—å Uniswap V2.

## –ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è

–ï—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

- [uniswap-v2-core](https://github.com/Uniswap/v2-core).
- [uniswap-v2-periphery](https://github.com/Uniswap/v2-periphery).

### uniswap-v2-core

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π uniswap-v2-core —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã: `UniswapV2ERC20.sol`, `UniswapV2Factory.sol`, `UniswapV2Pair.sol`, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Uniswap V2. –≠—Ç–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±–º–µ–Ω —Ç–æ–∫–µ–Ω–∞–º–∏.

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å:

- `UniswapV2Factory.sol`. –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–∏ –æ–±–º–µ–Ω–∞ (–ø—É–ª–æ–≤ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏). –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ñ–∞–±—Ä–∏–∫–∏ —Ç–∞–∫–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä—ã –∏ –∏—Ö –∞–¥—Ä–µ—Å–∞. –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –ø–∞—Ä–∞ —Ç–æ–∫–µ–Ω–æ–≤, —Ñ–∞–±—Ä–∏–∫–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç `UniswapV2Pair.sol`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—É–ª –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –¥–ª—è —ç—Ç–æ–π –ø–∞—Ä—ã.
–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç `UniswapV2Factory.sol` –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `UniswapV2Pair.sol`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `UniswapV2ERC20.sol`.

### uniswap-v2-periphery

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π uniswap-v2-periphery —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã: `UniswapV2Migrator.sol`, `UniswapV2Router01.sol`, `UniswapV2Router02.sol` –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: `SafeMath.sol`, `UniswapV2Library.sol`,`UniswapV2LiquidityMathLibrary.sol`, `UniswapV2OracleLibrary.sol`. –û–Ω–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –∏–∑ uniswap-v2-core. –≠—Ç–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –æ–±–ª–µ–≥—á–∞—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å:

- `UniswapV2Router02.sol`. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–∞—Ä–∞–º–∏ –∏ –ø—É–ª–∞–º–∏ Uniswap. –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–∫–ª—é—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–≤–æ–ø–∞ —Ç–æ–∫–µ–Ω–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏. –í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—É `UniswapV2Router02.sol` –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –≤ –≤–∏–¥–µ —Å—Ö–µ–º—ã:

![alt text](./images/router-path.png)


–ê —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –ø–∞—Ä—ã –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

![alt text](./images/factory-new-pair.png)


–î–ª—è —Ä–µ—à–µ–Ω–∏–µ –Ω–∞—à–µ–π –∑–∞–¥–∞—á–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —à–∞–≥–∞ - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ä–∞–∫—Ç–æ–≤ –∏ –¥–µ–ø–ª–æ–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

_–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ [Foundry](https://book.getfoundry.sh/getting-started/installation) —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑  `forge --version`._

–ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –º—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–∞—à –ø—Ä–æ–µ–∫—Ç –∏ –∫–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ uniswap-v2.

1) –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç: `forge init UNISWAP-V2-FORK-SC && cd ./UNISWAP-V2-FORK-SC`
2) –î–æ–±–∞–≤–∏–º v2-core –∏ v2-periphery —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã: `git submodule add https://github.com/Uniswap/v2-core.git contracts/v2-core` –∏ `git submodule add https://github.com/Uniswap/v2-periphery.git contracts/v2-periphery`
3) –î–æ–±–∞–≤–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É `uniswap-lib`, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `v2-periphery` —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö: `git submodule add https://github.com/Uniswap/uniswap-lib lib/uniswap-lib` –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–æ–≤/—Ç–µ—Å—Ç–æ–≤ foundry –±–∏–±–ª–∏–æ—Ç–µ–∫—É `git submodule add https://github.com/foundry-rs/forge-std  lib/forge-std`
4) –ü–æ–º–µ–Ω—è–µ–º –ø—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫–æ–¥—É –≤ –Ω–∞—à–µ–º —Ñ–∞–π–ª–µ `foundry.toml`:

  ```toml
  //foundry.toml
  [profile.default]
  src = "contracts"
  out = "out"
  libs = ["lib"]
  optimizer = true
  optimizer_runs = 999999
  ```

5) –î–æ–±–∞–≤–∏–º —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥:

```text
//remappings.txt
@uniswap/lib/=lib/uniswap-lib/
@uniswap/v2-core/=contracts/v2-core/
@uniswap/v2-periphery/=contracts/v2-periphery/
forge-std/=lib/forge-std/src/
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

Uniswap –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `UniswapV2Router02` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç–æ–¥ `pairFor` –Ω–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ - –±–∏–±–ª–∏–æ—Ç–µ–∫–µ [UniswapV2Library.sol](https://github.com/Uniswap/v2-periphery/blob/master/contracts/libraries/UniswapV2Library.sol).
![alt text](./images/pair-for.png)

–° –ø–æ–º–æ—â—å—é –¥–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∞–¥—Ä–µ—Å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –ø–∞—Ä—ã –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏—Å—Ö–æ–¥—è –∏–∑:

- `hex'ff'`
- –∞–¥—Ä–µ—Å–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `Factory.sol`
- –∞–¥—Ä–µ—Å–∞ —Ç–æ–∫–µ–Ω–æ–≤ erc-20 –≤ –ø—É–ª–µ
- `init code hash`.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º uniswap –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–¥—Ä–µ—Å–∞ –ø–∞—Ä—ã.

–ß—Ç–æ —Ç–∞–∫–æ–µ `init code hash` –∏ –≥–¥–µ –Ω–∞–º –µ–≥–æ –Ω–∞–π—Ç–∏?

`init code hash` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è keccak256 –æ—Ç –±–∞–π—Ç–∫–æ–¥–∞ –æ—Ç–≤–µ—á–∞—é—â–µ–≥–æ –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ UniswapV2Pair.sol.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –º–æ–∂–µ–º –ø–æ–π—Ç–∏ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –≤–∞—Ä–∏–∞–Ω—Ç–∞–º –µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è:

a) –ß–µ—Ä–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç:

–î–æ–±–∞–≤–∏–º –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç `Factory.sol` —Å—Ç—Ä–æ–∫—É `bytes32 public constant INIT_CODE_HASH = keccak256(abi.encodePacked(type(UniswapV2Pair).creationCode));`
![alt text](./images/uniswap-factory-hash.png)
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `Factory.sol` –º—ã —Å–º–æ–≥–ª–∏ –±—ã –ø–æ–ª—É—á–∏—Ç—å `init code hash` —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `INIT_CODE_HASH`.

b) –ß–µ—Ä–µ–∑ js —Å–∫—Ä–∏–ø—Ç:

```solidity
const { ethers } = require('ethers');
const fs = require('fs');
const path = require('path');

const jsonFilePath = path.resolve(__dirname, '../out/UniswapV2Pair.sol/UniswapV2Pair.json');

async function computeInitCodeHash() {
  try {
    // –ß—Ç–µ–Ω–∏–µ ABI JSON —Ñ–∞–π–ª–∞
    const contractJson = JSON.parse(fs.readFileSync(jsonFilePath, 'utf8'));
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –±–∞–π—Ç–∫–æ–¥–∞ –≤ ABI JSON —Ñ–∞–π–ª–µ
    if (!contractJson.bytecode.object) {
      throw new Error('–ë–∞–π—Ç–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ ABI JSON —Ñ–∞–π–ª–µ.');
    }

    // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ INIT_CODE_HASH —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∞–π—Ç–∫–æ–¥–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
    const computedInitCodeHash = ethers.keccak256(contractJson.bytecode.object);
    
    console.log('INIT_CODE_HASH:', computedInitCodeHash);
    return computedInitCodeHash;
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ INIT_CODE_HASH:', error);
  }
}

computeInitCodeHash();
```

–ß—Ç–æ–±—ã –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å –∫–æ–¥ –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—å –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –æ—Ç uniswap, –ø–æ–π–¥–µ–º –ø–æ –ø—É—Ç–∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ö–µ—à–∞ —á–µ—Ä–µ–∑ javascript.

–ö–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–º–µ—Ç–∏—Ç—å, –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ethers` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ `npm install --save ethers`

–î–∞–ª–µ–µ, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–π—Ç–∫–æ–¥–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `forge build`

–ò –Ω–∞–∫–æ–Ω–µ—Ü –≤—ã–∑—ã–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç —Ä–∞—Å—á–µ—Ç–∞ `node ./script/compute.js`

–†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ:
![alt text](./images/init-code-hash.png)

–ü–æ–ª—É—á–µ–Ω–Ω—ã–π —Ö–µ—à –Ω—É–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —Ñ–∞–π–ª –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ uniswap -  `UniswapV2Library.sol` –±–µ–∑ `0x`.
![alt text](./images/init-code-hash-insert.png)

## –î–µ–ø–ª–æ–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–º—É –¥–µ–ø–ª–æ—é —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.

1) –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç Factory. –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª - —ç—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä —Ç–æ–∫–µ–Ω–æ–≤.

```bash
forge create src/v2-core/UniswapV2Factory.sol:UniswapV2Factory --rpc-url https://polygonzkevm-mainnet.g.alchemy.com/v2/demo --private-key putYourPrivatekeyHere --constructor-args "putFeeToSetterAddressHere" --verify  --etherscan-api-key ACCESS_KEY 
```

`https://polygonzkevm-mainnet.g.alchemy.com/v2/demo` - RPC —Å–µ—Ç—å –∫—É–¥–∞ –±—É–¥–µ–º –¥–µ–ø–ª–æ–∏—Ç—å.

`putYourPrivatekeyHere` - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –¥–µ–ø–ª–æ–π.

`putFeeToSetterAddressHere` - –ê–¥—Ä–µ—Å –∫–æ—Ç–æ—Ä—ã–π —Å–º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∫–æ–º–∏—Å—Å–∏—é –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

`ACCESS_KEY` - API key –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å [—Ç—É—Ç](https://zkevm.polygonscan.com/). –î–ª—è —ç—Ç–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ —Å–æ–∑–¥–∞—Ç—å API key.

_–ü—Ä–∏ –¥–µ–ø–ª–æ–µ –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—Å—è –æ—à–∏–±–∫–∞ –µ—Å–ª–∏ –±–ª–æ–∫—á–µ–π–Ω –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç EIP-1559. –î–ª—è —ç—Ç–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `--legacy`._

_–ï—Å–ª–∏ —É –≤—ã Windows –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —É –≤–∞—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—à–∏–±–∫–∞ - "Failed to create wallet from private key. Private key is invalid hex: Odd number of digits". –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å  \r symbol —Å private key. –î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `PRIVATE_KEY=$(echo $PRIVATE_KEY | tr -d '\r')`_

2) –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç `UniswapV2Router02`. –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–¥–∞–ª–µ–Ω–∏–µ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –≤ –ø—É–ª—ã, —Å–≤–∞–ø—ã —Ç–æ–∫–µ–Ω–æ–≤.

```bash
forge create src/v2-periphery/UniswapV2Router02.sol:UniswapV2Router02 --rpc-url https://polygonzkevm-mainnet.g.alchemy.com/v2/demo --private-key putYourPrivatekeyHere --constructor-args "factoryAddressPutHere" "WETHAddressPutHere" --verify  --etherscan-api-key ACCESS_KEY 
```

`https://polygonzkevm-mainnet.g.alchemy.com/v2/demo` - RPC —Å–µ—Ç—å –∫—É–¥–∞ –±—É–¥–µ–º –¥–µ–ø–ª–æ–∏—Ç—å.

`putYourPrivatekeyHere` - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –¥–µ–ø–ª–æ–π.

`factoryAddressPutHere` - –ê–¥—Ä–µ—Å —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ Factory.

`WETHAddressPutHere` - –ê–¥—Ä–µ—Å Wrapped Ether (WETH).

`ACCESS_KEY` - API key –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

–î–ª—è —Ç–µ—Å—Ç–Ω–µ—Ç–∞, –º—ã –∑–∞–¥–µ–ø–ª–æ–∏–ª–∏ –∫–æ–¥ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ [WETH](https://etherscan.io/token/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2#code) —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

3) –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç [multicall](https://github.com/mds1/multicall/blob/main/src/Multicall.sol).

–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è:

- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á—Ç–µ–Ω–∏—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å JSON-RPC.
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—ã–∑–æ–≤–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–ª–æ–∫—á–µ–π–Ω–∞ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
  
–ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [—Ç—É—Ç](https://github.com/mds1/multicall).

–•–æ—Ç—è –¥–∞–Ω–Ω—ã–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ –≥—Ä—É–ø–ø—É —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –µ–≥–æ —Ä–∞–±–æ—Ç—ã, –æ–Ω –≤—Å–µ –∂–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è frontend —á–∞—Å—Ç–∏.

–ù–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è –≥–∞–π–¥–∞, –¥–∞–Ω–Ω—ã–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç —É–∂–µ [–∑–∞–¥–µ–ø–ª–æ–µ–Ω](https://zkevm.polygonscan.com/address/0xca11bde05977b3631167028862be2a173976ca11) –≤ —Å–µ—Ç—å Polygon zkEVM testnet. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—á–µ–Ω—å –ø–µ—Ä–µ—á–µ–Ω—å —Å–µ—Ç–µ–π –∫—É–¥–∞ —É–∂–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –º–æ–∂–Ω–æ [—Ç—É—Ç](https://www.multicall3.com/deployments).

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–§–æ—Ä–∫ –∏ –¥–µ–ø–ª–æ–π Uniswap V2 —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ–π –∑–∞–¥–∞—á–µ–π, –Ω–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –∏ –ø–æ–¥—Ö–æ–¥–æ–º —ç—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –¥–æ—Å—Ç—É–ø–Ω—ã–º. –í —ç—Ç–æ–º –≥–∞–π–¥–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ —à–∞–≥–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –¥–µ–ø–ª–æ—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ —Å–ø–æ—Å–æ–±—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏—è init code hash –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ Foundry –∏ ethers.js, –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –¥–µ–ø–ª–æ—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –ø–æ–∑–≤–æ–ª—è—è —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö –∞—Å–ø–µ–∫—Ç–∞—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏.

–î–∞–Ω–Ω—ã–π –≥–∞–π–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –±–∞–∑–æ–≤—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ñ–æ—Ä–∫–∞—Ç—å –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –¥–ª—è —Å–≤–æ–∏—Ö –Ω—É–∂–¥. –≠—Ç–∏ –∑–Ω–∞–Ω–∏—è –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –ø—É—Ç—å –∫ —Å–æ–∑–¥–∞–Ω–∏—é –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–µ–º —Ä–µ—à–µ–Ω–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ Uniswap V2.

## –°—Å—ã–ª–∫–∏:

- [–û–±–∑–æ—Ä —Ä–∞–±–æ—Ç—ã Uniswap V2](https://docs.uniswap.org/contracts/V2/concepts/protocol-overview/how-uniswap-works)
- [Uniswap V2 Book](https://www.rareskills.io/uniswap-v2-book)
- [–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã Uniswap V2](https://docs.uniswap.org/contracts/v2/overview)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Foundry](https://book.getfoundry.sh/getting-started/installation)
- [Github - Uniswap V2 Core](https://github.com/Uniswap/v2-core)
- [Github - Uniswap V2 Periphery](https://github.com/Uniswap/v2-periphery)
- [Github - Uniswap Lib](https://github.com/Uniswap/uniswap-lib)
- [Multicall —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç](https://github.com/mds1/multicall/blob/main/src/Multicall.sol)
- [API –∫–ª—é—á–∏ –¥–ª—è Polygon zkEVM](https://zkevm.polygonscan.com/)
- [–ê–¥—Ä–µ—Å Multicall —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≤ Polygon zkEVM](https://zkevm.polygonscan.com/address/0xca11bde05977b3631167028862be2a173976ca11)
