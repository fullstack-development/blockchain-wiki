# EVM Opcodes

**ÐÐ²Ñ‚Ð¾Ñ€:** [ÐŸÐ°Ð²ÐµÐ» ÐÐ°Ð¹Ð´Ð°Ð½Ð¾Ð²](https://github.com/PavelNaydanov) ðŸ•µï¸â€â™‚ï¸

ÐŸÑ€ÐµÐ¶Ð´Ðµ Ñ‡ÐµÐ¼ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ð¾Ð³Ñ€ÑƒÐ¶Ð°Ñ‚ÑŒÑÑ Ð² Ð¸Ð·ÑƒÑ‡ÐµÐ½Ð¸Ðµ **opcodes** Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð²ÑÐ¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ EVM Ð¸ ÐºÐ°Ðº Ð¾Ð½Ð° ÑƒÑÑ‚Ñ€Ð¾ÐµÐ½Ð°. Ð¡Ð¼ÐµÐ»Ð¾ Ñ‡Ð¸Ñ‚Ð°Ð¹ Ð½Ð°ÑˆÐµ [intro](../intro/README.md). Ð­Ñ‚Ð¾ Ð´Ð°ÑÑ‚ ÑƒÐ³Ð»ÑƒÐ±Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð½Ð°Ð½Ð¸Ñ Ð² Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ð¼Ð°ÑˆÐ¸Ð½ Ð¸ Ð¸Ñ… Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚ÐµÐ¹. Ð•ÑÐ»Ð¸ Ñ‚Ñ‹ Ð¸ Ñ‚Ð°Ðº Ð·Ð½Ð°ÐµÑˆÑŒ Ð´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð¾Ð± EVM, Ñ‚Ð¾ Ñ‡Ñ‚ÐµÐ½Ð¸Ðµ **intro** Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ.

## Ð§Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ opcodes?

> **Opcodes** - Ð½Ð¸Ð·ÐºÐ¾ÑƒÑ€Ð¾Ð²Ð½ÐµÐ²Ñ‹Ðµ Ð¼Ð°ÑˆÐ¸Ð½Ð½Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸. Ð•Ñ‰Ðµ Ð¸Ñ… Ð½Ð°Ð·Ñ‹Ð²Ð°ÑŽÑ‚ ÐºÐ¾Ð´Ð°Ð¼Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹.

EVM Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ñ€ÐµÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð´ ÑÐ¼Ð°Ñ€Ñ‚-ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð°, Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ð¹ Ð½Ð° Ð²Ñ‹ÑÐ¾ÐºÐ¾ÑƒÑ€Ð¾Ð²Ð½ÐµÐ²Ð¾Ð¼ ÑÐ·Ñ‹ÐºÐµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ. Ð›ÑŽÐ±Ð¾Ð¹ ÐºÐ¾Ð´ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ ÑÐºÐ¾Ð¼Ð¿Ð¸Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð² Ð¼Ð°ÑˆÐ¸Ð½Ð¾Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ñ‹Ð¹ ÐºÐ¾Ð´ Ð¸Ð»Ð¸ **Ð±Ð°Ð¹Ñ‚-ÐºÐ¾Ð´**, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð² Ð´Ð²Ð¾Ð¸Ñ‡Ð½Ð¾Ð¼ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ.

ÐŸÐ¾ ÑÑƒÑ‚Ð¸, Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ñ ÐºÐ¾Ð´Ð° Solidity Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼:
> Solidity â†’ Ð‘Ð°Ð¹Ñ‚-ÐºÐ¾Ð´ â†’ Opcodes

**Ð”Ð»Ñ Ñ‡ÐµÐ³Ð¾ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¿Ð¾Ð½Ð¸Ð¼Ð°Ñ‚ÑŒ opcodes?** ÐžÑ‚Ð²ÐµÑ‚ Ð¿Ñ€Ð¾ÑÑ‚ - Ð´Ð»Ñ Ð¼Ð¸Ð½Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð»ÐµÐ½Ð¸Ñ **gas** Ð¸ ÑÐ½Ð¸Ð¶ÐµÐ½Ð¸Ñ Ð·Ð°Ñ‚Ñ€Ð°Ñ‚ ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ. Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ð±Ð¾Ð½ÑƒÑÐ¾Ð¼ Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ¼ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÑ‚ÑŒ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ¸ Ð¸Ð· Ð´Ñ€ÑƒÐ³Ð¸Ñ… ÑÐ·Ñ‹ÐºÐ¾Ð² Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, ÑÑ€ÐºÐ¸Ð¼Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð°Ð¼Ð¸ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¿Ð¾Ð´ EVM ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ñ€Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð¿Ð°Ð¼ÑÑ‚ÑŒÑŽ Ð¸ Ð¼Ð°ÑÑÐ¸Ð²Ð°Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ….

_Ð’Ð°Ð¶Ð½Ð¾!_ ÐÐ° Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ ÑÑ‚Ð¾Ð¹ ÑÑ‚Ð°Ñ‚ÑŒÐ¸ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚ Ñ‡ÑƒÑ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ [140 ÑƒÐ½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ñ… opcodes](https://www.evm.codes/?fork=grayGlacier). Ð—Ð° ÑÑ‡ÐµÑ‚ ÑÑ‚Ð¸Ñ… opcodes EVM ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ Ð¢ÑŒÑŽÑ€Ð¸Ð½Ð³ Ð¿Ð¾Ð»Ð½Ð¾Ð¹.

## ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ opcodes

Ð”Ð»Ñ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ñ‚Ñ‹ Ð²Ð¾ÑÐ¿Ñ€Ð¸ÑÑ‚Ð¸Ñ Ð¼Ð¾Ð¶Ð½Ð¾ Ñ€Ð°Ð·Ð±Ð¸Ñ‚ÑŒ Ð²ÑÐµ **opcodes** Ð½Ð° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹:
1. Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÑ‚ÐµÐºÐ¾Ð¼. ```POP, PUSH, DUP, SWAP```.
2. ÐÑ€Ð¸Ñ„Ð¼ÐµÑ‚Ð¸ÐºÐ°. ```ADD, SUB, MUL, SMUL, DIV, SDIV, MOD, EXP, ADDMOD, MULMOD, SMOD```
3. Ð¡Ñ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ Ð¸ Ð¿Ð¾Ð±Ð¸Ñ‚Ð¾Ð²Ñ‹Ðµ ÑÐ´Ð²Ð¸Ð³Ð¸. ```GT, LT, EQ, SLT, SGT, ISZERO, AND, OR, XOR, NOT, BYTE, SHL, SHR, SAR```
4. ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ ÑÑ€ÐµÐ´Ñ‹. ```CALLER, CALLVALUE, NUMBER, CODESIZE, CALLDATACOPY, CALLDATALOAD, CALLDATASIZE, EXTCODECOPY```
5. Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð°Ð¼ÑÑ‚ÑŒÑŽ memory. ```MLOAD, MSTORE, MSTORE8, MSIZE```
6. Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð°Ð¼ÑÑ‚ÑŒÑŽ storage. ```SLOAD, SSTORE```
7. Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ program counter. ```JUMP, JUMPI, PC, JUMPDEST```
8. ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°. ```STOP, RETURN, REVERT, INVALID, SELFDESTRUCT```
9. Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð±Ð»Ð¾ÐºÐµ. ```BLOCKHASH, TIMESTAMP, COINBASE, NUMBER, DIFFICULTY, GASLIMIT, CHAINID, SELFBALANCE, BASEFEE```

ÐžÐ±ÑŠÑÑÐ½ÑÑ‚ÑŒ Ð²ÑÐµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ opcodes Ð½ÐµÑ‚ ÑÐ¼Ñ‹ÑÐ»Ð°. Ð§Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð¸Ð· Ð½Ð¸Ñ… Ð´ÐµÐ»Ð°ÐµÑ‚, Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ [Ñ‚ÑƒÑ‚](https://www.evm.codes/). ÐšÐ°Ð¶Ð´Ð¾Ð¼Ñƒ ÐºÐ¾Ð´Ñƒ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð²Ñ‹Ð´ÐµÐ»ÑÐµÑ‚ÑÑ 1 Ð±Ð°Ð¹Ñ‚ Ð¿Ð°Ð¼ÑÑ‚Ð¸. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€

```0x00``` - STOP
```0x01``` - ADD

![](./images/opcodes.png)

_Ð’Ð°Ð¶Ð½Ð¾!_ 1 Ð±Ð°Ð¹Ñ‚ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½ 2-Ð¼Ñ ÑˆÐµÑÑ‚Ð½Ð°Ð´Ñ†Ð°Ñ‚ÐµÑ€Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°Ð¼Ð¸.

## Gas

Ð¯ ÑƒÐ¶Ðµ ÑÐºÐ°Ð·Ð°Ð», Ñ‡Ñ‚Ð¾ **gas** Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°Ñ‚ÑŒ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ ÑÐµÑ‚Ð¸ Ethereum. Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð¿Ð»Ð°Ñ‚Ð° Ð·Ð° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð² ÑÐµÑ‚Ð¸. Ð­Ñ‚Ð¾ Ð½Ðµ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð·Ð»Ð¾ÑƒÐ¼Ñ‹ÑˆÐ»ÐµÐ½Ð½Ð¸ÐºÑƒ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð·Ð»Ð¾Ð½Ð°Ð¼ÐµÑ€ÐµÐ½Ð½Ñ‹Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð² ÑÐµÑ‚Ð¸. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ ÑÐ¿Ð°Ð¼Ð°.

Ð¢Ð°ÐºÐ¸Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼ Ñƒ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ **opcode** ÐµÑÑ‚ÑŒ ÑÐ²Ð¾Ñ Ð±Ð°Ð·Ð¾Ð²Ð°Ñ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ **gas**. ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ ÐµÐµ Ð¼Ð¾Ð¶Ð½Ð¾ Ð² ÑÑ‚Ð¾Ð»Ð±Ñ†Ðµ **MINIMUM GAS**.

![](./images/opcodes-gas.png)

 **Opcodes**, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¼ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð²Ñ‹Ñ‡Ð¸ÑÐ»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð², Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð±Ð¾Ð»ÐµÐµ Ð²Ñ‹ÑÐ¾ÐºÐ°Ñ Ð¿Ð»Ð°Ñ‚Ð° Ð·Ð° **gas**. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¿Ñ€Ð¾ÑÑ‚Ð°Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ ```POP``` Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ 5 Ð³Ð°Ð·Ð°, Ð° Ñ‡ÑƒÑ‚ÑŒ Ð±Ð¾Ð»ÐµÐµ ÑÐ»Ð¾Ð¶Ð½Ð°Ñ ```JUMP``` Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ 8 ÐµÐ´Ð¸Ð½Ð¸Ñ† Ð³Ð°Ð·Ð°.

|ÐšÐ¾Ð´ | ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ | Gas|
|--- | -------- | ---|
|04 |DIV| 5 ÐµÐ´Ð¸Ð½Ð¸Ñ† Ð³Ð°Ð·Ð°|
|50 |POP| 2 ÐµÐ´Ð¸Ð½Ð¸Ñ†Ñ‹ Ð³Ð°Ð·Ð°|
|56 |JUMP| 8 ÐµÐ´Ð¸Ð½Ð¸Ñ† Ð³Ð°Ð·Ð°|
|38 |CODESIZE| 2 ÐµÐ´Ð¸Ð½Ð¸Ñ†Ñ‹ Ð³Ð°Ð·Ð°|

ÐžÐ´Ð½Ð°ÐºÐ¾ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‚ ÐµÑ‰Ðµ Ð±Ð¾Ð»ÐµÐµ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ðµ **opcode**, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð²Ð·Ð¸Ð¼Ð°ÑŽÑ‚ Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÑƒÑŽ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ **gas**. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð´Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ```SHA3``` Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ 30 ÐµÐ´Ð¸Ð½Ð¸Ñ† Ð³Ð°Ð·Ð° Ð¿Ð»ÑŽÑ 6 ÐµÐ´Ð¸Ð½Ð¸Ñ† Ð³Ð°Ð·Ð° Ð·Ð° ÐºÐ°Ð¶Ð´Ð¾Ðµ ÐºÐ¾Ð´Ð¸Ñ€ÑƒÐµÐ¼Ð¾Ðµ ÑÐ»Ð¾Ð²Ð¾.
|ÐšÐ¾Ð´ | ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ | Static gas | Dynamic gas|
|--- | -------- | ---------- | -----------|
|04 | SHA3 | 30 ÐµÐ´Ð¸Ð½Ð¸Ñ† Ð³Ð°Ð·Ð° | 6 ÐµÐ´Ð¸Ð½Ð¸Ñ† Ð·Ð° ÐºÐ°Ð¶Ð´Ð¾Ðµ ÑÐ»Ð¾Ð²Ð¾|
|31 | BALANCE | 0 ÐµÐ´Ð¸Ð½Ð¸Ñ† Ð³Ð°Ð·Ð° | Ð•ÑÐ»Ð¸ Ð°Ð´Ñ€ÐµÑ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ñ‚ÐµÐ¿Ð»Ñ‹Ð¹, Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ñ€Ð°Ð²Ð½Ð° 100. Ð˜Ð½Ð°Ñ‡Ðµ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ñ€Ð°Ð²Ð½Ð° 2600|
| 51 | MLOAD | 3 ÐµÐ´Ð¸Ð½Ð¸Ñ†Ñ‹ Ð³Ð°Ð·Ð° | Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ð¾ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ñƒ [memory_expansion_cost](https://www.evm.codes/about#memoryexpansion) |

_Ð’Ð°Ð¶Ð½Ð¾!_ ÐšÑ€Ð¾Ð¼Ðµ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñ‹ Ð³Ð°Ð·Ð° Ð´Ð»Ñ **opcodes**, ÐºÐ°Ð¶Ð´Ð°Ñ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ **21_000** gas. Ð ÑÐ°Ð¼Ñ‹Ð¹ Ð´Ð¾Ñ€Ð¾Ð³Ð¾Ð¹ opcode```CREATE```, Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÑŽÑ‰Ð¸Ð¹ Ð·Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð°, Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ **32_000** Ð³Ð°Ð·Ð° ÑÐ²ÐµÑ€Ñ… ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸.

ÐŸÑ€Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÑŽÑ‚ Ñ€Ð°Ð·Ð¼ÐµÑ€ Ð¾Ð±Ñ‰ÐµÐ³Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ð±Ð»Ð¾ÐºÑ‡ÐµÐ¹Ð½ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ **gas** Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾ Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ **Ð½Ð°Ð³Ñ€Ð°Ð´Ñ‹**. ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ **opcode** ```SELFDESTRUCT``` Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ 24_000 **gas**. Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‚ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð°, Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ñ‹ Ð½Ðµ Ð¼Ð¾Ð³ÑƒÑ‚ ÑÐµÐ±Ñ Ð¾ÐºÑƒÐ¿Ð¸Ñ‚ÑŒ. ÐšÑ€Ð¾Ð¼Ðµ Ñ‚Ð¾Ð³Ð¾, Ð²Ð¾Ð·Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐ°Ñ‚ÑŒ Ð¿Ð¾Ð»Ð¾Ð²Ð¸Ð½Ñƒ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸ **gas**, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð´Ð»Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð° ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð°.

## ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ€Ð°Ð·Ð±Ð¾Ñ€Ð° Ð±Ð°Ð¹Ñ‚-ÐºÐ¾Ð´Ð°

Ð”Ð°Ð²Ð°Ð¹ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐµÐ¼ Ñ€Ð°Ð·Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð±Ð°Ð¹Ñ‚-ÐºÐ¾Ð´Ð° ```0x6002600201600202```. Ð¡Ð¾Ð³Ð»Ð°ÑÐ½Ð¾ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ opcodes Ð¼Ñ‹ Ð¼Ð¾Ð¶ÐµÐ¼ Ð±Ñ€Ð°Ñ‚ÑŒ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ð±Ð°Ð¹Ñ‚(**60**) Ð¸ Ð¸ÑÐºÐ°Ñ‚ÑŒ ÐµÐ³Ð¾ Ð² Ñ‚Ð°Ð»Ð¸Ñ†Ðµ [opcodes](https://www.evm.codes/?fork=grayGlacier). Ð­Ñ‚Ð¾ Ð±ÑƒÐ´ÐµÑ‚ opcode ```PUSH1```. Ð¢Ð°ÐºÐ¸Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼ Ð²ÑÑ ÑÑ‚Ñ€Ð¾ÐºÐ° Ð±Ð°Ð¹Ñ‚-ÐºÐ¾Ð´Ð° Ð±ÑƒÐ´ÐµÑ‚ Ñ€Ð°Ð·Ð¾Ð±Ñ€Ð°Ð½Ð°.

![](./images/bytecode-execution.png)

1. ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ð±Ð°Ð¹Ñ‚ Ñ€Ð°Ð²ÐµÐ½ ```60```. Ð¡Ð¾Ð³Ð»Ð°ÑÐ½Ð¾ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ðµ [opcodes](https://www.evm.codes/?fork=grayGlacier) ÑÑ‚Ð¾ ÐºÐ¾Ð´ ```PUSH1```. Ð­Ñ‚Ð¾Ñ‚ ÐºÐ¾Ð´ Ð¿Ð¾Ð¼ÐµÑ‰Ð°ÐµÑ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð±Ð°Ð¹Ñ‚Ð° ```02``` Ð² **stack**.
2. Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð±Ð°Ð¹Ñ‚ Ñ€Ð°Ð²ÐµÐ½ ```60```. Ð§Ñ‚Ð¾ Ð¾Ð±Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð±Ð°Ð¹Ñ‚Ð° ```02``` Ð² **stack**. Ð¡ÐµÐ¹Ñ‡Ð°Ñ Ð² **stack** Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð´Ð²Ð° Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ [0x02, 0x02]. Ð­Ñ‚Ð¾ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¾ Ð½Ð° ÑÑ…ÐµÐ¼Ðµ.
3. Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð±Ð°Ð¹Ñ‚ ```01``` Ð¾Ð±Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ ÐºÐ¾Ð´ ```ADD```. Ð­Ñ‚Ð¾Ñ‚ ÐºÐ¾Ð´ Ð±ÐµÑ€ÐµÑ‚ Ð´Ð²Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ñ… Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¸Ð· **stack**, ÑÐºÐ»Ð°Ð´Ñ‹Ð²Ð°ÐµÑ‚ Ð¸ Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ ÑÐ»Ð¾Ð¶ÐµÐ½Ð¸Ñ [0x04] Ð² **stack**.
4. Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð±Ð°Ð¹Ñ‚ Ð¾Ð±Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÐµÐ½Ð¸Ðµ ÑˆÐ°Ð³Ð° 1 Ð¸Ð»Ð¸ 2. Ð’ **stack** ÐºÐ»Ð°Ð´ÐµÑ‚ÑÑ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ```0x02```. Ð¢Ð°ÐºÐ¸Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼ Ð² **stack** [0x04, 0x02].
5. ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð±Ð°Ð¹Ñ‚ ```02``` Ð¾Ð±Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ ÐºÐ¾Ð´ ```MUL```. ÐžÐ½ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ ÑƒÐ¼Ð½Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð²ÑƒÑ… Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ Ð¸Ð· **stack** Ð¼ÐµÐ¶Ð´Ñƒ ÑÐ¾Ð±Ð¾Ð¹. Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð¼ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð±Ð°Ð¹Ñ‚-ÐºÐ¾Ð´Ð° Ð±ÑƒÐ´ÐµÑ‚ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ [0x08] Ð² **stack**.

Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ñ‚Ñ‹ Ð¾Ð±Ñ€Ð°Ñ‚Ð¸Ð» Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ, Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾Ñ‚ Ð±Ð°Ð¹Ñ‚-ÐºÐ¾Ð´ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ð» Ð¿Ñ€Ð¾ÑÑ‚ÐµÐ¹ÑˆÐ¸Ðµ Ð¼Ð°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ 4-Ð³Ð¾ ÐºÐ»Ð°ÑÑÐ°. ```(2 + 2) * 2```. Ð—Ð°Ð´Ð°Ñ‡ÐºÐ° Ð½Ð° Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð½Ð¾ÑÑ‚ÑŒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹. Ð’ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ðµ Ð¼Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð²Ð½Ð¾Ðµ 8. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹ ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ Ñ‚Ð°ÐºÐ¾Ð¹ Ð±Ð°Ð¹Ñ‚-ÐºÐ¾Ð´, Ð¿Ñ€Ð¸ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ ```2 + 2 * 2 = 6```. ÐŸÐ¾Ð¼Ð¾Ñ‡ÑŒ Ñ‚ÐµÐ±Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÐµÐ±Ñ Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÑ‚ [playground](https://www.evm.codes/playground). ÐžÑ‚Ð²ÐµÑ‚ ÑÐ¼Ð¾Ñ‚Ñ€Ð¸ Ð²Ð½Ð¸Ð·Ñƒ ÑÑ‚Ð¾Ð³Ð¾ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°.

## ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð½Ðµ Ð¸Ð½Ñ‚ÑƒÐ¸Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¾Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ, Ð²Ð»Ð¸ÑÑŽÑ‰Ð¸Ñ… Ð½Ð° ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð·Ð°Ñ‚Ñ€Ð°Ñ‡ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð³Ð°Ð·Ð°

Ð—Ð´ÐµÑÑŒ Ð¼Ñ‹ Ñ€Ð°Ð·Ð±ÐµÑ€ÐµÐ¼ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½Ð°Ð³Ð»ÑÐ´Ð½Ð¾ Ð¿Ð¾ÐºÐ°Ð¶ÑƒÑ‚ Ð²Ð°Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ñ‚ÐµÐ¼Ñ‹ "**Evm Opcodes**".

1. **MUL vs EXP**
  Ð£Ð¼Ð½Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð² Ð²Ð¾Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð² ÑÑ‚ÐµÐ¿ÐµÐ½ÑŒ. ```MUL``` ÑÑ‚Ð¾Ð¸Ñ‚ 5 Ð³Ð°Ð·Ð°. EXP ÑÑ‚Ð¾Ð¸Ñ‚ 10 ÑÑ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… ÐµÐ´Ð¸Ð½Ð¸Ñ† Ð³Ð°Ð·Ð° Ð¸ 50 * ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾_Ð±Ð°Ð¹Ñ‚_Ð²_Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÐµÐ»Ð¸_ÑÑ‚ÐµÐ¿ÐµÐ½Ð¸. Ð¡Ð°Ð¼ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸ÑˆÑŒ Ð½Ð° Ð²Ð¾Ð¿Ñ€Ð¾Ñ, Ñ‡Ñ‚Ð¾ Ð²Ñ‹Ð³Ð¾Ð´Ð½ÐµÐµ? ÐšÐ¾Ð½ÐµÑ‡Ð½Ð¾, ÐµÑÐ»Ð¸ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾, Ñ‚Ð¾ Ð²Ñ‹Ð³Ð¾Ð´Ð½ÐµÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑƒÐ¼Ð½Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð²Ð¼ÐµÑÑ‚Ð¾ Ð²Ð¾Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð² ÑÑ‚ÐµÐ¿ÐµÐ½ÑŒ.
2. **SLOAD vs MLOAD**
  ```MLOAD``` Ð²ÑÐµÐ³Ð´Ð° ÑÑ‚Ð¾Ð¸Ñ‚ 3 ÑÑ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð³Ð°Ð·Ð° + Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð³Ð°Ð· Ð·Ð° Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ Ð¿Ð°Ð¼ÑÑ‚Ð¸.```SLOAD``` ÑÑ‚Ð¾Ð¸Ñ‚ 2100 Ð³Ð°Ð·Ð° Ð´Ð»Ñ Ð¿ÐµÑ€Ð²Ð¾Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ð¸ Ð¿Ð¾ 100 Ð³Ð°Ð·Ð° Ð·Ð° Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ñ‹Ðµ. Ð­Ñ‚Ð¾ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ Ð¾ Ñ‚Ð¾Ð¼, Ñ‡Ñ‚Ð¾ Ð² Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð½ÑÑ‚Ð²Ðµ ÑÐ»ÑƒÑ‡Ð°ÐµÐ² Ð´ÐµÑˆÐµÐ²Ð»Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· **memory**, Ð½ÐµÐ¶ÐµÐ»Ð¸ Ñ‡ÐµÐ¼ Ð¸Ð· **storage**. ÐžÑ‚ÑÑŽÐ´Ð° Ð¸ Ð¿Ð¾ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð², Ð³Ð´Ðµ ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ð´ÐµÑˆÐµÐ²Ð»Ðµ Ñ€Ð°Ð· ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¼Ð°ÑÑÐ¸Ð² Ð¸Ð· **storage** Ð² **memory**, Ð° Ð¿Ð¾Ñ‚Ð¾Ð¼ ÑƒÐ¶Ðµ Ñ Ð½Ð¸Ð¼ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ.
1. **ÐŸÑ€Ð¸ÐµÐ¼Ñ‹ Ð¾Ð±ÑŠÐµÐºÑ‚Ð½Ð¾-Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð°**
  Ð’Ñ‹Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ñ‹Ñ… ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÐµÐ¹ Ð² Ð²Ð¸Ð´Ðµ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð¾Ð², Ð»ÑŽÐ±Ñ‹Ñ… Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð¾Ð² Ð±ÑƒÐ´ÐµÑ‚ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ñ€ÐµÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ Ð² **opcode** ```CREATE```. Ð•Ð³Ð¾ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð½Ðµ Ð¼ÐµÐ½ÐµÐµ 32_000 Ð³Ð°Ð·Ð°. Ð­Ñ‚Ð¾ ÑÐ°Ð¼Ñ‹Ð¹ Ð´Ð¾Ñ€Ð¾Ð³Ð¾Ð¹ ÐºÐ¾Ð´ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑŽ EVM. Ð¢Ð°ÐºÐ¸Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼, Ð»ÑƒÑ‡ÑˆÐµ ÑÐ²ÐµÑÑ‚Ð¸ Ðº Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼Ñƒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ñ… ÑÐ¼Ð°Ñ€Ñ‚-ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð¾Ð². Ð­Ñ‚Ð¾ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚ Ñ‚Ð¸Ð¿Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð¾Ð±ÑŠÐµÐºÑ‚Ð½Ð¾-Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð´Ð° Ð½Ð° ÐºÐ»Ð°ÑÑÑ‹ Ð¿Ð¾Ð¾Ñ‰Ñ€ÑÐµÑ‚ÑÑ Ð´Ð»Ñ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾Ð³Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ ÐºÐ¾Ð´Ð°.
1. **SSTORE**
  Ð—Ð´ÐµÑÑŒ Ð²ÑÐµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾. Ð—Ð°Ð¿Ð¸ÑÑŒ Ð² **storage** - ÑÑ‚Ð¾ Ð¾Ð´Ð½Ð° Ð¸Ð· ÑÐ°Ð¼Ñ‹Ñ… Ð´Ð¾Ñ€Ð¾Ð³Ð¸Ñ… Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹. ÐŸÐ¾ÑÑ‚Ð¾Ð¼Ñƒ Ð² Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð½Ñ„Ñ‚, Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ðµ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð² **storage** ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð°. **Storage** Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ Ð²ÑÐµÐ³Ð¾ Ð»Ð¸ÑˆÑŒ ÑÑÑ‹Ð»ÐºÑƒ Ð½Ð° ÑÑ‚Ð¸ Ð¼ÐµÑ‚Ð°Ð´Ð°Ð½Ð½Ñ‹Ðµ.

ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ Ñ ÑÑ‚Ð¸Ð¼Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð°Ð¼Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾Ð·Ð½Ð°ÐºÐ¾Ð¼Ð¸Ñ‚ÑŒÑÑ Ð² ÑÑ‚Ð¾Ð¹ [ÑÑ‚Ð°Ñ‚ÑŒÐµ](https://medium.com/@danielyamagata/understand-evm-opcodes-write-better-smart-contracts-e64f017b619).

## ÐžÐ±Ñ€Ð°Ñ‚Ð½Ñ‹Ð¹ Ð¸Ð½Ð¶ÐµÐ½ÐµÑ€Ð¸Ð½Ð³

Ð—Ð°Ñ‡Ð°ÑÑ‚ÑƒÑŽ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ñ‹ Ð²ÐµÑ€Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ð¸ ÐºÐ¾Ð´ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð° Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð½Ð° [etherscan](https://etherscan.io/). ÐžÐ´Ð½Ð°ÐºÐ¾, ÐµÑÐ»Ð¸ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚ Ð½Ðµ Ð²ÐµÑ€Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½, Ñ‚Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€Ð°Ð·Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð±Ð°Ð¹Ñ‚-ÐºÐ¾Ð´ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð°.

ÐŸÑ€ÐµÐºÑ€Ð°ÑÐ½ÑƒÑŽ [ÑÑ‚Ð°Ñ‚ÑŒÑŽ](https://ethereum.org/en/developers/tutorials/reverse-engineering-a-contract/) Ð½Ð° ÑÑ‚Ñƒ Ñ‚ÐµÐ¼Ñƒ Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°ÐµÑ‚ ÐžÑ€Ð¸ ÐŸÐ¾Ð¼ÐµÑ€Ð°Ð½Ñ† Ð² Ð¾Ñ„Ð¸Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ Ethereum. Ð¥Ð¾Ñ‡Ñƒ Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ´Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ñ€Ð°Ð·Ð±Ð¾Ñ€ Ð½Ðµ Ð²ÐµÑ€Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð¾Ð² - ÑÑ‚Ð¾ Ð½ÐµÑ‚Ñ€Ð¸Ð²Ð¸Ð°Ð»ÑŒÐ½Ð°Ñ Ð·Ð°Ð´Ð°Ñ‡Ð°. ÐŸÐ¾ÑÑ‚Ð¾Ð¼Ñƒ ÑÐ¼Ð¾Ñ‚Ñ€Ð¸ ÑÐ°Ð¼, Ð½Ð° ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐ±Ðµ ÑÐµÐ¹Ñ‡Ð°Ñ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ð¾Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒÑÑ Ð² ÑÑ‚Ñƒ Ñ‚ÐµÐ¼Ñƒ.

## ÐŸÑ€Ð°ÐºÑ‚Ð¸ÐºÐ°

Ð¢ÐµÐ¾Ñ€Ð¸Ñ - ÑÑ‚Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾. ÐžÐ´Ð½Ð°ÐºÐ¾ Ð·Ð°ÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐ¾Ñ€Ð¸Ð¸ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ¾Ð¹ Ð²ÑÐµÐ³Ð´Ð° Ð³Ð¾Ñ€Ð°Ð·Ð´Ð¾ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð¸Ð²Ð½ÐµÐµ. Franco Victorio - Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð² hardhat, ÑÐ¾Ð·Ð´Ð°Ð» [ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ Ð³Ð¾Ð»Ð¾Ð²Ð¾Ð»Ð¾Ð¼Ð¾Ðº](https://github.com/fvictorio/evm-puzzles). Ð­Ñ‚Ð° ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ Ð³Ð¾Ð»Ð¾Ð²Ð¾Ð»Ð¾Ð¼Ð¾Ðº Ð¿Ñ€ÐµÐ´Ð»Ð°Ð³Ð°ÐµÑ‚ Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð½Ð° Ð½Ð°Ð±Ð¾Ñ€ **opcodes** Ð¸ Ð²Ð²ÐµÑÑ‚Ð¸ Ñ‚Ð°ÐºÐ¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð¿Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ‚ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒÑÑ. ÐŸÐ¾ÑÑ‚Ð°Ñ€Ð°Ð¹ÑÑ Ñ€ÐµÑˆÐ¸Ñ‚ÑŒ ÑÑ‚Ð¸ Ð³Ð¾Ð»Ð¾Ð²Ð¾Ð»Ð¾Ð¼ÐºÐ¸ ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾, Ð¿Ñ€ÐµÐ¶Ð´Ðµ Ñ‡ÐµÐ¼ Ð¸ÑÐºÐ°Ñ‚ÑŒ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹. Ð£ Ð¼ÐµÐ½Ñ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð»Ð¾ÑÑŒ Ñ€ÐµÑˆÐ¸Ñ‚ÑŒ 7 Ð³Ð¾Ð»Ð¾Ð²Ð¾Ð»Ð¾Ð¼Ð¾Ðº.

Ð”Ð»Ñ ÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð¾ Ñ€ÐµÑˆÐ°Ñ‚ÑŒ Ð³Ð¾Ð»Ð¾Ð²Ð¾Ð»Ð¾Ð¼ÐºÐ¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð² [playground](https://www.evm.codes/playground).

## Ð¥Ð¾Ñ€Ð¾ÑˆÐ¸Ðµ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸

Ð’ Foundry ÐµÑÑ‚ÑŒ Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ð¹ [debugger](https://book.getfoundry.sh/forge/debugger?highlight=opcode#debugger-layout), ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ ÑƒÐ¼ÐµÐµÑ‚ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°Ñ‚ÑŒ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ **opcodes**.

![](./images/foundry-debagger.png)

ÐŸÐ¾Ð´ Ñ†Ð¸Ñ„Ñ€Ð¾Ð¹ 1 Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð° Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ Ð¸ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ð¾Ð³Ð¾ ÐºÐ¾Ð´Ð° Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸.
ÐŸÐ¾Ð´ Ñ†Ð¸Ñ„Ñ€Ð¾Ð¹ 2 Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð° Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð¸ÑÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸.
Ð’ Ð¿Ñ€Ð°Ð²Ð¾Ð¹ Ñ‡Ð°ÑÑ‚Ð¸ Ñ€Ð°Ð¼ÐºÐ°Ð¼Ð¸ Ð±ÐµÐ· Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð² Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ñ‹ Ð´Ð²Ðµ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÑŽÑ‰Ð¸Ðµ Ð·Ð° Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ **stack** Ð¸ **memory**.

## ÐžÑ‚Ð²ÐµÑ‚ Ð½Ð° Ð·Ð°Ð´Ð°Ñ‡ÐºÑƒ 2 + 2 * 2

```6002600202600201```

[01] -> 6002 -> ```PUSH1 02```
[02] -> 6002 -> ```PUSH1 02```
[04] -> 02 -> ```MUL```
[05] -> 6002 -> ```PUSH1 02```
[07] -> 01 -> ```ADD```

## Links
1. [An Ethereum Virtual Machine Opcodes Interactive Reference](https://www.evm.codes/)
3. [The Ethereum Virtual Machine â€” How does it work?](https://medium.com/mycrypto/the-ethereum-virtual-machine-how-does-it-work-9abac2b7c9e)
4. [Demystifying EVM Opcodes](https://www.youtube.com/watch?v=_tcyI_lNvo0&ab_channel=ETHGlobal)