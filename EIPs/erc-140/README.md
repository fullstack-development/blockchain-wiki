# EIP-140: REVERT instruction

**–ê–≤—Ç–æ—Ä:** [–ü–∞–≤–µ–ª –ù–∞–π–¥–∞–Ω–æ–≤](https://github.com/PavelNaydanov) üïµÔ∏è‚Äç‚ôÇÔ∏è

–°—Ç–∞–Ω–¥–∞—Ä—Ç EIP-140 –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é `REVERT` –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—à–ª–∞ —à–∏—Ä–æ–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö –Ω–∞ —è–∑—ã–∫–µ solidity. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, **–æ—Ç–º–µ–Ω–∏—Ç—å** –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–ª–æ–∫—á–µ–π–Ω–∞ –∏ **–≤–µ—Ä–Ω—É—Ç—å** –ø—Ä–∏—á–∏–Ω—É –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.

_–ó–Ω–∞–µ—Ç–µ –ª–∏ –≤—ã!?_ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `REVERT` –±—ã–ª–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∞ —Ç–æ–ª—å–∫–æ 6 —Ñ–µ–≤—Ä–∞–ª—è 2017 –≥–æ–¥–∞. –î–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –ø–æ–¥–æ–±–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ.

–î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `assert()` –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ—Ç–∫–∞—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ —É—Å–ª–æ–≤–∏—è. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `REVERT`, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `assert()` –ø–æ—Ç—Ä–µ–±–ª—è–ª–æ –≤–µ—Å—å –æ—Å—Ç–∞–≤—à–∏–π—Å—è –≥–∞–∑, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –º–µ—Å—Ç–∞ –≤—ã–∑–æ–≤–∞ –≤ –∫–æ–¥–µ.

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `REVERT` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–æ–¥–æ–º –æ–ø–µ—Ä–∞—Ü–∏–∏ [`0xfd`](https://www.evm.codes/#fd?fork=shanghai). –≠—Ç–æ—Ç –∫–æ–¥ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –≤ —Å—Ç–µ–∫–µ:
- **offset**. –°–º–µ—â–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏, —É–∫–∞–∑—ã–≤–∞—é—â–µ–µ –Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- **size**. —Ä–∞–∑–º–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

_–í–∞–∂–Ω–æ!_ –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `REVERT` –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–∞–º—è—Ç–∏ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–∞–º—è—Ç–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `RETURN` –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

### –í–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è revert –≤ –∫–æ–¥–µ solidity

–í–æ–∑–≤—Ä–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–µ–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–µ:

```solidity
function withdraw(uint256 amount) external {
    if (_balance < amount) {
      revert();
    }
    ...
}
```

–í–æ–∑–≤—Ä–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–π –æ—à–∏–±–∫–∏:

```solidity
function withdraw(uint256 amount) external {
    if (_balance < amount) {
      revert("Insufficient amount");
    }
    ...
}
```

–í–æ–∑–≤—Ä–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º [–∫–∞—Å—Ç–æ–º–Ω–æ–π –æ—à–∏–±–∫–∏](https://soliditylang.org/blog/2021/04/21/custom-errors/):

```solidity
error InsufficientAmount();

function withdraw(uint256 amount) external {
    if (_balance < amount) {
      revert InsufficientAmount();
    }
    ...
}
```

## Links

1. [EIP-140: REVERT instruction](https://eips.ethereum.org/EIPS/eip-140)
2. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.soliditylang.org/en/v0.8.23/control-structures.html#revert) solidity –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ revert()
3. –î–ª—è —Ç–µ—Ö –∫–æ–º—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞ [–∏—Å—Ç–æ—Ä–∏—è](https://github.com/ethereum/EIPs/pull/206/commits) –æ–±—Å—É–∂–¥–µ–Ω–∏—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è EIP