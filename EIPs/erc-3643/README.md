# ERC-3643: T-REX - Token for Regulated EXchanges

**–ê–≤—Ç–æ—Ä:** [–ê–ª–µ–∫—Å–µ–π –ö—É—Ü–µ–Ω–∫–æ](https://github.com/bimkon144) üë®‚Äçüíª

## 1. –í–≤–µ–¥–µ–Ω–∏–µ

T-REX (Token for Regulated Exchanges) - —ç—Ç–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–∞—è –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ [ERC-3643](https://eips.ethereum.org/EIPS/eip-3643) –¥–ª—è –≤—ã–ø—É—Å–∫–∞ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏—Ö —Ä–µ–∞–ª—å–Ω—ã–µ –∞–∫—Ç–∏–≤—ã (—Ü–µ–Ω–Ω—ã–µ –±—É–º–∞–≥–∏, –¥–æ–ª–∏ –≤ –∫–æ–º–ø–∞–Ω–∏—è—Ö, —Ñ–æ–Ω–¥—ã, –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å –∏ —Ç.–ø.), –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—è—é—â–∏—Ö ERC-20 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö ERC-20, –≥–¥–µ —Ç–æ–∫–µ–Ω—ã –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ **permissionless** –∏ –º–æ–≥—É—Ç —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –º–µ–∂–¥—É –ª—é–±—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏, ERC-3643 (T-REX) –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ **permissioned –º–æ–¥–µ–ª—å**. –ö–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω –ø—Ä–∏–≤—è–∑–∞–Ω –∫ onchain –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏ –¥–µ—Ä–∂–∞—Ç–µ–ª—è, –∞ –ª—é–±—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –Ω–∏–º (mint, burn, transfer) –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π —Å–ª–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏—é Identity Registry –∏ Compliance, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞—é—Ç, —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –ª–∏ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ compliance –≤—ã–ø—É—Å–∫–∞.

![alt text](./images/common-architecture.png)

–ú–æ—Ç–∏–≤–∞—Ü–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞: –±–ª–æ–∫—á–µ–π–Ω –ø–æ–∫–∞–∑–∞–ª —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å p2p –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç, –Ω–æ –¥–ª—è —Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã—Ö –∞–∫—Ç–∏–≤–æ–≤ (security/RWA) –Ω—É–∂–Ω—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ KYC/AML, –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–µ—Ä–∂–∞—Ç–µ–ª–µ–π, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–æ—Ä–æ–∑–∫–∏ –∏ recovery - –≤—Å—ë –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–º–∞—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –∞ –Ω–µ –æ—Ñ—Ñ—á–µ–π–Ω –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏. ERC-3643 —Ä–µ—à–∞–µ—Ç —ç—Ç–æ —á–µ—Ä–µ–∑ —Å–≤—è–∑–∫—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ identity –∏ compliance.

–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –º—ã —Å–º–æ—Ç—Ä–∏–º –Ω–∞ T-REX –∏–º–µ–Ω–Ω–æ –∫–∞–∫ –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª:
- –∫–∞–∫–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤ –Ω–µ–≥–æ –≤—Ö–æ–¥—è—Ç;
- –∫–∞–∫ —Å–≤—è–∑–∞–Ω—ã identity, registry, compliance –∏ —Å–∞–º —Ç–æ–∫–µ–Ω;
- –∫–∞–∫–∏–µ —Ä–æ–ª–∏ —É—á–∞—Å—Ç–≤—É—é—Ç (—ç–º–∏—Ç–µ–Ω—Ç, –∞–≥–µ–Ω—Ç, –∏–Ω–≤–µ—Å—Ç–æ—Ä, KYC –ø—Ä–æ–≤–∞–π–¥–µ—Ä);
- –∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö;
- –∫–∞–∫ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —á–µ—Ä–µ–∑ Implementation Authority;
- –∫–∞–∫ –¥–µ–ø–ª–æ–∏—Ç—å —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ TREXFactory –∏ TREXGateway;

---

## 2. –¢–µ—Ä–º–∏–Ω—ã

**Security token** - —Ç–æ–∫–µ–Ω, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã–π –∞–∫—Ç–∏–≤ (—Ü–µ–Ω–Ω–∞—è –±—É–º–∞–≥–∞, –¥–æ–ª—è, —Ñ–æ–Ω–¥).

**Permissioned token** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–æ–∫–µ–Ω–∞, –≥–¥–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∞–¥—Ä–µ—Å–∞–º –∏ –ø–æ–¥—á–∏–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª–∞–º –æ–±—Ä–∞—â–µ–Ω–∏—è.

**ERC-3643 (T-REX)** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å permissioned –º–æ–¥–µ–ª—å –ø–æ–≤–µ—Ä—Ö ERC-20.

**ONCHAINID** - –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è onchain –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—è–º–∏ (ERC-734/ERC-735), —Å–≤—è–∑—ã–≤–∞—é—â–∏–π –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ —Å —Ä–µ–∞–ª—å–Ω–æ–π –ª–∏—á–Ω–æ—Å—Ç—å—é –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π.

**Claim** - –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏—è (—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ) –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–∞—è –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º. –ù–∞–ø—Ä–∏–º–µ—Ä: "KYC –ø—Ä–æ–π–¥–µ–Ω", "—Å—Ç—Ä–∞–Ω–∞ —Ä–µ–∑–∏–¥–µ–Ω—Ç—Å—Ç–≤–∞: –°–®–ê", "–∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–≤–µ—Å—Ç–æ—Ä".

**Claim Issuer** - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π (KYC —Å–µ—Ä–≤–∏—Å, –±–∞–Ω–∫, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ kyc —Å–µ—Ä–≤–∏—Å–∞), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∑—ã–≤–∞–µ—Ç claims.

**Claim Topic** - —Ç–∏–ø –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, KYC_CLAIM, COUNTRY_CLAIM, INVESTOR_STATUS_CLAIM). –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–±–æ—Ä –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö topics.

## 3. –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ T-REX

### 3.1. –°—Ö–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

T-REX —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–∞–±–æ—Ä–∞ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–º–∞—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è permissioned –º–æ–¥–µ–ª–∏ —Ç–æ–∫–µ–Ω–æ–≤. –ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –æ–±—â–∞—è —Å—Ö–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

![alt text](./images/t-rex-architecture.png)
–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

**Permissioned token** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ç–æ–∫–µ–Ω–∞, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç ERC-3643. –ü–æ –º–µ—Ç–æ–¥–∞–º –æ–Ω —Å–æ–≤–º–µ—Å—Ç–∏–º —Å ERC-20, –¥–æ–±–∞–≤–ª—è—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ compliance –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π (`transfer`, `mint`, `burn`). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–¥–º–∏–Ω –æ–ø–µ—Ä–∞—Ü–∏–∏: pause, –∑–∞–º–æ—Ä–æ–∑–∫—É –∞–¥—Ä–µ—Å–æ–≤ (freeze), –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã (`forcedTransfer` - –ø–µ—Ä–µ–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –±–µ–∑ —Å–æ–≥–ª–∞—Å–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ —Ä–µ—à–µ–Ω–∏—é —Å—É–¥–∞ –∏–ª–∏ –ø—Ä–∏ —Å–∞–Ω–∫—Ü–∏—è—Ö) –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ (`recovery` - –ø–µ—Ä–µ–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞, –∫–æ–≥–¥–∞ –≤–ª–∞–¥–µ–ª–µ—Ü –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ onchain –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å).

[ONCHAINID](https://docs.onchainid.com/) - –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è onchain –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—è–º–∏ (—Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã ERC-734/ERC-735), —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å ERC-3643. –•—Ä–∞–Ω–∏—Ç claims, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ issuers, –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –∏—Ö –ø—Ä–æ–≤–µ—Ä–∫–∏. –ù–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é T-REX, –Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

**Identity Registry** - —Ä–µ–µ—Å—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑—ã–≤–∞–µ—Ç –∞–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–æ–≤ —Å onchain –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—è–º–∏ (ONCHAINID).

**Identity Registry Storage** - –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–µ–π. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫ –Ω–µ–º—É –º–Ω–æ–∂–µ—Å—Ç–≤–æ Identity Registry, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–º–∏ identity —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç.

**Compliance + Modules** - –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–º–∏ –º–æ–¥—É–ª—è–º–∏ compliance, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ç–æ–∫–µ–Ω–∞: –≥–µ–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –ª–∏–º–∏—Ç—ã –ø–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º –∏ –±–∞–ª–∞–Ω—Å–∞–º, –ø–µ—Ä–∏–æ–¥—ã lockup/vesting.

**Trusted Issuers Registry** - —Ä–µ–µ—Å—Ç—Ä –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–π (KYC –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –±–∞–Ω–∫–∏, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã). –•—Ä–∞–Ω–∏—Ç —Å–ø–∏—Å–æ–∫ –∞–¥—Ä–µ—Å–æ–≤, —á—å–∏ –ø–æ–¥–ø–∏—Å–∏ –Ω–∞ claim —Å—á–∏—Ç–∞—é—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤.

**Claim Topics Registry** - —Ä–µ–µ—Å—Ç—Ä —Ç–∏–ø–æ–≤ claims, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –≤–ª–∞–¥–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–º. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (KYC –ø—Ä–æ–π–¥–µ–Ω, —Å—Ç—Ä–∞–Ω–∞ —Ä–µ–∑–∏–¥–µ–Ω—Ç—Å—Ç–≤–∞, —Å—Ç–∞—Ç—É—Å –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ –∏ —Ç.–ø.) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –∞–¥—Ä–µ—Å –º–æ–≥ –¥–µ—Ä–∂–∞—Ç—å —Ç–æ–∫–µ–Ω.

**Claim Issuer** - –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ claim (–Ω–∞–ø—Ä–∏–º–µ—Ä, KYC –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏–ª–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∑—ã–≤–∞–µ—Ç claim. Claim Issuer –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ Trusted Issuers Registry, –∞ –µ–≥–æ –ø–æ–¥–ø–∏—Å–∏ –∑–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ ONCHAINID –∏ Claim Topics Registry.

### 3.2. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ `transfer`

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –æ–Ω–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–æ–∫–µ–Ω–æ–≤. –ù–∏–∂–µ —à–∞–≥–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ü–∏—Ñ—Ä–∞–º –Ω–∞ —Å—Ö–µ–º–µ:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –≤—ã–∑—ã–≤–∞–µ—Ç `token.transfer(to, amount)`, **Token** —Å—Ä–∞–∑—É –¥–µ–ª–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–Ω–µ paused, –Ω–µ frozen, —Ö–≤–∞—Ç–∞–µ—Ç –±–∞–ª–∞–Ω—Å–∞).
2. **Token** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è `to` —á–µ—Ä–µ–∑ `identityRegistry.isVerified()`.
   - Identity Registry –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –ø–æ–ª—É—á–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–æ–ø–∏–∫–∏ —á–µ—Ä–µ–∑ `getClaimTopics()` –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ `ClaimTopicsRegistry` –∏ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö issuers —á–µ—Ä–µ–∑ `getTrustedIssuersForClaimTopic()` –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ `TrustedIssuersRegistry`;
   - Identity Registry –Ω–∞ ONCHAINID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–∑—ã–≤–∞–µ—Ç `getClaim()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –≤–Ω–µ—Å–µ–Ω–Ω–æ–º claim –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É `isValidClaim()` –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ `ClaimIssuer`, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ claim –≤–∞–ª–∏–¥–Ω—ã–π –∏ –Ω–µ –æ—Ç–æ–∑–≤–∞–Ω.
   - –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ø—Ä–∞–≤–∏–ª–∞ Compliance –º–æ–≥—É—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ `isVerified()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è.
3. **Token** –≤—ã–∑—ã–≤–∞–µ—Ç `compliance.canTransfer(from, to, amount)`.
4. **Compliance** –¥–µ–ª–∞–µ—Ç `moduleCheck()`. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ (–≥–µ–æ, –ª–∏–º–∏—Ç—ã, lockup) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –≤ **Token**.
5. –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞, **Token** –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–µ–≤–æ–¥ –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç **Compliance** —á–µ—Ä–µ–∑ `compliance.transferred(from, to, amount)` (–¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤/—Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∞–≤–∏–ª).

**–ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:** –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –¥–≤–∞ —Å–ª–æ—è –ø—Ä–æ–≤–µ—Ä–∫–∏ - Identity (–∫—Ç–æ –º–æ–∂–µ—Ç –¥–µ—Ä–∂–∞—Ç—å —Ç–æ–∫–µ–Ω) –∏ Compliance (–∫–∞–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –æ–ø–µ—Ä–∞—Ü–∏—è–º).

–î–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, –∫—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏, –º—ã —Å–Ω–∞—á–∞–ª–∞ —Ä–∞–∑–±–µ—Ä—ë–º —Ä–æ–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–∏—Å—Ç–µ–º—ã.

---

## 4. –£—á–∞—Å—Ç–Ω–∏–∫–∏ –∏ —Ä–æ–ª–∏

T-REX –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —á–µ—Ä–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–æ—Å—Ç—É–ø–∞ –≤ –∫–∞–∂–¥–æ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ. –ù–∏–∂–µ –æ–ø–∏—Å–∞–Ω—ã —Ä–æ–ª–∏ –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏–∑ —Å—Ö–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

### 4.1. Permissioned Token

–í–ª–∞–¥–µ–ª–µ—Ü —Ç–æ–∫–µ–Ω–∞ **Owner** —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyOwner` –∏ –µ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- `setName()`, `setSymbol()`, `setOnchainID()` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞ (–∏–º—è, —Å–∏–º–≤–æ–ª, ONCHAINID –∞–¥—Ä–µ—Å)
- `setIdentityRegistry()`, `setCompliance()` - –ø—Ä–∏–≤—è–∑–∫–∞ Identity Registry –∏ Compliance –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- `addAgent()`, `removeAgent()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏ (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ TOKEN_AGENT)
- `transferOwnership()` - –ø–µ—Ä–µ–¥–∞—á–∞ ownership —Ç–æ–∫–µ–Ω–∞

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –æ–Ω –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —Ç–∞–∫—É—é –∫–∞–∫ –∏–º—è, —Å–∏–º–≤–æ–ª, –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –∫ —Ç–æ–∫–µ–Ω—É –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã registry –∏ compliance, –¥–æ–±–∞–≤–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É–∂–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —ç–º–∏—Å—Å–∏–µ–π —Ç–æ–∫–µ–Ω–∞. –¢–∞–∫–∂–µ Owner –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç ONCHAINID, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –ø–æ–¥ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω, –ø–æ —Å—É—Ç–∏ –∫–∞–∫ –ø–∞—Å–ø–æ—Ä—Ç –∞–∫—Ç–∏–≤–∞.

**TOKEN_AGENT**, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º `onlyAgent`:
- `mint(address _to, uint256 _amount)` - –º–∏–Ω—Ç–∏–Ω–≥ —Ç–æ–∫–µ–Ω–æ–≤ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∏–Ω–≤–µ—Å—Ç–æ—Ä—É
- `burn(address _userAddress, uint256 _amount)` - —Å–∂–∏–≥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- `pause()`, `unpause()` - –ø–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Ç–æ–∫–µ–Ω–∞
- `setAddressFrozen(address _userAddress, bool _freeze)` - –∑–∞–º–æ—Ä–æ–∑–∫–∞/—Ä–∞–∑–º–æ—Ä–æ–∑–∫–∞ –∞–¥—Ä–µ—Å–∞ (–±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- `freezePartialTokens()`, `unfreezePartialTokens()` - –∑–∞–º–æ—Ä–æ–∑–∫–∞/—Ä–∞–∑–º–æ—Ä–æ–∑–∫–∞ —á–∞—Å—Ç–∏ –±–∞–ª–∞–Ω—Å–∞ –∞–¥—Ä–µ—Å–∞
- `forcedTransfer(address _from, address _to, uint256 _amount)` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ (–ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ compliance, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ —Ä–µ—à–µ–Ω–∏—é —Å—É–¥–∞)
- `recoveryAddress(address _lostWallet, address _newWallet, address _investorOnchainID)` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ —Å –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ –Ω–∞ –Ω–æ–≤—ã–π (–ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞)
- Batch –æ–ø–µ—Ä–∞—Ü–∏–∏: `batchMint()`, `batchBurn()`, `batchSetAddressFrozen()`, `batchFreezePartialTokens()`, `batchForcedTransfer()`

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, TOKEN_AGENT –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏: –≤—ã–ø—É—Å–∫–∞—Ç—å –∏ —Å–∂–∏–≥–∞—Ç—å —Ç–æ–∫–µ–Ω—ã, —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–∞ (–ø–∞—É–∑–∞), –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–º–æ—Ä–æ–∑–∫—É –∞–¥—Ä–µ—Å–æ–≤ –∏–ª–∏ —á–∞—Å—Ç–∏ –±–∞–ª–∞–Ω—Å–∞, –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ç–æ–∫–µ–Ω–∞–º –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π.

### 4.2. Identity Registry

–í–ª–∞–¥–µ–ª–µ—Ü –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, **Owner**, —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyOwner` –∏ –µ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- `setIdentityRegistryStorage()` - –ø—Ä–∏–≤—è–∑–∫–∞ Identity Registry Storage –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- `setClaimTopicsRegistry()` - –ø—Ä–∏–≤—è–∑–∫–∞ Claim Topics Registry –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- `setTrustedIssuersRegistry()` - –ø—Ä–∏–≤—è–∑–∫–∞ Trusted Issuers Registry –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- `addAgent()`, `removeAgent()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏ (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ IR_AGENT)
- `transferOwnership()` - –ø–µ—Ä–µ–¥–∞—á–∞ ownership

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Owner –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Å—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ–µ—Å—Ç—Ä–∞: –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö (`IdentityRegistryStorage`), —É–∫–∞–∑–∞—Ç—å –∫–∞–∫–∏–µ —Ç–∏–ø—ã claims –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è —Ç–æ–∫–µ–Ω–∞ (—á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `ClaimTopicsRegistry`), –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö KYC –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (—á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `TrustedIssuersRegistry`), –∞ —Ç–∞–∫–∂–µ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤.

**IR_AGENT**, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyAgent`:
- `registerIdentity(address _userAddress, IIdentity _identity, uint16 _country)` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ —Å ONCHAINID –∏ –∫–æ–¥–æ–º —Å—Ç—Ä–∞–Ω—ã
- `updateIdentity()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ONCHAINID –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞
- `updateCountry()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞
- `deleteIdentity()` - —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞
- `batchRegisterIdentity()` - –ø–∞–∫–µ—Ç–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, IR_AGENT –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–æ–º –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤: —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏—Ö –≤ —Å–∏—Å—Ç–µ–º–µ, —Å–≤—è–∑—ã–≤–∞—è –∞–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–æ–≤ —Å –∏—Ö onchain –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—è–º–∏, –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏ –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å –∑–∞–ø–∏—Å–∏.

### 4.3. Claim Topics Registry

–í–ª–∞–¥–µ–ª–µ—Ü —Ä–µ–µ—Å—Ç—Ä–∞ **Owner** —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyOwner` –∏ –µ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- `addClaimTopic(uint256 _claimTopic)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ claim topic (–Ω–∞–ø—Ä–∏–º–µ—Ä, KYC_CLAIM)
- `removeClaimTopic()` - —É–¥–∞–ª–µ–Ω–∏–µ claim topic
- `transferOwnership()` - –ø–µ—Ä–µ–¥–∞—á–∞ ownership

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Owner –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ –¥–ª—è –≤–ª–∞–¥–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–º. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ KYC, –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—Ä–æ–¥–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ –∏–ª–∏ —Ä–µ–∑–∏–¥–µ–Ω—Ç—Å—Ç–≤–∞ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –¥–æ–ø—É—Å–∫–∞ –∫ —Ç–æ–∫–µ–Ω—É.

### 4.4. Trusted Issuers Registry

–í–ª–∞–¥–µ–ª–µ—Ü —Ä–µ–µ—Å—Ç—Ä–∞ **Owner** —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyOwner` –∏ –µ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- `addTrustedIssuer(IClaimIssuer _trustedIssuer, uint256[] _claimTopics)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ issuer —Å claim topics (–∫–∞–∫–∏–µ —Ç–∏–ø—ã claims –æ–Ω –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å)
- `removeTrustedIssuer()` - —É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ issuer
- `updateIssuerClaimTopics()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ claim topics –¥–ª—è issuer
- `transferOwnership()` - –ø–µ—Ä–µ–¥–∞—á–∞ ownership

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Owner —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–∫–æ–º –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö KYC –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–¥–∞–≤–∞—Ç—å claims –¥–ª—è —Ç–æ–∫–µ–Ω–∞. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –¥–ª—è –≤—ã–¥–∞—á–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ claims. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–π KYC, –∞ –¥—Ä—É–≥–æ–π - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π KYC –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–∫–∫—Ä–µ–¥–∏—Ç–∞—Ü–∏–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é.

### 4.5. ONCHAINID (identity contract)

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–ª—é—á–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ø–æ —Å—É—Ç–∏ —Ä–æ–ª–∏).

–í–ª–∞–¥–µ–ª–µ—Ü –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ **MANAGEMENT Key** —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyManager` –∏ –µ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- `addKey()`, `removeKey()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π —Å –ª—é–±—ã–º purpose)
- `approve()` - –æ–¥–æ–±—Ä–µ–Ω–∏–µ execution –∑–∞–ø—Ä–æ—Å–æ–≤ (—ç—Ç–æ –Ω–∞ –ø—Ä—è–º—É—é –Ω–µ –∫–∞—Å–∞–µ—Ç—Å—è t-rex –∏ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–º–∫–∏ —Å—Ç–∞—Ç—å–∏)
- `addClaim()`, `removeClaim()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ claims

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, MANAGEMENT Key –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å—é: –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –ª—é–±—ã–µ –∫–ª—é—á–∏, –æ–¥–æ–±—Ä—è—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å claims. –û–±—ã—á–Ω–æ —ç—Ç–æ—Ç –∫–ª—é—á –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —É –±—ç–∫–µ–Ω–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å—é –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ –æ—Ç –µ–≥–æ –∏–º–µ–Ω–∏.

**CLAIM Key** - –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyClaimKey`:
- `addClaim()`, `removeClaim()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ claims (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ claims)

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, CLAIM Key –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å claims, –Ω–æ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–ª—é—á–∞–º–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å: MANAGEMENT Key –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –≤—Å—ë, –∞ CLAIM Key –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω–æ–º—É —Å–µ—Ä–≤–∏—Å—É —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å claims.

### 4.6. Claim Issuer –∫–æ–Ω—Ç—Ä–∞–∫—Ç

–í–ª–∞–¥–µ–ª–µ—Ü Claim Issuer —á–µ—Ä–µ–∑ **MANAGEMENT Key** —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyManager` –∏ –µ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- `revokeClaimBySignature(bytes signature)` - –æ—Ç–∑—ã–≤ claim –ø–æ –ø–æ–¥–ø–∏—Å–∏
- `revokeClaim(bytes32 claimId, address identity)` - –æ—Ç–∑—ã–≤ claim –ø–æ claimId –∏ –∞–¥—Ä–µ—Å—É –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏
- –ù–∞—Å–ª–µ–¥—É–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Identity (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏ —á–µ—Ä–µ–∑ `addKey()`, `removeKey()`, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ claims —á–µ—Ä–µ–∑ `addClaim()`, `removeClaim()`)

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Claim Issuer –º–æ–∂–µ—Ç –æ—Ç–∑—ã–≤–∞—Ç—å –≤—ã–¥–∞–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ claims –Ω–∞ ONCHAINID –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞, –µ—Å–ª–∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä –±–æ–ª—å—à–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å—Ç—ë–∫ —Å—Ä–æ–∫ KYC –∏–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –Ω–∞—Ä—É—à–µ–Ω–∏—è). –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º. Claim Issuer —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ –∫–ª—é—á–∞–º–∏ –∏ –¥–æ–±–∞–≤–ª—è—Ç—å claims –≤ —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å, —Ç–∞–∫ –∫–∞–∫ –Ω–∞—Å–ª–µ–¥—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å Identity –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ª—é–±–æ–π –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å claim, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —ç—Ç–∏–º Claim Issuer, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ –≤ Identity Registry.

### 4.7. Compliance

–í–ª–∞–¥–µ–ª–µ—Ü Compliance –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ **Owner** —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyOwner` –∏ –µ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- `addModule(address _module)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ compliance –º–æ–¥—É–ª—è (–º–∞–∫—Å–∏–º—É–º 25 –º–æ–¥—É–ª–µ–π)
- `removeModule(address _module)` - —É–¥–∞–ª–µ–Ω–∏–µ compliance –º–æ–¥—É–ª—è
- `callModuleFunction(bytes callData, address _module)` - –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥—É–ª—è –¥–ª—è –µ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `bindToken()`, `unbindToken()` - –ø—Ä–∏–≤—è–∑–∫–∞/–æ—Ç–≤—è–∑–∫–∞ —Ç–æ–∫–µ–Ω–∞ (–º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —Å–∞–º–∏–º —Ç–æ–∫–µ–Ω–æ–º –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –ø—Ä–∏–≤—è–∑–∫–µ)
- `transferOwnership()` - –ø–µ—Ä–µ–¥–∞—á–∞ ownership

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, Owner –º–æ–∂–µ—Ç –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ compliance: –¥–æ–±–∞–≤–ª—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–æ–¥—É–ª–∏ (–≥–µ–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –ª–∏–º–∏—Ç—ã, lockup –∏ —Ç.–ø.), –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–π, –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–¥–∞–ª—è—Ç—å –º–æ–¥—É–ª–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–¥ –º–µ–Ω—è—é—â–∏–µ—Å—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Ç–æ–∫–µ–Ω–∞.
–ú–æ–¥—É–ª–∏ –º–æ–∂–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–∞–º–æ–º—É, –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é compliance. –ê —É–∂–µ –≥–æ—Ç–æ–≤—ã–µ –º–æ–¥—É–ª–∏ –æ—Ç Tokeny –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [—Ç—É—Ç](https://github.com/TokenySolutions/T-REX/tree/main/contracts/compliance/modular/modules).

**Token** - –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `onlyToken` (—Ç–æ–ª—å–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω):
- `transferred(address _from, address _to, uint256 _value)` - callback –ø–æ—Å–ª–µ transfer (–¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∞–≤–∏–ª)
- `created(address _to, uint256 _value)` - callback –ø–æ—Å–ª–µ mint (–¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∞–≤–∏–ª)
- `destroyed(address _from, uint256 _value)` - callback –ø–æ—Å–ª–µ burn (–¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∞–≤–∏–ª)

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ç–æ–∫–µ–Ω —É–≤–µ–¥–æ–º–ª—è–µ—Ç Compliance –æ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –º–æ–¥—É–ª—è–º –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–≤–æ—ë –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—á—ë—Ç—á–∏–∫–∏ –ª–∏–º–∏—Ç–æ–≤, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ç.–ø.).

## 5. –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

–ß—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `transfer` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

**Permissioned Token**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç `token.transfer(to, amount)`, [Token](https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/token/Token.sol#L417) –¥–µ–ª–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –∑–∞—Ç–µ–º –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ compliance.

–í –º–µ—Ç–æ–¥–µ `transfer` —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –∑–∞—Ç–µ–º –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `isVerified` –∏ `canTransfer`, –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è callback `transferred`.

```solidity

function transfer(address _to, uint256 _amount) public override whenNotPaused returns (bool) {
    require(!_frozen[_to] && !_frozen[msg.sender], "wallet is frozen");
    // subtract frozen tokens from available balance
    require(_amount <= balanceOf(msg.sender) - (_frozenTokens[msg.sender]), "Insufficient Balance");
    // check verification only for recipient, compliance rules for both addresses
    if (_tokenIdentityRegistry.isVerified(_to) && _tokenCompliance.canTransfer(msg.sender, _to, _amount)) {
        _transfer(msg.sender, _to, _amount);
        // callback to update module state (counters, limits, etc.)
        _tokenCompliance.transferred(msg.sender, _to, _amount);
        return true;
    }
    revert("Transfer not possible");
}
```

–ò–∑ Token –º—ã –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ Identity Registry, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è.

**Identity Registry**

Token –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ [identityRegistry.isVerified()](https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/registry/implementation/IdentityRegistry.sol#L174).

–ú–µ—Ç–æ–¥ `isVerified` –ø–æ–ª—É—á–∞–µ—Ç –∞–¥—Ä–µ—Å ONCHAINID –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —á–µ—Ä–µ–∑ `identity()` (–∫–æ—Ç–æ—Ä—ã–π –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç IdentityRegistryStorage), –∑–∞—Ç–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö claims:

1. –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö claim topics –∏–∑ **Claim Topics Registry** (–Ω–∞–ø—Ä–∏–º–µ—Ä, KYC_CLAIM)
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ topic –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö **Claim Issuers** –∏–∑ **Trusted Issuers Registry** (–∫–∞–∫–∏–µ KYC –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –º–æ–≥—É—Ç –≤—ã–¥–∞–≤–∞—Ç—å —ç—Ç–æ—Ç —Ç–∏–ø claim)
3. –ß–µ—Ä–µ–∑ **ONCHAINID/Identity –∫–æ–Ω—Ç—Ä–∞–∫—Ç** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ claim (–ø–æ–¥–ø–∏—Å—å, issuer, –¥–∞–Ω–Ω—ã–µ)
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ **Claim Issuer**, —á—Ç–æ claim –≤–∞–ª–∏–¥–µ–Ω –∏ –Ω–µ –æ—Ç–æ–∑–≤–∞–Ω - —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫ Claim Issuer –º–æ–∂–µ—Ç –æ—Ç–æ–∑–≤–∞—Ç—å claim (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ KYC –∏–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–π), –∏ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ–ª—å—à–µ –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ç–æ–∫–µ–Ω—É. –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏–º–µ–Ω–Ω–æ —Ç–∞–∫, –∞ –Ω–µ —á–µ—Ä–µ–∑ –æ—Ç–∑—ã–≤ claim —É —Å–∞–º–æ–≥–æ identity –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞, —Ä–∞—Å—Å–∫–∞–∂–µ–º —á—É—Ç—å –ø–æ–∑–∂–µ.

```solidity
function isVerified(address _userAddress) external view override returns (bool) {
    // get Identity contract address from Storage
    if (address(identity(_userAddress)) == address(0)) {return false;}
    // get required claim topics from Claim Topics Registry
    uint256[] memory requiredClaimTopics = _tokenTopicsRegistry.getClaimTopics();
    if (requiredClaimTopics.length == 0) { return true; }

    uint256 foundClaimTopic;
    uint256 scheme;
    address issuer;
    bytes memory sig;
    bytes memory data;
    uint256 claimTopic;
    for (claimTopic = 0; claimTopic < requiredClaimTopics.length; claimTopic++) {
        // get trusted issuers for this claim topic from Trusted Issuers Registry
        IClaimIssuer[] memory trustedIssuers =
            _tokenIssuersRegistry.getTrustedIssuersForClaimTopic(requiredClaimTopics[claimTopic]);
        if (trustedIssuers.length == 0) {return false;}

        bytes32[] memory claimIds = new bytes32[](trustedIssuers.length);
        for (uint256 i = 0; i < trustedIssuers.length; i++) {
            claimIds[i] = keccak256(abi.encode(trustedIssuers[i], requiredClaimTopics[claimTopic]));
        }

        for (uint256 j = 0; j < claimIds.length; j++) {
            // get claim data from ONCHAINID/Identity contract
            (foundClaimTopic, scheme, issuer, sig, data, ) = identity(_userAddress).getClaim(claimIds[j]);

            if (foundClaimTopic == requiredClaimTopics[claimTopic]) {
                // verify claim validity and non-revocation through Claim Issuer
                try IClaimIssuer(issuer).isClaimValid(identity(_userAddress), requiredClaimTopics[claimTopic], sig, data)
                returns(bool _validity) {
                    if (_validity) { j = claimIds.length; }
                    if (!_validity && j == (claimIds.length - 1)) { return false; }
                } catch {
                    if (j == (claimIds.length - 1)) { return false; }
                }
            } else if (j == (claimIds.length - 1)) { return false; }
        }
    }
    return true;
}
```

–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É ClaimTopicsRegistry, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥—è—Ç—Å—è claim topics.

**Claim Topics Registry**

–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ Identity Registry –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö claim topics –¥–ª—è —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ [getClaimTopics()](https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/registry/implementation/ClaimTopicsRegistry.sol#L106).

```solidity
function getClaimTopics() external view override returns (uint256[] memory) {
    return _claimTopics;
}
```

–ü–æ–ª—É—á–∏–≤ —Å–ø–∏—Å–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö topics, Identity Registry –¥–ª—è –∫–∞–∂–¥–æ–≥–æ topic –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö Claim Issuers, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–¥–∞–≤–∞—Ç—å —ç—Ç–æ—Ç —Ç–∏–ø claim.

**Trusted Issuers Registry**

–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ Identity Registry –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö Claim Issuers, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤—ã–¥–∞–≤–∞—Ç—å claims –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ claim topic —á–µ—Ä–µ–∑ [getTrustedIssuersForClaimTopic()](https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/registry/implementation/TrustedIssuersRegistry.sol#L166).

```solidity
function getTrustedIssuersForClaimTopic(uint256 claimTopic) external view override returns (IClaimIssuer[] memory) {
    return _claimTopicsToTrustedIssuers[claimTopic];
}
```

–¢–µ–ø–µ—Ä—å Identity Registry –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ Claim Issuers –¥–æ–≤–µ—Ä–µ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ topic. –î–∞–ª–µ–µ –æ–Ω –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ Identity –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ claim, –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –æ–¥–Ω–∏–º –∏–∑ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö issuers.

**ONCHAINID / Identity contract**

–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ Identity Registry –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö claim —á–µ—Ä–µ–∑ [getClaim()](https://github.com/onchain-id/solidity/blob/main/contracts/Identity.sol#L450). –•—Ä–∞–Ω–∏—Ç claims (ERC-734/735) –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç Claim Issuer –∏ –ø–æ–¥–ø–∏—Å—å —Å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å—é –¥–µ—Ä–∂–∞—Ç–µ–ª—è.

```solidity
function getClaim(bytes32 _claimId)
    public
    override
    view
    returns(
        uint256 topic,
        uint256 scheme,
        address issuer,
        bytes memory signature,
        bytes memory data,
        string memory uri
    )
{
    return (
        _claims[_claimId].topic,
        _claims[_claimId].scheme,
        _claims[_claimId].issuer,
        _claims[_claimId].signature,
        _claims[_claimId].data,
        _claims[_claimId].uri
    );
}
```

–ü–æ–ª—É—á–∏–≤ –¥–∞–Ω–Ω—ã–µ claim –∏–∑ Identity –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, Identity Registry –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Å–∞–º–æ–º—É Claim Issuer, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ claim –≤—Å—ë –µ—â—ë –≤–∞–ª–∏–¥–µ–Ω –∏ –Ω–µ –±—ã–ª –æ—Ç–æ–∑–≤–∞–Ω.

**Claim Issuer**

–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ Identity Registry –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ claim —á–µ—Ä–µ–∑ [isClaimValid()](https://github.com/onchain-id/solidity/blob/main/contracts/ClaimIssuer.sol#L46). –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å –∏ —Å—Ç–∞—Ç—É—Å –æ—Ç–∑—ã–≤–∞ claim.

```solidity
function isClaimValid(
    IIdentity _identity,
    uint256 claimTopic,
    bytes memory sig,
    bytes memory data)
public override(Identity, IClaimIssuer) view returns (bool claimValid)
{
    bytes32 dataHash = keccak256(abi.encode(_identity, claimTopic, data));
    // use abi.encodePacked to concatenate the message prefix and the message to sign
    bytes32 prefixedHash = keccak256(abi.encodePacked("\x19Ethereum Signed Message:\n32", dataHash));

    // recover address of data signer
    address recovered = getRecoveredAddress(sig, prefixedHash);

    // take hash of recovered address
    bytes32 hashedAddr = keccak256(abi.encode(recovered));

    // check if issuer has CLAIM key (purpose 3) and claim is not revoked
    if (keyHasPurpose(hashedAddr, 3) && (isClaimRevoked(sig) == false)) {
        return true;
    }

    return false;
}
```

**–ü–æ—á–µ–º—É –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å claim –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç ClaimIssuer, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é —É ONCHAINID –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞?**

–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã. –ò–Ω–≤–µ—Å—Ç–æ—Ä –≤–ª–∞–¥–µ–µ—Ç —Å–≤–æ–∏–º ONCHAINID –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –∏ –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å claims —á–µ—Ä–µ–∑ MANAGEMENT key: –¥–æ–±–∞–≤–ª—è—Ç—å, —É–¥–∞–ª—è—Ç—å claims –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–ª—é—á–∞–º–∏ —Ç–µ—Ö, –∫—Ç–æ –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å claims.

–ï—Å–ª–∏ –±—ã –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ claim –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ ONCHAINID –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞, —Ç–æ –ø—Ä–∏ –æ—Ç–∑—ã–≤–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ KYC –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º –∏–Ω–≤–µ—Å—Ç–æ—Ä –º–æ–≥ –±—ã –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å CLAIM key —É ClaimIssuer –∏–∑ —Å–≤–æ–µ–≥–æ Identity –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –°–∏—Å—Ç–µ–º–∞ –Ω–µ —É–∑–Ω–∞–ª–∞ –±—ã, —á—Ç–æ claim –±—ã–ª –æ—Ç–æ–∑–≤–∞–Ω, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –±—ã —Ç–æ–ª—å–∫–æ –≤ ONCHAINID –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞, –≥–¥–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å. –ò–Ω–≤–µ—Å—Ç–æ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–ª –±—ã –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ç–æ–∫–µ–Ω–∞–º, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ—Ç–∑—ã–≤ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏.

–í —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç **ClaimIssuer**, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π mapping –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã—Ö claims (`revokedClaims`). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–∂–µ –µ—Å–ª–∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä —É–¥–∞–ª–∏—Ç CLAIM key —É ClaimIssuer –∏–∑ —Å–≤–æ–µ–≥–æ ONCHAINID, ClaimIssuer –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å, —á—Ç–æ claim –±—ã–ª –æ—Ç–æ–∑–≤–∞–Ω, –∏ `isClaimValid()` –≤–µ—Ä–Ω—ë—Ç `false`. –û—Ç–∑—ã–≤ claim –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–æ—Å—Ç—ã–º –≤—ã–∑–æ–≤–æ–º –º–µ—Ç–æ–¥–∞ `revokeClaimBySignature()` –∏–ª–∏ `revokeClaim()` –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ ClaimIssuer:

```solidity
function revokeClaimBySignature(bytes calldata signature) external override delegatedOnly onlyManager {
    require(!revokedClaims[signature], "Conflict: Claim already revoked");

    revokedClaims[signature] = true;

    emit ClaimRevoked(signature);
}
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é claim –æ—Å—Ç–∞—ë—Ç—Å—è —É ClaimIssuer (KYC –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞), –∞ –Ω–µ —É —Å–∞–º–æ–≥–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

**Identity Registry Storage**

Identity Registry Storage - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–µ–π. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫ –Ω–µ–º—É –º–Ω–æ–∂–µ—Å—Ç–≤–æ Identity Registry, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–º–∏ identity —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç. –≠—Ç–æ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª—è—Ç—å Identity Registry –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–µ–π, –∞ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ–µ—Å—Ç—Ä–æ–≤.

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `_tokenIdentityRegistry.isVerified(_to)`, Token –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫–æ –≤—Ç–æ—Ä–æ–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ - –ø—Ä–æ–≤–µ—Ä–∫–µ compliance. –ï—Å–ª–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –¥–µ—Ä–∂–∞—Ç—å —Ç–æ–∫–µ–Ω (–∏–º–µ–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ claims), —Ç–æ compliance –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ –ª–∏ —Å–∞–º–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –±–∏–∑–Ω–µ—Å –ø—Ä–∞–≤–∏–ª–∞–º —Ç–æ–∫–µ–Ω–∞.

**Compliance + Modules**

Token –≤—ã–∑—ã–≤–∞–µ—Ç [compliance.canTransfer()](https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/compliance/modular/ModularCompliance.sol#L245) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª compliance. Compliance –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏, –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é.

```solidity
function canTransfer(address _from, address _to, uint256 _value) external view override returns (bool) {
    uint256 length = _modules.length;
    // check all modules - all must return true for transfer to be allowed
    for (uint256 i = 0; i < length; i++) {
        if (!IModule(_modules[i]).moduleCheck(_from, _to, _value, address(this))) {
            return false;
        }
    }
    return true;
}
```

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥ `moduleCheck()`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤–æ—ë –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä –º–æ–¥—É–ª—è **SupplyLimitModule**, –∫–æ—Ç–æ—Ä—ã–π –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π supply —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ [moduleCheck()](https://github.com/TokenySolutions/T-REX/blob/main/contracts/compliance/modular/modules/SupplyLimitModule.sol#L134):

```solidity
function moduleCheck(
    address _from,
    address /*_to*/,
    uint256 _value,
    address _compliance
) external view override returns (bool) {
    // check if this is a mint operation (_from == address(0)) and if it would exceed supply limit
    if (_from == address(0) &&
        (IToken(IModularCompliance(_compliance).getTokenBound()).totalSupply() + _value) > _supplyLimits[_compliance]) {
        return false;
    }
    return true;
}
```

–ú–æ–¥—É–ª—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –ø—Ä–µ–≤—ã—Å–∏—Ç –ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ª–∏–º–∏—Ç supply. –ï—Å–ª–∏ —ç—Ç–æ mint –æ–ø–µ—Ä–∞—Ü–∏—è (`_from == address(0)`) –∏ –Ω–æ–≤—ã–π totalSupply –ø—Ä–µ–≤—ã—Å–∏—Ç –ª–∏–º–∏—Ç, –º–æ–¥—É–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `false`, –±–ª–æ–∫–∏—Ä—É—è –æ–ø–µ—Ä–∞—Ü–∏—é.

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ Token –≤—ã–∑—ã–≤–∞–µ—Ç callback `transferred()` –≤ Compliance, –∫–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –≤—ã–∑—ã–≤–∞–µ—Ç `moduleTransferAction()` –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Å—á—ë—Ç—á–∏–∫–∏ –ª–∏–º–∏—Ç–æ–≤, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ç.–ø.). –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–¥—É–ª–∏ –º–æ–≥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—á—ë—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥—ã lockup –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –ª–∏–º–∏—Ç—ã –ø–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º.

### 5.1. –ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

–í —Å–∏—Å—Ç–µ–º–µ T-REX –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫ permissioned —Ç–æ–∫–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ä–µ–≥—É–ª–∏—Ä—É–µ–º–æ–π —Å—Ä–µ–¥–µ, –≥–¥–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–≤ –∏ –±–∏–∑–Ω–µ—Å –ø—Ä–∞–≤–∏–ª–∞ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è—é—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∫ –Ω–æ–≤—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º, –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã, –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—è—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ—Å—Ç—å –∞–¥—Ä–µ—Å–æ–≤ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤?**

T-REX –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω **Implementation Authority**, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ **Beacon Proxy** –ø–∞—Ç—Ç–µ—Ä–Ω—É. –í —ç—Ç–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–µ –ø—Ä–æ–∫—Å–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–µ —Ö—Ä–∞–Ω—è—Ç –∞–¥—Ä–µ—Å implementation –Ω–∞–ø—Ä—è–º—É—é, –∞ –ø–æ–ª—É—á–∞—é—Ç –µ–≥–æ –∏–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (Implementation Authority) –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ —á–µ—Ä–µ–∑ fallback —Ñ—É–Ω–∫—Ü–∏—é. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ª–æ–≥–∏–∫—É —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤ —Ç–æ–∫–µ–Ω–æ–≤ –∏–ª–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–µ–π, –∞ —Ç–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Å–µ –ø—Ä–æ–∫—Å–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ –æ–¥–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Authority.

**–û—Ç–ª–∏—á–∏–µ –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ Beacon Proxy:**
- –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π Beacon —Ö—Ä–∞–Ω–∏—Ç –æ–¥–∏–Ω –∞–¥—Ä–µ—Å implementation
- Implementation Authority —Ö—Ä–∞–Ω–∏—Ç –∞–¥—Ä–µ—Å–∞ implementations –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ T-REX (Token, Identity Registry, Compliance –∏ —Ç.–¥.) –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (Major.Minor.Patch)

![alt text](./images/update-architecture.png)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:**

- **T-REX Implementation Authority** ([TREXImplementationAuthority](https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/proxy/authority/TREXImplementationAuthority.sol)) - —Å–º–∞—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –∞–¥—Ä–µ—Å–∞ —Ç–µ–∫—É—â–∏—Ö –≤–µ—Ä—Å–∏–π –ª–æ–≥–∏–∫–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ T-REX (Token, Identity Registry, Compliance –∏ —Ç.–¥.)
- **ONCHAINID Implementation Authority** - –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Å–º–∞—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ONCHAINID, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ—Ä—Å–∏—è–º–∏ Identity –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤. ONCHAINID —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º (ERC-734/ERC-735), —Å–æ–∑–¥–∞–Ω–Ω—ã–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å ERC-3643.
- **Proxies** - —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã (—Ç–æ–∫–µ–Ω—ã, –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏ –∏ –¥—Ä.) —è–≤–ª—è—é—Ç—Å—è –ø—Ä–æ–∫—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–µ–≥–∏—Ä—É—é—Ç –≤—ã–∑–æ–≤—ã –∫ –∞–¥—Ä–µ—Å–∞–º implementation, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º Authority.
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ–±–∞ Authority –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∏—Å—Ç–æ—Ä–∏—é –≤–µ—Ä—Å–∏–π (Major.Minor.Patch)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

1. **–î–µ–ø–ª–æ–π –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏**: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –¥–µ–ø–ª–æ–π –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ implementation –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è Token –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Authority**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –≤ `TREXImplementationAuthority` —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ [addAndUseTREXVersion()](https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/proxy/authority/TREXImplementationAuthority.sol#L302). –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Authority –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–∫—Å–∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –Ω–∞—á–∏–Ω–∞—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –≤—ã–∑–æ–≤–µ, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–∫—Å–∏ –ø–æ–ª—É—á–∞—é—Ç –∞–¥—Ä–µ—Å implementation –∏–∑ Authority –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ —á–µ—Ä–µ–∑ fallback —Ñ—É–Ω–∫—Ü–∏—é

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏**: –ü—Ä–æ–∫—Å–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –∞–¥—Ä–µ—Å implementation –∏–∑ Authority –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ —á–µ—Ä–µ–∑ fallback —Ñ—É–Ω–∫—Ü–∏—é. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Authority –≤—Å–µ –ø—Ä–æ–∫—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Ö —è–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ö–∞–∫ –ø—Ä–æ–∫—Å–∏ –ø–æ–ª—É—á–∞–µ—Ç implementation –∏–∑ Authority:**

–ö–∞–∂–¥—ã–π –ø—Ä–æ–∫—Å–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø–æ–ª—É—á–∞–µ—Ç –∞–¥—Ä–µ—Å implementation –∏–∑ Authority —á–µ—Ä–µ–∑ —Å–≤–æ–π —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –≥–µ—Ç—Ç–µ—Ä. –í `TREXImplementationAuthority` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥: `getTokenImplementation()`, `getCTRImplementation()`, `getIRImplementation()`, `getMCImplementation()`, `getTIRImplementation()`, `getIRSImplementation()`. –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–∫—Å–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `ClaimTopicsRegistryProxy`:

```solidity
// ClaimTopicsRegistryProxy contract

contract ClaimTopicsRegistryProxy is AbstractProxy {
    constructor(address implementationAuthority) {
        require(implementationAuthority != address(0), "invalid argument - zero address");
        // store Authority address in storage slot
        _storeImplementationAuthority(implementationAuthority);
        emit ImplementationAuthoritySet(implementationAuthority);

        // get CTR implementation address from Authority
        address logic = (ITREXImplementationAuthority(getImplementationAuthority())).getCTRImplementation();

        // initialize implementation contract
        (bool success, ) = logic.delegatecall(abi.encodeWithSignature("init()"));
        require(success, "Initialization failed.");
    }

    fallback() external payable {
        // get CTR implementation address from Authority on each call
        address logic = (ITREXImplementationAuthority(getImplementationAuthority())).getCTRImplementation();

        // delegate call to implementation
        assembly {
            calldatacopy(0x0, 0x0, calldatasize())
            let success := delegatecall(sub(gas(), 10000), logic, 0x0, calldatasize(), 0, 0)
            let retSz := returndatasize()
            returndatacopy(0, 0, retSz)
            switch success
            case 0 {
                revert(0, retSz)
            }
            default {
                return(0, retSz)
            }
        }
    }
}
```

**–ü—Ä–∏–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ –≤ TREXImplementationAuthority:**

```solidity
// Method addAndUseTREXVersion in TREXImplementationAuthority
function addAndUseTREXVersion(Version calldata _version, TREXContracts calldata _trex) external override {
    addTREXVersion(_version, _trex);
    useTREXVersion(_version);
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ Implementation Authority –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞:**

–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å Implementation Authority –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–æ–π Authority), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `changeImplementationAuthority()`. –û–Ω –ø–æ–º–µ–Ω—è–µ—Ç –≤–æ –≤—Å–µ—Ö –ø—Ä–æ–∫—Å–∏ –∞–¥—Ä–µ—Å–∞ authority –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

```solidity
function changeImplementationAuthority(address _token, address _newImplementationAuthority) external override {
    // update Authority for all token contracts (Token, IR, MC, CTR, TIR, IRS)
    IProxy(_token).setImplementationAuthority(_newImplementationAuthority);
    IProxy(_ir).setImplementationAuthority(_newImplementationAuthority);
    IProxy(_mc).setImplementationAuthority(_newImplementationAuthority);
    // ...
}
```

### 5.2. TREXFactory

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω TREXFactory?**

[TREXFactory](https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/factory/TREXFactory.sol) - —ç—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ñ–∞–±—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ T-REX (T-REX Suite) –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π. –í–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –Ω–∏–º–∏, `TREXFactory` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–æ–∫—Å–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —á–µ—Ä–µ–∑ CREATE2, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É –Ω–∏–º–∏, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∞–≥–µ–Ω—Ç–æ–≤, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –º–æ–¥—É–ª–∏ compliance –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç ownership —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤–ª–∞–¥–µ–ª—å—Ü—É.

**–ß—Ç–æ –¥–µ–ø–ª–æ–∏—Ç –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç TREXFactory:**

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ `deployTREXSuite()` —Ñ–∞–±—Ä–∏–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–î–µ–ø–ª–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ CREATE2** (–≤—Å–µ –ø—Ä–æ–∫—Å–∏ —Å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏):
   - **TrustedIssuersRegistry** - —Ä–µ–µ—Å—Ç—Ä –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö issuers –¥–ª—è claims
   - **ClaimTopicsRegistry** - —Ä–µ–µ—Å—Ç—Ä –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö claim topics
   - **ModularCompliance** - –∫–æ–Ω—Ç—Ä–∞–∫—Ç compliance —Å –º–æ–¥—É–ª—è–º–∏
   - **IdentityRegistryStorage** - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–µ–π (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –∞–¥—Ä–µ—Å)
   - **IdentityRegistry** - —Ä–µ–µ—Å—Ç—Ä –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–µ–π, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å TIR, CTR –∏ IRS
   - **Token** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ç–æ–∫–µ–Ω–∞, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å IR –∏ Compliance
   - **ONCHAINID –¥–ª—è —Ç–æ–∫–µ–Ω–∞** - —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ IdFactory (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω)

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**:
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö claim topics –≤ CTR
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è trusted issuers –∏ –∏—Ö —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö claim topics
   - –ü—Ä–∏–≤—è–∑–∫–∞ Identity Registry –∫ Identity Registry Storage
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ IR_AGENT –∏ TOKEN_AGENT —Ä–æ–ª–µ–π
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ compliance –º–æ–¥—É–ª–µ–π –∏ –∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   - –ü–µ—Ä–µ–¥–∞—á–∞ ownership –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É owner
   - –≠–º–∏—Å—Å–∏—è —Å–æ–±—ã—Ç–∏—è `TREXSuiteDeployed` —Å –∞–¥—Ä–µ—Å–∞–º–∏ –≤—Å–µ—Ö —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–µ–ø–ª–æ—è:**

```solidity
// TokenDetails structure
struct TokenDetails {
    address owner;                    // owner of all deployed contracts
    string name;                      // token name
    string symbol;                    // token symbol
    uint8 decimals;                   // token decimals
    address irs;                      // IdentityRegistryStorage address (0 = deploy new)
    address ONCHAINID;                // token ONCHAINID address (0 = create new)
    address[] irAgents;               // IR_AGENT addresses (max 5)
    address[] tokenAgents;            // TOKEN_AGENT addresses (max 5)
    address[] complianceModules;      // compliance module addresses (max 30)
    bytes[] complianceSettings;       // module configuration call data
}

// ClaimDetails structure
struct ClaimDetails {
    uint256[] claimTopics;            // required claim topics (max 5)
    address[] issuers;                // trusted claim issuer addresses (max 5)
    uint256[][] issuerClaims;         // claim topics per issuer
}
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è TREXFactory:**

```solidity
// Prepare token details
ITREXFactory.TokenDetails memory tokenDetails = ITREXFactory.TokenDetails({
    owner: tokenOwner,                // will own all contracts
    name: "My Permissioned Token",
    symbol: "MST",
    decimals: 18,
    irs: address(0),                  // deploy new IRS (or pass existing address)
    ONCHAINID: address(0),            // will be created automatically
    irAgents: [agent1, agent2],        // addresses that can register investors
    tokenAgents: [agent3],             // addresses that can mint tokens
    complianceModules: [countryModule, supplyLimitModule],
    complianceSettings: [
        // encoded call data for module configuration
        abi.encodeWithSignature("batchAllowCountries(uint16[])", [840, 826]), // US, UK
        abi.encodeWithSignature("setSupplyLimit(uint256)", 1000000 * 10**18)
    ]
});

// Prepare claim details
ITREXFactory.ClaimDetails memory claimDetails = ITREXFactory.ClaimDetails({
    claimTopics: [
        uint256(keccak256("KYC_CLAIM"))
    ],
    issuers: [claimIssuer1, claimIssuer2],
    issuerClaims: [
        [uint256(keccak256("KYC_CLAIM"))],  // issuer1 can issue KYC
        [uint256(keccak256("KYC_CLAIM"))]   // issuer2 can issue KYC
    ]
});

// Deploy T-REX suite
trexFactory.deployTREXSuite("my-token-salt-001", tokenDetails, claimDetails);
```

**–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ CREATE2:**

–û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ `salt` + –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ `TREXFactory` = –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∞–¥—Ä–µ—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ç—è—Ö.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –∞–¥—Ä–µ—Å —Ç–æ–∫–µ–Ω–∞ –¥–æ –¥–µ–ø–ª–æ—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∞–¥—Ä–µ—Å–∞ –≤ —Ä–∞–∑–Ω—ã—Ö EVM —Å–µ—Ç—è—Ö.

>–í–∞–∂–Ω–æ! –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –¥–µ–ø–ª–æ—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ–∞–±—Ä–∏–∫–∏, –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –≤—Å–µ implementation –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã.

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TREXFactory:**

```solidity
// Get Implementation Authority address
address authority = trexFactory.getImplementationAuthority();

// Get IdFactory address
address idFactory = trexFactory.getIdFactory();

// Get token address by salt
address token = trexFactory.getToken("my-token-salt-001");

// Check if token was deployed
address deployedToken = trexFactory.tokenDeployed("my-token-salt-001");

// Change Implementation Authority (only owner)
trexFactory.setImplementationAuthority(newAuthorityAddress);

// Change IdFactory (only owner)
trexFactory.setIdFactory(newIdFactoryAddress);
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `TREXFactory` –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É—è —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ T-REX –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

### 5.3. TREXGateway

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω TREXGateway?**

[TREXGateway](https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/factory/TREXGateway.sol) - —ç—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –¥–µ–ø–ª–æ—è —Ç–æ–∫–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ `TREXFactory`. –í —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ `TREXFactory` –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ–≥–æ owner, `TREXGateway` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å, –∫—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å —Ç–æ–∫–µ–Ω—ã, –∏ –≤–∑–∏–º–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ –∑–∞ –¥–µ–ø–ª–æ–π.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏ TREXGateway:**

1. **–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–µ–ø–ª–æ—é**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–ø–ª–æ–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –Ω–µ —Ç–æ–ª—å–∫–æ owner —Ñ–∞–±—Ä–∏–∫–∏, –Ω–æ –∏ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (–ø—É–±–ª–∏—á–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –¥–µ–ø–ª–æ–µ—Ä–æ–≤)
2. **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è**: –í–∑–∏–º–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ –∑–∞ –∫–∞–∂–¥—ã–π –¥–µ–ø–ª–æ–π —Ç–æ–∫–µ–Ω–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–∏–¥–æ–∫ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –¥–µ–ø–ª–æ–µ—Ä–æ–≤
3. **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**: –£–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–º, –∫—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å —Ç–æ–∫–µ–Ω—ã (–ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–∂–∏–º –∏–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –¥–µ–ø–ª–æ–µ—Ä—ã)
4. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è `salt` –∏–∑ owner –∞–¥—Ä–µ—Å–∞ –∏ –∏–º–µ–Ω–∏ —Ç–æ–∫–µ–Ω–∞, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –¥–µ–ø–ª–æ–π –¥–ª—è –∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏**: –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –¥–æ 5 —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç TREXGateway:**

`TREXGateway` —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º —Å–ª–æ–µ–º –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ `TREXFactory`. –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `deployTREXSuite()` —á–µ—Ä–µ–∑ Gateway –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

```solidity
function deployTREXSuite(ITREXFactory.TokenDetails memory _tokenDetails, ITREXFactory.ClaimDetails memory _claimDetails) public override {
    // 1. Check access control
    if(_publicDeploymentStatus == false && !isDeployer(msg.sender)) {
        revert PublicDeploymentsNotAllowed();
    }
    if(_publicDeploymentStatus == true && msg.sender != _tokenDetails.owner && !isDeployer(msg.sender)) {
        revert PublicCannotDeployOnBehalf();
    }

    // 2. Calculate and collect fee (if enabled)
    uint256 feeApplied = 0;
    if(_deploymentFeeEnabled == true) {
        if(_deploymentFee.fee > 0 && _feeDiscount[msg.sender] < 10000) {
            feeApplied = calculateFee(msg.sender);
            IERC20(_deploymentFee.feeToken).transferFrom(
                msg.sender,
                _deploymentFee.feeCollector,
                feeApplied
            );
        }
    }

    // 3. Generate salt automatically from owner + name
    string memory _salt = string(abi.encodePacked(
        Strings.toHexString(_tokenDetails.owner),
        _tokenDetails.name
    ));

    // 4. Call Factory to deploy
    ITREXFactory(_factory).deployTREXSuite(_salt, _tokenDetails, _claimDetails);

    // 5. Emit event with deployment info
    emit GatewaySuiteDeploymentProcessed(msg.sender, _tokenDetails.owner, feeApplied);
}
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –∫ –¥–µ–ø–ª–æ—é:**

Gateway –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç, –∫—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å —Ç–æ–∫–µ–Ω—ã, —á–µ—Ä–µ–∑ –¥–≤–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞:

**1. –ü—É–±–ª–∏—á–Ω—ã–π –¥–µ–ø–ª–æ–π (Public Deployment):**
- –ï—Å–ª–∏ `publicDeploymentStatus = true`, –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ç–æ–∫–µ–Ω
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–µ–±—è (`msg.sender == tokenDetails.owner`)
- –î–ª—è –¥–µ–ø–ª–æ—è –æ—Ç –∏–º–µ–Ω–∏ –¥—Ä—É–≥–æ–≥–æ –∞–¥—Ä–µ—Å–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±—ã—Ç—å –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–º –¥–µ–ø–ª–æ–µ—Ä–æ–º (whitelist)
- –≠—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –¥–µ–ø–ª–æ–∏—Ç —Ç–æ–∫–µ–Ω—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

**2. –¢–æ–ª—å–∫–æ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –¥–µ–ø–ª–æ–µ—Ä—ã (Whitelist Mode):**
- –ï—Å–ª–∏ `publicDeploymentStatus = false`, —Ç–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –¥–µ–ø–ª–æ–µ—Ä–æ–≤ –º–æ–≥—É—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ç–æ–∫–µ–Ω—ã
- –°–ø–∏—Å–æ–∫ –¥–µ–ø–ª–æ–µ—Ä–æ–≤ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `addDeployer()` / `removeDeployer()` (—Ç–æ–ª—å–∫–æ owner –∏–ª–∏ agent)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è batch –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –¥–æ 500 –∞–¥—Ä–µ—Å–æ–≤ –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- –≠—Ç–æ—Ç —Ä–µ–∂–∏–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ —Ç–µ–º, –∫—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å —Ç–æ–∫–µ–Ω—ã

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ AgentRole:**

Gateway –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `AgentRole`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ:
- **Owner**: –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ Gateway (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∏—Å—Å–∏–π, –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–æ–π)
- **Agents**: –ú–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–ø–∏—Å–∫–æ–º –¥–µ–ø–ª–æ–µ—Ä–æ–≤ –∏ —Å–∫–∏–¥–∫–∞–º–∏, –Ω–æ –Ω–µ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–∏—Å—Å–∏–π –∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞

**–°–∏—Å—Ç–µ–º–∞ –∫–æ–º–∏—Å—Å–∏–π:**

Gateway –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–∏–±–∫—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–º–∏—Å—Å–∏–π –∑–∞ –¥–µ–ø–ª–æ–π:

```solidity
// Fee structure
struct Fee {
    uint256 fee;           // amount of fee tokens to pay for 1 deployment
    address feeToken;      // address of the token used to pay fees (ERC-20)
    address feeCollector;  // address collecting fees
}
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∏—Å—Å–∏–π:**

```solidity
// Enable/disable deployment fees
gateway.enableDeploymentFee(true);

// Set fee details
gateway.setDeploymentFee(
    100 * 10**18,              // 100 tokens
    feeTokenAddress,            // ERC-20 token address
    feeCollectorAddress        // address to collect fees
);

// Get current fee details
Fee memory fee = gateway.getDeploymentFee();
bool isEnabled = gateway.isDeploymentFeeEnabled();
```

**–°–∫–∏–¥–∫–∏ –Ω–∞ –∫–æ–º–∏—Å—Å–∏–∏:**

–î–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –¥–µ–ø–ª–æ–µ—Ä–æ–≤ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫–∏–¥–∫—É –Ω–∞ –∫–æ–º–∏—Å—Å–∏—é (–≤—ã—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –±–∞–∑–∏—Å–Ω—ã—Ö –ø—É–Ω–∫—Ç–∞—Ö, –≥–¥–µ 10000 = 100%):

```solidity
// Apply 50% discount to deployer (5000 = 50%)
gateway.applyFeeDiscount(deployerAddress, 5000);

// Batch apply discounts
address[] memory deployers = [deployer1, deployer2];
uint16[] memory discounts = [2500, 7500]; // 25% and 75% discounts
gateway.batchApplyFeeDiscount(deployers, discounts);

// Calculate fee for specific deployer (with discount applied)
uint256 finalFee = gateway.calculateFee(deployerAddress);
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è TREXGateway:**

```solidity
// TREXGateway contract
// https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/factory/TREXGateway.sol

// Prepare token details (same as for TREXFactory)
ITREXFactory.TokenDetails memory tokenDetails = ITREXFactory.TokenDetails({
    owner: msg.sender,              // will own all contracts
    name: "My Permissioned Token",
    symbol: "MST",
    decimals: 18,
    irs: address(0),
    ONCHAINID: address(0),
    irAgents: [agent1, agent2],
    tokenAgents: [agent3],
    complianceModules: [countryModule, supplyLimitModule],
    complianceSettings: [
        abi.encodeWithSignature("batchAllowCountries(uint16[])", [840, 826]),
        abi.encodeWithSignature("setSupplyLimit(uint256)", 1000000 * 10**18)
    ]
});

ITREXFactory.ClaimDetails memory claimDetails = ITREXFactory.ClaimDetails({
    claimTopics: [uint256(keccak256("KYC_CLAIM"))],
    issuers: [claimIssuer1],
    issuerClaims: [[uint256(keccak256("KYC_CLAIM"))]]
});

// Deploy through Gateway (salt is auto-generated from owner + name)
// Fee will be calculated and collected automatically if enabled
gateway.deployTREXSuite(tokenDetails, claimDetails);
```

**Batch –¥–µ–ø–ª–æ–π:**

Gateway –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –¥–æ 5 —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:

```solidity
// Prepare arrays of token and claim details
ITREXFactory.TokenDetails[] memory tokenDetailsArray = new ITREXFactory.TokenDetails[](2);
ITREXFactory.ClaimDetails[] memory claimDetailsArray = new ITREXFactory.ClaimDetails[](2);

tokenDetailsArray[0] = tokenDetails1;
tokenDetailsArray[1] = tokenDetails2;
claimDetailsArray[0] = claimDetails1;
claimDetailsArray[1] = claimDetails2;

// Deploy multiple tokens in one transaction
gateway.batchDeployTREXSuite(tokenDetailsArray, claimDetailsArray);
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è salt:**

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `TREXFactory`, –≥–¥–µ `salt` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —è–≤–Ω–æ, `TREXGateway` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```solidity
// Salt generation in TREXGateway
// https://github.com/ERC-3643/ERC-3643/blob/dab1660fe594e17e83d691137ba67272534732ac/contracts/factory/TREXGateway.sol#L358
string memory _salt = string(abi.encodePacked(
    Strings.toHexString(_tokenDetails.owner),
    _tokenDetails.name
));
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ owner –∏ –∏–º–µ–Ω–∏ —Ç–æ–∫–µ–Ω–∞ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π salt, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∞–¥—Ä–µ—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TREXGateway:**

```solidity
// Get factory address
address factory = gateway.getFactory();

// Set factory address (only owner)
gateway.setFactory(newFactoryAddress);

// Transfer factory ownership (only owner)
gateway.transferFactoryOwnership(newFactoryOwner);

// Public deployment management
gateway.setPublicDeploymentStatus(true);  // enable public deployments
bool isPublic = gateway.getPublicDeploymentStatus();

// Deployer management
gateway.addDeployer(deployerAddress);
gateway.batchAddDeployer(deployerAddresses);  // up to 500 addresses
gateway.removeDeployer(deployerAddress);
gateway.batchRemoveDeployer(deployerAddresses);
bool isApproved = gateway.isDeployer(deployerAddress);
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TREXGateway:**

- **–ü—É–±–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–µ–ø–ª–æ—è —Ç–æ–∫–µ–Ω–æ–≤**: –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–ø–ª–æ–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –ª—é–±–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É —Å–ø–∏—Å–∫—É –¥–µ–ø–ª–æ–µ—Ä–æ–≤
- **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è**: –ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–∑–∏–º–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ –∑–∞ –∫–∞–∂–¥—ã–π –¥–µ–ø–ª–æ–π —Ç–æ–∫–µ–Ω–∞
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ UX**: –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è –¥–ª—è –∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π salt, –Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –ø—Ä–æ salt)
- **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏**: –ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–∫–∏–¥–æ–∫**: –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å–∫–∏–¥–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –¥–µ–ø–ª–æ–µ—Ä–∞–º (–ø–∞—Ä—Ç–Ω—ë—Ä–∞–º, VIP –∫–ª–∏–µ–Ω—Ç–∞–º)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TREXFactory –Ω–∞–ø—Ä—è–º—É—é:**

- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –ö–æ–≥–¥–∞ –¥–µ–ø–ª–æ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º —Ñ–∞–±—Ä–∏–∫–∏ –¥–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
- **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ salt**: –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ salt –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –∞–¥—Ä–µ—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∫—Ä–æ—Å—Å—á–µ–π–Ω –¥–µ–ø–ª–æ—è)
- **–ë–µ–∑ –∫–æ–º–∏—Å—Å–∏–π**: –ö–æ–≥–¥–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–∏—Å—Å–∏–π –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞
- **–ö–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞**: –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–¥/–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è, –∫–æ—Ç–æ—Ä—É—é Gateway –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

Gateway –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ –ø—É–±–ª–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è Factory, –¥–æ–±–∞–≤–ª—è—è —Å–ª–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞, –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–æ—â–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–µ–ø–ª–æ—è.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `TREXGateway` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤, –¥–µ–ª–∞—è –µ–≥–æ –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–º –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏.

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** [Tokeny](https://tokeny.com/t-rex-platform/) - –ø–æ —Å—É—Ç–∏ –∫–æ–º–ø–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∞ erc- 3643 –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –Ω–∞ –±–∞–∑–µ T-REX. –û–Ω–∏ –æ–±–µ—Ä–Ω—É–ª–∏ –≤—Å–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –≥–æ—Ç–æ–≤—ã–º UI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç RWA –ø—Ä–æ–µ–∫—Ç–∞–º –ª–µ–≥–∫–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏. –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç–º–∏—Ç–µ–Ω—Ç–∞–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Ç–æ–∫–µ–Ω–∞ (–¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ TREXFactory/TREXGateway, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ compliance, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º–∏), –∞ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º - —É–¥–æ–±–Ω—ã–π –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–∫–µ–Ω–∞–º–∏. –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç T-REX –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω—ë–Ω –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

T-REX (ERC-3643) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –º–æ–≥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã–µ —Ü–µ–Ω–Ω—ã–µ –±—É–º–∞–≥–∏ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö –±–ª–æ–∫—á–µ–π–Ω–∞—Ö: –Ω–µ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π ERC-20 —Å –±—É–º–∞–∂–Ω—ã–º –∫–æ–º–ø–ª–∞–µ–Ω—Å–æ–º –≤–æ–∫—Ä—É–≥, –∞ –∫–∞–∫ –ø—Ä–æ—Ç–æ–∫–æ–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º KYC/AML, —é—Ä–∏—Å–¥–∏–∫—Ü–∏–∏, –ª–∏–º–∏—Ç—ã –∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ —Å–º–∞—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö. –°–≤—è–∑–∫–∞ Identity Registry, ONCHAINID –∏ ClaimIssuer –¥–∞—ë—Ç onchain —Å–ª–æ–π –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–µ–π, –∞ ModularCompliance –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∫–∞–∫ –Ω–∞–±–æ—Ä –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–æ–¥—É–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —á–µ—Ä–µ–∑ Implementation Authority –∏ –ø—Ä–æ–∫—Å–∏ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É –±–µ–∑ —Å–º–µ–Ω—ã –∞–¥—Ä–µ—Å–æ–≤, –∞ TREXFactory/TREXGateway –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç —Å—Ç–µ–∫ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –ø—Ä–æ–¥—É–∫—Ç. –ü—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ—Ç–æ–∫–æ–ª –æ—Å—Ç–∞—ë—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–∏–º —Å ERC-20 —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π –∏ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –º–æ–∂–µ—Ç –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å—Å—è –≤ DeFi, –µ—Å–ª–∏ —Ç–æ—Ç –Ω–∞—É—á–∏—Ç—Å—è –∂–∏—Ç—å —Å —Ä–µ–≤–µ—Ä—Ç–∞–º–∏ –ø–æ compliance –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—É–ª–∞–º–∏.

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–æ–≤ –Ω–∞ —Å—É–º–º—É –±–æ–ª–µ–µ $25 –º–ª—Ä–¥. ERC-3643 [Association](https://www.erc3643.org/members) –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–µ—Å—è—Ç–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–∑ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–æ–≤, –≤–∫–ª—é—á–∞—è –∫—Ä—É–ø–Ω—ã–µ –±–∞–Ω–∫–∏, –∞—É–¥–∏—Ç–æ—Ä—Å–∫–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –±–ª–æ–∫—á–µ–π–Ω —Ä–µ—à–µ–Ω–∏–π. –°—Ä–µ–¥–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π - –≤—ã–ø—É—Å–∫ –∑–µ–ª—ë–Ω—ã—Ö –æ–±–ª–∏–≥–∞—Ü–∏–π, —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è —Ñ–æ–Ω–¥–æ–≤ –∏ –ø–∏–ª–æ—Ç–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ —á–∞—Å—Ç–Ω–æ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞.

–ö–ª—é—á–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è T-REX –ª–µ–∂–∞—Ç –Ω–µ —Å—Ç–æ–ª—å–∫–æ –≤ –∫–æ–¥–µ, —Å–∫–æ–ª—å–∫–æ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏. –í–æ-–ø–µ—Ä–≤—ã—Ö, —ç—Ç–æ –Ω–µ–∏–∑–±–µ–∂–Ω–∞—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ–∫—Ä—É–≥ —Ä–æ–ª–µ–π owner –∏ agents, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø–∞—É–∑—É –≤—ã–ø—É—Å–∫, –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞—Ç—å –∞–¥—Ä–µ—Å–∞ –∏ –¥–µ–ª–∞—Ç—å forced transfer. –í–æ-–≤—Ç–æ—Ä—ã—Ö, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –æ—Ñ—á–µ–π–Ω KYC –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤: –∫—Ä—É–ø–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ –≤—Ä–æ–¥–µ Sumsub –∏ –∏–º –ø–æ–¥–æ–±–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ –≥–æ—Ç–æ–≤—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –∏ –≤—ã—Å—Ç—É–ø–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º–∏ ClaimIssuer –≤ –±–ª–æ–∫—á–µ–π–Ω–µ, –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—â–∏–º–∏ –∏ –æ—Ç–∑—ã–≤–∞—é—â–∏–º–∏ –∫–ª–µ–π–º—ã –Ω–∞–ø—Ä—è–º—É—é onchain. –ü–æ—ç—Ç–æ–º—É –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ñ—á–µ–π–Ω KYC –∏ —É–∂–µ –æ—Ç —Å–≤–æ–µ–≥–æ –∏–º–µ–Ω–∏ —Å–æ–∑–¥–∞—ë—Ç –∏ –æ—Ç–∑—ã–≤–∞–µ—Ç onchain claims. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏–º–µ–Ω–Ω–æ –æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑—ã–≤–∞–µ—Ç –æ—Ñ—á–µ–π–Ω –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –æ–Ω—á–µ–π–Ω —Å—Ç–∞—Ç—É—Å–æ–º –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –∫–ª–µ–π–º–æ–≤.

–ü—Ä–∏ —ç—Ç–æ–º –≤ –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–º —Å–º—ã—Å–ª–µ T-REX —É–∂–µ –¥–∞—ë—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑—Ä–µ–ª—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ RWA. –í –ø—Ä–æ—Ç–æ–∫–æ–ª–µ —á—ë—Ç–∫–æ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã —É—Ä–æ–≤–Ω–∏: –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å, —Ä–µ–µ—Å—Ç—Ä—ã, compliance –∏ —Å–∞–º —Ç–æ–∫–µ–Ω. –ü–æ–≤–µ—Ä—Ö —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å —Ä—ã–Ω–æ—á–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø–ª–æ—â–∞–¥–∫–∞–º–∏ –∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –≤—ã—Ç—è–≥–∏–≤–∞—Ç—å –≤—Å—ë –±–æ–ª—å—à–µ KYC –ª–æ–≥–∏–∫–∏ –∏–∑ –æ—Ñ—á–µ–π–Ω –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –±–ª–æ–∫—á–µ–π–Ω, –ø–æ –º–µ—Ä–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –±—É–¥—É—Ç –≥–æ—Ç–æ–≤—ã —Ä–∞–±–æ—Ç–∞—Ç—å –±–ª–∏–∂–µ –∫ onchain –º–æ–¥–µ–ª–∏.

### –°—Å—ã–ª–∫–∏

- [ERC-3643 Standard](https://eips.ethereum.org/EIPS/eip-3643)
- [T-REX GitHub Repository](https://github.com/ERC-3643/ERC-3643)
- [OnchainID GitHub Repository](https://github.com/onchain-id/solidity)
- [ERC-3643 Official Website](https://www.erc3643.org/)
- [Tokeny Solutions](https://tokeny.com/)