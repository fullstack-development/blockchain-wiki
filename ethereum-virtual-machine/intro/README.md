# Intro

**–ê–≤—Ç–æ—Ä:** [–ü–∞–≤–µ–ª –ù–∞–π–¥–∞–Ω–æ–≤](https://github.com/PavelNaydanov) üïµÔ∏è‚Äç‚ôÇÔ∏è

–ï—Å–ª–∏ —Ç—ã —Å–æ–≤—Å–µ–º –Ω–æ–≤–∏—á–æ–∫ –≤ –±–ª–æ–∫—á–µ–π–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞ –∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç—å—é –ü—Ä–∏—Ç–∏ –ö–∞—Å–∏—Ä–µ–¥–¥–∏ "[How does Ethereum work?](https://www.preethikasireddy.com/post/how-does-ethereum-work-anyway#:~:text=The%20Ethereum%20blockchain%20is%20essentially,transition%20to%20a%20new%20state.)". –û–¥–Ω–∞–∫–æ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —Å–æ —Å—Ç–∞–∂–µ–º —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º. –Ø —É–≤–µ—Ä–µ–Ω –æ–Ω —Å–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –≤–µ—â–∏ –¥–ª—è —Å–µ–±—è –≤ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ.üôÉ

## Ethereum

Ethereum - —ç—Ç–æ —Å–µ—Ç—å, –≥–¥–µ –∫–∞–∂–¥—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ —Å–µ—Ç–∏ —Ö—Ä–∞–Ω–∏—Ç –∫–æ–ø–∏—é —Å–æ—Å—Ç–æ—è–Ω–∏—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞(–Ω–∞–∑—ã–≤–∞–µ–º–æ–≥–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–æ–π Ethereum –∏–ª–∏ EVM). –õ—é–±–æ–π —É—á–∞—Å—Ç–Ω–∏–∫ —Å–µ—Ç–∏ –º–æ–∂–µ—Ç —Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å —ç—Ç–æ–º—É –∫–æ–º–ø—å—é—Ç–µ—Ä—É –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏**. –ó–∞–ø–∏—Å—å –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è EVM —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–ª–æ–∫—á–µ–π–Ω–µ, –∫–æ—Ç–æ—Ä—ã–π, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤—Å–µ–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —Å–µ—Ç–∏.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ ethereum –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å [—Ç—É—Ç](https://ethereum.org/ru/developers/docs/intro-to-ethereum/#what-is-ethereum).

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –∞–Ω–∞—Ç–æ–º–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å [—Ç—É—Ç](https://medium.com/remix-ide/the-anatomy-of-a-transaction-receipt-d935aacc9fcd).

## Account based model

–ú—ã –∑–Ω–∞–µ–º, —á—Ç–æ Ethereum –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Bitcoin –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç [—Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∞–∫–∫–∞—É–Ω—Ç–æ–≤](https://jcliff.medium.com/intro-to-blockchain-utxo-vs-account-based-89b9a01cd4f5).

–ê–∫–∫–∞—É–Ω—Ç—ã –Ω—É–∂–Ω—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ê–∫–∫–∞—É–Ω—Ç—ã –∏ –±–∞–ª–∞–Ω—Å—ã –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–æ–ª—å—à–æ–π —Ç–∞–±–ª–∏—Ü–µ –≤ EVM. –û–Ω–∏ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é –æ–±—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è EVM.

–°—É—â–Ω–æ—Å—Ç—å **–∞–∫–∫–∞—É–Ω—Ç** —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:
1. **–ë–∞–ª–∞–Ω—Å**. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç—Ñ–∏—Ä–∞ –≤ Wei.
2. **Nonce**. –°—á–µ—Ç—á–∏–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —ç—Ç–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞.
3. **Storage root**. –¢–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω –∫–∞–∫ —Ö—ç—à —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.
4. **Code hash**. –≠—Ç–æ—Ç —Ö—ç—à —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ **code** –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ. –ü–æ —Å—É—Ç–∏, —ç—Ç–æ 256-–±–∏—Ç–Ω—ã–π —Ö—ç—à –∫–æ—Ä–Ω—è ¬´[–¥–µ—Ä–µ–≤–∞ –ú–µ—Ä–∫–ª–∞ –ü–∞—Ç—Ä–∏—Å–∏–∏](https://en.wikipedia.org/wiki/Merkle_tree)¬ª, –∫–æ–¥–∏—Ä—É—é—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∞–∫–∫–∞—É–Ω—Ç.

![](./images/account.png)

–í –ø—Ä–∏—Ä–æ–¥–µ EVM –∞–∫–∫–∞—É–Ω—Ç—ã –¥–µ–ª—è—Ç—Å—è –Ω–∞ –¥–≤–∞ —Ç–∏–ø–∞:
1. –í–Ω–µ—à–Ω–∏–π EOA(Externally Owned Account)
2. –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç

–û–±–∞ —ç—Ç–∏—Ö —Ç–∏–ø–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –º–æ–≥—É—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∞—Ç—å, —Ö—Ä–∞–Ω–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —ç—Ñ–∏—Ä—ã, –Ω–æ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏.

**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ** –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Ç–∏–ø–∞ "EOA" –∏ "—Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç" –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º:
1. –ê–¥—Ä–µ—Å EOA —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ê–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–¥—Ä–µ—Å–∞ –¥–µ–ø–ª–æ–µ—Ä–∞, –±–∞–π—Ç-–∫–æ–¥–∞ –∏ nonce.
2. –ü–æ–ª—è **code hash** –∏ **storage root** –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞ —Ç–∏–ø–∞ "—Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç". –î–ª—è EOA –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —ç—Ç–∏ –ø–æ–ª—è –ø—É—Å—Ç—ã–µ.

![](./images/account-types.png)

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –∞–∫–∫–∞—É–Ω—Ç—ã –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [—Ç—É—Ç](https://ethereum.org/ru/developers/docs/accounts/).

## EVM

Ethereum Virtual Machine ‚Äî —ç—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Ö—Ä–∞–Ω–∏—Ç (–∏ —Å –∫–æ—Ç–æ—Ä—ã–º —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è) –∫–∞–∂–¥—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ —Å–µ—Ç–∏ Ethereum. –õ—é–±–æ–π —É—á–∞—Å—Ç–Ω–∏–∫ –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ EVM.

–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è **opcodes**, EVM - —ç—Ç–æ –ø–æ–ª–Ω–∞—è –ø–æ –¢—å—é—Ä–∏–Ω–≥—É [—Å—Ç–µ–∫–æ–≤–∞—è –º–∞—à–∏–Ω–∞](https://en.wikipedia.org/wiki/Stack_machine), –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.

**–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç** ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π. –ö–∞–∂–¥–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ–¥ –æ–ø–µ—Ä–∞—Ü–∏–π(—Å–æ —Å–≤–æ–µ–π —É–¥–æ–±–Ω–æ–π –º–Ω–µ–º–æ–Ω–∏–∫–æ–π, —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º –ø—Ä–∏—Å–≤–æ–µ–Ω–Ω—ã—Ö –∏–º –∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç 0 –¥–æ 255). –ö–æ–≥–¥–∞ EVM –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç, –æ–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–∞–∂–¥—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é.

## –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ EVM

–£–ø—Ä–æ—â–µ–Ω–Ω–æ –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ EVM —Å—Ö–µ–º–æ–π –Ω–∏–∂–µ. –ó–∞–±–µ–≥–∞—è –≤–ø–µ—Ä–µ–¥ —Å–∫–∞–∂–µ–º, —á—Ç–æ –æ–±—ä–µ–∫—Ç—ã –Ω–∞ —Å—Ö–µ–º–µ **EVM code** –∏ **Storage** —ç—Ç–æ –Ω–µ —á—Ç–æ –∏–Ω–æ–µ, –∫–∞–∫ —Ç–æ –Ω–∞ —á—Ç–æ —Å—Å—ã–ª–∞—é—Ç—Å—è **code hash** –∏ **storage** –∞–∫–∫–∞—É–Ω—Ç–∞. –Ø –≥–æ–≤–æ—Ä–∏–ª –ø—Ä–æ –Ω–∏—Ö –≤ —Ä–∞–∑–¥–µ–ª–µ –≤—ã—à–µ, –≥–¥–µ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª –ø—Ä–æ –∞–∫–∫–∞—É–Ω—Ç—ã.

![](./images/evm.png)
*// –ü—Ä–æ—Å—Ç–∞—è stack-based –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ EVM*

–ù–∞ —Å—Ö–µ–º–µ –≤—ã—à–µ –º—ã –≤–∏–¥–∏–º –¥–≤–µ –∫—Ä—É–ø–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–∏:
  - **Machine state**(volatile). –≠—Ç–∞ –æ–±–ª–∞—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–∑–æ–≤–∞. –ü–æ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –≤—ã–∑–æ–≤–∞ –º–æ–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –ª—é–±–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∏–∑ –±–∞–π—Ç-–∫–æ–¥–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.
  - **World state**(persistent). –≠—Ç–∞ –æ–±–ª–∞—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–∑–æ–≤–∞.

**Machine state** –≤–∫–ª—é—á–∞–µ—Ç:
  - **PC(Program counter)**. –†–µ—à–∞–µ—Ç, –∫–∞–∫—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∏–∑ –æ–±–ª–∞—Å—Ç–∏ **code** EVM –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–π. **PC** –æ–±—ã—á–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –æ–¥–∏–Ω –±–∞–π—Ç, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é. –ó–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –≤—Å–µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–∞–Ω–¥. –Ø –∏–º–µ—é –≤–≤–∏–¥—É –∫–æ–º–∞–Ω–¥—ã ```JUMP```, ```JUMPI```.
  - **Stack**. –°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å **1024** –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –†–∞–∑–º–µ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Ä–∞–≤–µ–Ω 32-–º –±–∞–π—Ç–∞–º. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞ –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–∑–æ–≤–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω **Stack**. –û–Ω —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–∑–æ–≤–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è.
  - **Memory**. –¢–∞–∫–∂–µ –∫–∞–∫ –∏ **Stack** —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ –≤—ã–∑–æ–≤–∞ –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –æ—á–∏—â–∞–µ—Ç—Å—è –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é.

**World state** –≤–∫–ª—é—á–∞–µ—Ç:
  - **Code**. –≠—Ç–æ –æ–±–ª–∞—Å—Ç—å –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –ö–æ–¥ - —ç—Ç–æ –±–∞–π—Ç—ã –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ EVM –≤–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –ö–æ–¥ –≤ —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º. –≠—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä–æ–π ROM(Read-only memory)
  - **Storage**. –•—Ä–∞–Ω–∏–ª–∏—â–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–ª–æ–∫—á–µ–π–Ω–∞. –ü–æ —Å—É—Ç–∏, —ç—Ç–æ –º–∞–ø–∞(—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ) 32-–±–∞–π—Ç–æ–≤—ã—Ö —Å–ª–æ—Ç–æ–≤ —Å 32-–±–∞–π—Ç–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥–ª—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞. –õ—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –∫–æ–¥–æ–º —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤—ã–∑–æ–≤–∞. –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –Ω–µ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω—è—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–∑ –¥—Ä—É–≥–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

–î–ª—è –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–µ –∞–Ω–∞–ª–æ–≥–∏–∏. **Stack** –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ 1024-—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **stack** –±–æ–ª—å—à–µ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∑–Ω–∞—á–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏—è–º ```function(arg,arg2)``` –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π. –ò–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π **stack** —Å–ª–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ **opcodes** –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞–º—è—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞(**memory**) –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö. –û–¥–Ω–∞–∫–æ –ø–∞–º—è—Ç—å –Ω–µ–ø–æ—Å—Ç–æ—è–Ω–Ω–∞(–∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è, –ø–∞–º—è—Ç—å –æ—á–∏—Å—Ç–∏—Ç—Å—è) –∏ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –ß—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏ —Å–¥–µ–ª–∞—Ç—å –∏—Ö –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤—ã–∑–æ–≤–∞—Ö –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **storage**. –ü–æ —Å—É—Ç–∏ —ç—Ç–æ –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –ú–æ–∂–Ω–æ –¥–∞–∂–µ —Å—á–∏—Ç—ã–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑–≤–Ω–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –û–¥–Ω–∞–∫–æ –∑–∞–ø–∏—Å—å –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ - —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

–ò—Ç–æ–≥:
- **Stack**. –•—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏. –ü–ª—é—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
- **Memory**. –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ–¥–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏.
- **Storage**. –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–º–∫–∞—Ö –∂–∏–∑–Ω–∏ –±–ª–æ–∫—á–µ–π–Ω–∞. –î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ä–∞–º–∫–∞—Ö –ª—é–±—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –∏–∑–≤–Ω–µ.

–ú–æ–∂–Ω–æ –Ω–∞ –≤—Å–µ —ç—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ [Ethereum –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –Ω–∞ go](https://github.com/ethereum/go-ethereum):
1. [Opcodes](https://github.com/ethereum/go-ethereum/blob/master/core/vm/instructions.go)
2. [Stack](https://github.com/ethereum/go-ethereum/blob/master/core/vm/stack.go)
3. [Memory](https://github.com/ethereum/go-ethereum/blob/master/core/vm/memory.go)

## –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

–ü–æ–º–Ω–∏–º, —á—Ç–æ EVM - —Å—Ç–µ–∫–æ–≤–∞—è –º–∞—à–∏–Ω–∞. –°—Ç–µ–∫ –∑–¥–µ—Å—å –∏–≥—Ä–∞–µ—Ç –∫–ª—é—á–µ–≤—É—é —Ä–æ–ª—å. –ù–∞ —Å—Ö–µ–º–µ –Ω–∏–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

![](./images/execution-model.png)

–≠—Ç–æ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º –º–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
1. –í —Ä–∞–º–∫–∞—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–∑–æ–≤–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã **machine state**: **memory**, **stack**, **program counter**.
2. **Program counter** –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.
3. –ò–∑ **EVM code** –±–µ—Ä—É—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏(**opcodes**).
4. –ö–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–ø–∞–¥–∞–µ—Ç –≤ **stack**.
5. –û–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–ø–∞–≤—à–∏–µ –≤ **stack** –Ω–∞—á–∏–Ω–∞—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è.
6. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å **storage** –∏–ª–∏ **memory**.

_–í–∞–∂–Ω–æ!_ –í —ç—Ç–æ–π —Å—Ö–µ–º–µ –º—ã –æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É **gas**. –ö–∞–∂–¥—ã–π opcode —Å—Ç–æ–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –µ–¥–∏–Ω–∏—Ü **gas**. Gas –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ—Ç–∏ Ethereum. –†–∞—Å—á–µ—Ç **gas** –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–º–∫–∏ —ç—Ç–æ–π —Å—Ö–µ–º—ã.

## –ö–ª—é—á–µ–≤—ã–µ –≤–µ—â–∏

> Solidity –∫–æ–¥ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è ‚Üí –ë–∞–π—Ç-–∫–æ–¥ ‚Üí Opcodes

> –ê–∫–∫–∞—É–Ω—Ç—ã –±—ã–≤–∞—é—Ç –¥–≤—É—Ö —Ç–∏–ø–æ–≤: EOA –∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã. –¢–æ–ª—å–∫–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏–º–µ—é—Ç –∫–æ–¥.

> –ü–æ–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç EVM. –ü–æ–¥ –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–∑–æ–≤–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è **Memory** –∏ **Stack**. –ü—Ä–∏ —ç—Ç–æ–º **EVM code** –Ω–µ–∏–∑–º–µ–Ω—è–µ–º. **Storage** –ø–æ—Å—Ç–æ—è–Ω–µ–Ω, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω.

## Links

1. [Ethereum virtual machine](https://ethereum.org/en/developers/docs/evm/)
2. [About the EVM](https://www.evm.codes/about)
3. [–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Å–±–æ—Ä–Ω–∏–∫ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π](https://takenobu-hs.github.io/downloads/ethereum_evm_illustrated.pdf)