# zkSync Era Architect

**–ê–≤—Ç–æ—Ä:** [–†–æ–º–∞–Ω –Ø—Ä–ª—ã–∫–æ–≤](https://github.com/rlkvrv) üßê

–≠—Ç–æ –æ–±–∑–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ zkSync Era "–∏–∑–Ω—É—Ç—Ä–∏", –µ–≥–æ –≥–ª–∞–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ —É–≥–ª—É–±–∏—Ç—å—Å—è –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏, –ø–æ–Ω—è—Ç—å –∏–∑ –∫–∞–∫–∏—Ö —á–∞—Å—Ç–µ–π –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç, –∫–∞–∫ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è zk-rollup –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –†–∞–∑–±–µ—Ä–µ–º—Å—è –∫–∞–∫–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ Layer 2, –∞ –∫–∞–∫–∞—è –Ω–∞ Layer 1, —Ç–∞–∫–∂–µ –Ω–µ–º–Ω–æ–≥–æ –ø–æ—Å–º–æ—Ç—Ä–∏–º —á—Ç–æ –¥–µ–ª–∞—é—Ç –Ω–æ–¥—ã (–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã) –Ω–∞ –±—ç–∫–µ–Ω–¥–µ.

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

–ó–¥–µ—Å—å —è –ø—Ä–∏–≤–µ–¥—É –∫—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∫–∞–∫ –Ω–∞ Layer 2 —Ç–∞–∫ –∏ –Ω–∞ Layer 1. –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—é. –ü–æ–∫–∞ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–æ –Ω–∏–º –ø—Ä–æ–±–µ–∂–∞—Ç—å—Å—è –Ω–µ —É–≥–ª—É–±–ª—è—è—Å—å –≤ –¥–µ—Ç–∞–ª–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–µ—Ç –ø–æ–Ω—è—Ç–Ω–µ–µ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ä–∞–∑–¥–µ–ª–∞ [Transaction Flow](#transaction-flow).

### Layer 2 smart-contracts

–°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã L2 —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –≤ —è–¥—Ä–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –∏–º–µ—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏ –∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≥–µ–Ω–µ–∑–∏—Å-–±–ª–æ–∫–∞ (–∫—Ä–æ–º–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `bootloader`). –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Ö –∫–æ–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–ø—Ä–∞–≤–ª—è–µ–º–æ–µ —Å L1.

–°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã L2 –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ [—ç—Ç–æ–º](https://github.com/matter-labs/era-system-contracts/tree/main) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –∏–∑ –Ω–∏—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –≤ —Ü–µ–ª–æ–º. –¢–∞–∫–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö –∏–º–µ—é—Ç –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ [—ç—Ç–æ–º](https://github.com/code-423n4/2023-10-zksync/blob/main/docs/Smart%20contract%20Section/System%20contracts%20bootloader%20description.md) –∞—É–¥–∏—Ç–µ.

#### ContractDeployer

[ContractDeployer](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/ContractDeployer.sol) ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤. –û–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –±–∞–π—Ç-–∫–æ–¥ –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏–∑–≤–µ—Å—Ç–µ–Ω, –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–¥—Ä–µ—Å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

#### L1Messenger

[L1Messenger](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/L1Messenger.sol) - –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ zkSync –≤ Ethereum. –≠—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≤—ã–∑–æ–≤—ã —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π.

#### NonceHolder

[NonceHolder](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/NonceHolder.sol) - –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ `nonce` —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.

#### DefaultAccount

[DefaultAccount](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/DefaultAccount.sol) - —ç—Ç–æ —à–∞–±–ª–æ–Ω –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞. –ü—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –∞–∫–∫–∞—É–Ω—Ç–æ–º –æ–Ω –∏–º–∏—Ç–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (EOA), –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—è —Ñ–ª–∞–≥ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏—é —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö EOA –≤ Ethereum, –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –≤—ã–∑–æ–≤ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑ `bootloader`.

#### Bootloader

[Bootloader](https://github.com/matter-labs/era-system-contracts/blob/main/bootloader/bootloader.yul) - –∑–∞–≥—Ä—É–∑—á–∏–∫ —è–≤–ª—è–µ—Ç—Å—è —è–¥—Ä–æ–º —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π L2. –≠—Ç–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –∞ —Å–∫–æ—Ä–µ–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –Ω–æ–¥—ã –∫–∞–∫ —á–∞—Å—Ç—å —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

Bootloader –º–æ–∂–Ω–æ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –∫–∞–∫ –∞–Ω–∞–ª–æ–≥ EntryPoint –∏–∑ EIP4337, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∞–∫–µ—Ç—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ, –∞ –Ω–µ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏. –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, —É–º–µ–Ω—å—à–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –í–∞–ª–∏–¥–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –º–∞—Å—Å–∏–≤–µ, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç—å –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞ –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–∑-–∑–∞ —Å–±–æ—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∑–∞–≥—Ä—É–∑—á–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ–ª–µ–µ –º—è–≥–∫–æ–µ —É—Å–ª–æ–≤–∏–µ —Å–±–æ—è, –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –∫–∞–∫ `near call panic`.

–ï—â–µ –æ–¥–Ω–∞ –≤–∞–∂–Ω–∞—è —Ä–æ–ª—å –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ - –æ–Ω –≤—ã–∑–æ–≤–µ—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç AA –µ—Å–ª–∏ –æ–Ω —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏–Ω–∞—á–µ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω [DefaultAccount](#defaultaccount), –∫–æ—Ç–æ—Ä—ã–µ –≤–µ–¥–µ—Ç —Å–µ–±—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π EOA. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É —Å–æ–≤–º–µ—Å—Ç–∏—Ç—å EOA –∏ AA –≤ –æ–¥–Ω–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏.

–•–µ—à –∫–æ–¥–∞ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ L1 –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, –∫–æ–¥ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ L2 –∏ –µ–≥–æ –∞–¥—Ä–µ—Å —è–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è `msg.sender`. –ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –∞–¥—Ä–µ—Å—É –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–¥ –ø—É—Å—Ç–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (EmptyContract).

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –º–µ–∂–¥—É –±–æ–ª—å—à–∏–º —Ñ–∞–π–ª–æ–º Yul –∏ [BootLoaderUtilities](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/BootloaderUtilities.sol) –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º.

#### SystemContext

[SystemContext](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/SystemContext.sol) - –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å–ª—É–∂–∏—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ —Ä–∞–º–∫–∞—Ö –±–ª–æ–∫–∞, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–ª–∏ —Å–∏—Å—Ç–µ–º—ã. SystemContext —Ç–µ—Å–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å bootloader –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –±–ª–æ–∫—á–µ–π–Ω–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ.

#### MsgValueSimulator

[MsgValueSimulator](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/MsgValueSimulator.sol) - —Å–ª—É–∂–∏—Ç –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å `msg.value`, –∏—Å–ø–æ–ª—å–∑—É—è –æ–ø–∫–æ–¥ zkEVM - [mimicCall](https://github.com/code-423n4/2023-10-zksync/blob/main/docs/Smart%20contract%20Section/System%20contracts%20bootloader%20description.md#only-for-kernel-space) –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –≤—ã–∑–æ–≤–∞ —Å –∏—Å—Ö–æ–¥–Ω—ã–º `msg.sender`. –û–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –∏ –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –∞ —Ç–∞–∫–∂–µ "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç –∞—Ç–∞–∫ reentrancy. –ü—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –ø–æ–ø—ã—Ç–∫–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—ã–∑—ã–≤–∞–µ—Ç `revert`, –∏–º–∏—Ç–∏—Ä—É—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Ethereum.

#### L2EthToken

[L2EthToken](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/L2EthToken.sol) - –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–∏ –∏–º–∏—Ç–∞—Ü–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è `msg.value` Ethereum. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º [bootloader](#bootloader) –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ [MsgValueSimulator](#msgvaluesimulator) –∏ [ContractDeployer](#contractdeployer).

#### Compressor

[Compressor](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/Compressor.sol) - –æ–¥–Ω–∏–º –∏–∑ —Å–∞–º—ã—Ö –¥–æ—Ä–æ–≥–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö, –ø–æ—ç—Ç–æ–º—É –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä —Å–∂–∏–º–∞–µ—Ç –ø—É–±–ª–∏–∫—É–µ–º—ã–µ pubdata –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:

-   —Å–∂–∞—Ç–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–≥–æ –±–∞–π—Ç–∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
-   —Å–∂–∞—Ç–∏–µ –¥–∏—Ñ–æ–≤ (—Ä–∞–∑–ª–∏—á–∏–π) —Å–æ—Å—Ç–æ—è–Ω–∏–π –±–ª–æ–∫—á–µ–π–Ω–∞

–î–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª—É–∂–µ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å–∂–∞—Ç–∏—è –±–∞–π—Ç–∫–æ–¥–∞ –∏–ª–∏ –¥–∏—Ñ–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π.

#### –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–º–µ–Ω—è—é—Ç –ø—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ EVM

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ [5 —Ç–∞–∫–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤](https://github.com/matter-labs/era-system-contracts/tree/main/contracts/precompiles):

-   **Ecrecover** ‚Äî —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `ecrecover`. –ö–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤—ã–∑–æ–≤–∞ –≤ —Ç–æ–º –∂–µ —Ñ–æ—Ä–º–∞—Ç–µ, —á—Ç–æ –∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç EVM, —Ç–æ –µ—Å—Ç—å –ø–µ—Ä–≤—ã–µ 32 –±–∞–π—Ç–∞ ‚Äî —ç—Ç–æ —Ö–µ—à, —Å–ª–µ–¥—É—é—â–∏–µ 32 –±–∞–π—Ç–∞ ‚Äî —ç—Ç–æ `v`, —Å–ª–µ–¥—É—é—â–∏–µ 32 –±–∞–π—Ç–∞ ‚Äî —ç—Ç–æ `r`, –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 32 –±–∞–π—Ç–∞ ‚Äî —ç—Ç–æ `s`. –û–Ω —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ç–µ–º –∂–µ –ø—Ä–∞–≤–∏–ª–∞–º, —á—Ç–æ –∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç EVM: `v` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–∏–±–æ 27, –ª–∏–±–æ 28; `r` –∏ `s` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–µ–Ω—å—à–µ –ø–æ—Ä—è–¥–∫–∞ –∫—Ä–∏–≤–æ–π.

-   **SHA256 & Keccak256** - –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Ethereum, keccak256 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—é (–∞ –Ω–µ –æ–ø–∫–æ–¥) –≤ zkSync.–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç –∏—Ö –≤ —Ñ–æ—Ä–º–∞—Ç, –æ–∂–∏–¥–∞–µ–º—ã–π zk-—Å—Ö–µ–º–æ–π.

-   **EcAdd & EcMul** –≠—Ç–∏ –ø—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏–º–∏—Ç–∏—Ä—É—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–π EcAdd –∏ EcMul EVM.

### Layer 1 smart-contracts

–°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã L1 –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ [—ç—Ç–æ–º](https://github.com/matter-labs/era-contracts/tree/main) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –∏—Ö –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –∑–∞ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏ [—Å—é–¥–∞](https://github.com/code-423n4/2023-10-zksync/blob/main/docs/Smart%20contract%20Section/L1%20smart%20contracts.md#mailboxfacet).

#### DiamondProxy

[DiamondProxy](https://github.com/matter-labs/era-contracts/blob/main/ethereum/contracts/zksync/DiamondProxy.sol) - —è–≤–ª—è–µ—Ç—Å—è —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –¥–ª—è L1. –≠—Ç–æ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω Diamond Proxy –ø–æ [EIP-2535](https://eips.ethereum.org/EIPS/eip-2535) —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏.

–û–¥–Ω–∏–º –∏–∑ –æ—Ç–ª–∏—á–∏–π –æ—Ç —ç—Ç–∞–ª–æ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Diamond Proxy —è–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞. –ö–∞–∂–¥–∞—è –∏–∑ –≥—Ä–∞–Ω–µ–π (facet) –∏–º–µ–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç, –º–æ–∂–Ω–æ –ª–∏ –∑–∞–º–æ—Ä–æ–∑–∏—Ç—å –∫ –Ω–µ–π –¥–æ—Å—Ç—É–ø.

_–í–∞–∂–Ω–æ!_ –ü—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –º–æ–≥—É—Ç –∑–∞–º–æ—Ä–æ–∑–∏—Ç—å Diamond (–Ω–æ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π facet), –∏ –≤—Å–µ –≥—Ä–∞–Ω–∏ —Å –º–∞—Ä–∫–µ—Ä–æ–º `isFreezable` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –ø–æ–∫–∞ —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–µ —Ä–∞–∑–º–æ—Ä–æ–∑–∏—Ç Diamond.

![diamond-proxy](./img/diamond-proxy.jpeg)

–®–∞–±–ª–æ–Ω diamond proxy –æ—á–µ–Ω—å –≥–∏–±–æ–∫ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º. –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª—è—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ –∏—Ö –ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Å–º—ã—Å–ª—É, —Å–Ω–∏–º–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä –±–∞–π—Ç-–∫–æ–¥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–Ω–∏–µ.

–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (facets):

#### AdminFacet

[AdminFacet](https://github.com/matter-labs/era-contracts/blob/main/ethereum/contracts/zksync/facets/Admin.sol) - –£–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ (Governor –∏ Validator), –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–∏—Å—Ç–µ–º—ã (—Ö—ç—à –±–∞–π—Ç-–∫–æ–¥–∞ `bootloader` L2, –∞–¥—Ä–µ—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∏ —Ç.–¥.), –∞ —Ç–∞–∫–∂–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–Ω–∏–µ–º/—Ä–∞–∑–º–æ—Ä–∞–∂–∏–≤–∞–Ω–∏–µ–º –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ DiamondProxy.

AdminFacet –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è –¥–≤—É–º—è —Å—É—â–Ω–æ—Å—Ç—è–º–∏:

**Governance** (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ) - –û—Ç–¥–µ–ª—å–Ω—ã–π —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç, —Å–ø–æ—Å–æ–±–Ω—ã–π –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ, —Ç–∞–∫–∏–µ –∫–∞–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞. –≠—Ç–æ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è –¥–≤—É–º—è –º—É–ª—å—Ç–∏–ø–æ–¥–ø–∏—Å—è–º–∏: –æ–¥–Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π Matter Labs, –∞ –¥—Ä—É–≥–∞—è –±—É–¥–µ—Ç –º—É–ª—å—Ç–∏—Å–∏–≥–æ–º —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –∫—Ä–∏–ø—Ç–æ—Å–æ–æ–±—â–µ—Å—Ç–≤–∞. –¢–æ–ª—å–∫–æ —Å–æ–≤–º–µ—Å—Ç–Ω–æ –æ–Ω–∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∞ Matter Labs –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π.

**Admin** (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä) - –ú—É–ª—å—Ç–∏—Å–∏–≥, —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –∫–æ–º–∞–Ω–¥–æ–π Matter Labs, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ, —Ç–∞–∫–∏–µ –∫–∞–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º.

_–í–∞–∂–Ω–æ!_ Admin —è–≤–ª—è–µ—Ç—Å—è —Ç–µ–º –∂–µ –º—É–ª—å—Ç–∏—Å–∏–≥–æ–º, —á—Ç–æ –∏ –≤–ª–∞–¥–µ–ª–µ—Ü –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ Governance.

#### MailboxFacet

[MailboxFacet](https://github.com/matter-labs/era-contracts/blob/main/ethereum/contracts/zksync/facets/Mailbox.sol) - —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤—è–∑—å—é –º–µ–∂–¥—É L1 –∏ L2, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø–µ—Ä–µ–¥–∞—á—É —Å–æ–æ–±—â–µ–Ω–∏–π, –º–æ—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —ç—Ñ–∏—Ä–∞ –Ω–∞ L2 –∏ –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–æ—Ç–∏–≤–æ–¥–µ–π—Å—Ç–≤–∏—è —Ü–µ–Ω–∑—É—Ä–µ. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è L1 -> L2 –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–ø—Ä–æ—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ L1 —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –Ω–∞ L2, –≥–¥–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –æ—Ç–º–µ—á–∞–µ—Ç –µ–≥–æ –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ L1. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è L2 -> L1 –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –Ω–µ —Ç—Ä–µ–±—É—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ L1.

_–í–∞–∂–Ω–æ!_ –ö–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç –∫–∞–∫–∏–µ-–ª–∏–±–æ –∞–∫—Ç–∏–≤—ã (ETH, —Ç–æ–∫–µ–Ω—ã ERC20 –∏–ª–∏ NFT).

#### ExecutorFacet

[ExecutorFacet](https://github.com/matter-labs/era-contracts/blob/main/ethereum/contracts/zksync/facets/Executor.sol) - —ç—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –ø–∞–∫–µ—Ç—ã L2, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å zk-–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤.

–ü—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–µ–ª–∏—Ç—Å—è –Ω–∞ —Ç—Ä–∏ —ç—Ç–∞–ø–∞:

-   commitBatches (—Ñ–∏–∫—Å–∞—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤)
-   proveBatches (–ø—Ä–æ–≤–µ—Ä–∫–∞ zk-–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤)
-   executeBatches (–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è)

–î–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ª–æ–≥–æ–≤, –≤–∫–ª—é—á–∞—è –∫–æ—Ä–Ω–µ–≤–æ–π —Ö–µ—à –¥–µ—Ä–µ–≤–∞ –ª–æ–≥–æ–≤ L2 -> L1, –ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ö–µ—à–∏ —Ä–∞–∑–ª–∏—á–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–ª—é—á–∏ –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è SystemLogKey. –≠—Ç–∏ –ª–æ–≥–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ —Ñ–∏–∫—Å–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è.

```solidity
    enum SystemLogKey {
        L2_TO_L1_LOGS_TREE_ROOT_KEY,
        TOTAL_L2_TO_L1_PUBDATA_KEY,
        STATE_DIFF_HASH_KEY,
        PACKED_BATCH_AND_L2_BLOCK_TIMESTAMP_KEY,
        PREV_BATCH_HASH_KEY,
        CHAINED_PRIORITY_TXN_HASH_KEY,
        NUMBER_OF_LAYER_1_TXS_KEY,
        EXPECTED_SYSTEM_CONTRACT_UPGRADE_TX_HASH_KEY
    }
```

#### GettersFacet

[GettersFacet](https://github.com/matter-labs/era-contracts/blob/main/ethereum/contracts/zksync/facets/Getters.sol) - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (view –∏ pure —Ñ—É–Ω–∫—Ü–∏–∏) –∏ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –∏–∑–º–µ–Ω—è—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. –≠—Ç–æ—Ç —Ñ–∞—Å–µ—Ç —Ç–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª "diamond loupe", –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏–º–∏ —Ñ–∞—Å–µ—Ç–∞–º–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∏—Ö, —Ç–∞–∫—É—é –∫–∞–∫ –∏—Ö –∞–¥—Ä–µ—Å–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–∏.

_–í–∞–∂–Ω–æ!_ GettersFacet –Ω–µ –ø–æ–¥–ª–µ–∂–∏—Ç –∑–∞–º–æ—Ä–æ–∑–∫–µ, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

### –î—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã Layer 1

#### Verifier

[Verifier](https://github.com/matter-labs/era-contracts/blob/2491d564362005f9ea4b17aca1b98b631889b7a5/ethereum/contracts/zksync/Verifier.sol) - —ç—Ç–æ—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç —è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º [PLONK](https://eprint.iacr.org/2019/953.pdf), —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Å–µ—Ç–∏ zkSync Era. –û–Ω –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –∏ –Ω–∞–¥–µ–∂–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

#### Bridges

[–ú–æ—Å—Ç—ã](https://github.com/matter-labs/era-contracts/tree/main/ethereum/contracts/bridge) –≤ zkSync ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –æ—Ç Diamond, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É L1 –∏ L2 –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–∞–º–∏. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–∫—Ç–∏–≤—ã –Ω–∞ –æ–¥–Ω–æ–º —É—Ä–æ–≤–Ω–µ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∏—Ö –≤—ã–ø—É—Å–∫ –Ω–∞ –¥—Ä—É–≥–æ–º —É—Ä–æ–≤–Ω–µ. –î–ª—è –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ —ç—Ñ–∏—Ä–∞ –∏ –¥—Ä—É–≥–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤ ERC20 —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ—Å—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ L1ERC20Bridge –∏ L2ERC20Bridge, –∞ —Ç–∞–∫–∂–µ L1WethBridge –∏ L2WethBridge –¥–ª—è WETH. –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –º–æ—Å—Ç–∞–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç Governance.

#### Governance

–ö–æ–Ω—Ç—Ä–∞–∫—Ç [Governance](https://github.com/matter-labs/era-contracts/blob/main/ethereum/contracts/governance/Governance.sol) –≤ zkSync Era —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–∑–æ–≤–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∫–∞–∫ –Ω–∞ L1, —Ç–∞–∫ –∏ –Ω–∞ L2. –û–Ω –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –£ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –µ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã–∑–æ–≤–æ–≤. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –¥–≤–∞ —ç—Ç–∞–ø–∞: –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å –ø–æ–ª–Ω–æ–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —á–µ—Ä–µ–∑ "—Ç–µ–Ω–µ–≤–æ–µ" –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å—Ä–æ—á–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π) –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏–ª–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ - –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å –æ–¥–æ–±—Ä–µ–Ω–∏—è –°–æ–≤–µ—Ç–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏). –ò Owner, –∏ –°–æ–≤–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç –æ—Ç–º–µ–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –µ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.

![governance](./img/governance.jpg)

#### ValidatorTimelock

–ö–æ–Ω—Ç—Ä–∞–∫—Ç [ValidatorTimelock](https://github.com/matter-labs/era-contracts/blob/main/ethereum/contracts/zksync/ValidatorTimelock.sol) —Å–ª—É–∂–∏—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º –∑–≤–µ–Ω–æ–º –º–µ–∂–¥—É –∞–∫–∫–∞—É–Ω—Ç–æ–º –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ (EOA) –∏ –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º zkSync. –ï–≥–æ –≥–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –æ–±–µ—Å–ø–µ—á–∏—Ç—å –æ—Ç—Å—Ä–æ—á–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ zkSync. zkSync –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ —Å–µ—Ç–∏ –∏ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –º–æ–∂–µ—Ç –∑–∞–º–æ—Ä–æ–∑–∏—Ç—å —Å–µ—Ç—å, –ø–æ–∑–≤–æ–ª—è—è –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–∏–Ω—è—Ç—å –º–µ—Ä—ã –ø—Ä–µ–∂–¥–µ, —á–µ–º –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏. –≠—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É—â–µ—Ä–±–∞ –æ—Ç —É—Ç–µ—á–∫–∏ –∫–ª—é—á–∞ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ –≤–æ –≤—Ä–µ–º—è –ê–ª—å—Ñ–∞-—Å—Ç–∞–¥–∏–∏ —Å–µ—Ç–∏. –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –º—É–ª—å—Ç–∏—Å–∏–≥–æ–º Matter Labs, —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç Governance.

## Transaction flow

–õ—É—á—à–µ –≤—Å–µ–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø–æ–º–æ–≥—É—Ç –ø–æ–Ω—è—Ç—å —ç—Ç–∞–ø—ã —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –æ–±—ã—á–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, –Ω–∞—á–∏–Ω–∞—è —Å –µ–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –¥–æ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–π —Ñ–∏–∫—Å–∞—Ü–∏–∏ –Ω–∞ Layer 1 –∏ Layer 2.

–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ zkSync Era –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è, –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –ø–∞–∫–µ—Ç—ã –Ω–∞ Layer 2 (zkSync), –∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∏—Ö –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç–∏ –∏ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ L2 - –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ Layer 1 (Ethereum).

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å L1, –∞ —Ç–∞–∫–∂–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º ZKP —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –Ω–∞ L1 –∏ L2. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã–π workflow —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞ L2 –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ L1:

![tx-workflow](./img/zksync-transaction-workflow.png)

1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–≤ –æ–∂–∏–¥–∞–Ω–∏–∏**
3. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–≤–∫–ª—é—á–µ–Ω–∞**
4. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞**
5. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–∑–∞–≤–µ—Ä—à–µ–Ω–∞**

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≤ zkSync Era —Å—É—â–µ—Å—Ç–≤—É–µ—Ç 4 —Å—Ç–∞—Ç—É—Å–∞ –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: **Pending**, **Included**, **Verified**, **Finalized**.

_–ó–∞–º–µ—Ç–∫–∞:_ –û–±–∑–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–¥–µ–ª–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ [—ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏](https://blog.quarkslab.com/zksync-transaction-workflow.html), –Ω–æ –∏–∑–ª–æ–∂–µ–Ω –±–æ–ª–µ–µ –∫—Ä–∞—Ç–∫–æ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∫–æ–¥ - –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ —É–≥–ª—É–±–ª–µ–Ω–∏—è –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ—Ç–∞–ª–∏.

### Pending status

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ –ê–ª–∏—Å–∞ —Ö–æ—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ ETH –ë–æ–±—É. –î–ª—è –Ω–∞—á–∞–ª–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –æ–±—ã—á–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è Ethereum —Å –ø—Ä–∏–≤—ã—á–Ω—ã–º–∏ –ø–æ–ª—è–º–∏:

| –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è          | –û–ø–∏—Å–∞–Ω–∏–µ                                                                  | –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ê–ª–∏—Å—ã                                          |
| ---------------------- | ------------------------------------------------------------------------- | ---------------------------------------------------------------- |
| `from`                 | –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é                   | –ê–¥—Ä–µ—Å –ê–ª–∏—Å—ã                                                      |
| `recipient`            | –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è                                                          | –ê–¥—Ä–µ—Å –ë–æ–±–∞                                                       |
| `signature`            | –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —á—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–º                   | –ü–æ–¥–ø–∏—Å—å, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ê–ª–∏—Å–æ–π, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –µ—ë –ø–∞—Ä—ã –∫–ª—é—á–µ–π |
| `nonce`                | –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π—Å—è —Å—á–µ—Ç—á–∏–∫                                   | –ó–Ω–∞—á–µ–Ω–∏–µ `nonce` —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –ê–ª–∏—Å—ã                            |
| `value`                | –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –≠—Ñ–∏—Ä–∞ (ETH) –æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—é, –≤ wei   | 1 ETH (1 \* 10<sup>18</sup>)                                     |
| `input data`           | –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤—ã–∑–æ–≤–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤  | –ü—É—Å—Ç–æ–µ –ø–æ–ª–µ, —Ç–∞–∫ –∫–∞–∫ —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –ë–æ–±–∞ - —ç—Ç–æ EOA               |
| `gasLimit`             | –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–¥–∏–Ω–∏—Ü –≥–∞–∑–∞, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–∞ –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–∏                                        |
| `maxPriorityFeePerGas` | –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –≥–∞–∑–∞ –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é                       | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–∏                                        |

–ó–∞—Ç–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –Ω–æ–¥—É L2 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ API Ethereum JSON-RPC (–º–µ—Ç–æ–¥ `eth_sendRawTransaction`).

_–ó–∞–º–µ—Ç–∫–∞:_ –ù–æ–¥–∞ –≤ zkSync –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "–æ–ø–µ—Ä–∞—Ç–æ—Ä" (operator).

–ó–∞—Ç–µ–º zkSync –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è L2 –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ [zks_getTransactionDetails](https://era.zksync.io/docs/api/api.html#zks-gettransactiondetails):

| –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è         | –û–ø–∏—Å–∞–Ω–∏–µ                                                                   | –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ê–ª–∏—Å—ã                                   |
| --------------------- | -------------------------------------------------------------------------- | --------------------------------------------------------- |
| `is_l1_originated`    | –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ, —É–∫–∞–∑—ã–≤–∞—é—â–µ–µ, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–∑ L1 –∏–ª–∏ –Ω–µ—Ç                     | `False`: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–¥–µ—Ç —Å L2-—Å—á–µ—Ç–∞ –ê–ª–∏—Å—ã –Ω–∞ L2-—Å—á–µ—Ç –ë–æ–±–∞ |
| `status`              | —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                                                  | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —ç—Ç–∞–ø–∞ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏             |
| `fee`                 | —Ä–∞–∑–º–µ—Ä –∫–æ–º–∏—Å—Å–∏–∏ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                       | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–∏                                 |
| `initiator_address`   | –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (—Ç.–µ. –∞–∫–∫–∞—É–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–ª–∞—Ç–∏—Ç –∫–æ–º–∏—Å—Å–∏—é)              | –∞–¥—Ä–µ—Å –ê–ª–∏—Å—ã                                               |
| `received_at`         | –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞, –∫–æ–≥–¥–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é                      | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ê–ª–∏—Å–æ–π             |
| `eth_commit_tx_hash`  | —Ö–µ—à Ethereum —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ L1 | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–∫–µ—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                    |
| `eth_prove_tx_hash`   | —Ö–µ—à Ethereum —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±—ã–ª–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ L1  | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–∫–µ—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                    |
| `eth_execute_tx_hash` | —Ö–µ—à Ethereum —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ L1         | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–∫–µ—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏                    |

_–í–∞–∂–Ω–æ!_ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ zkSync –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–ø–æ–≤, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —É –Ω–µ–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏ –¥—Ä—É–≥–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è.

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –ê–ª–∏—Å—ã, –æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–µ –≤ –º–µ–º–ø—É–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. –°—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è "**Pending**".

### Included status

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä –±–µ—Ä–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ –º–µ–º–ø—É–ª–∞ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç "L2 –±–ª–æ–∫–∏" –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–µ —Ç–æ–ª—å–∫–æ –≤ L2. –≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ —É–ª—É—á—à–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç, —Ç–∞–∫ –∫–∞–∫ –∫–æ—à–µ–ª—å–∫–∏ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–∫–ª—é—á–µ–Ω—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ–º–ø—É–ª–∞. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –ø–ª–∞—Ç–æ–π –∑–∞ –≥–∞–∑ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ —É–±—Ä–∞–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É `stashed_accounts` –¥–æ –ø–æ–Ω–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã –Ω–∞ –≥–∞–∑. –°–æ–∑–¥–∞–Ω–∏–µ L2 –±–ª–æ–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –º–µ–Ω–µ–µ —Å–µ–∫—É–Ω–¥—ã.

–ü—Ä–∏ —ç—Ç–æ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ L1 –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –º–µ–º–ø—É–ª–æ–º –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—Å–µ —Ä–∞–≤–Ω–æ –ø–æ–ø–∞–¥—É—Ç –≤ L1 –ø–∞–∫–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –≤–ª–∏—è—é—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è L2. –ö–æ–¥ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –º–µ–º–ø—É–ª–∞ –Ω–∞ —è–∑—ã–∫–µ Rust [–∑–¥–µ—Å—å](https://github.com/matter-labs/zksync-era/blob/main/core/lib/mempool/src/mempool_store.rs).

_–í–∞–∂–Ω–æ!_ –ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∫ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—é –ø–∞–∫–µ—Ç–∞ –¥–ª—è L1.

![l2-blocks-l1-batch](./img/l2-blocks-l1-batch.png)

–ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è –≤ L2 –±–ª–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ "**Included**". –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —ç—Ç–æ —Ç–∞–∫–∂–µ –∑–∞–Ω–∏–º–∞–µ—Ç –º–µ–Ω–µ–µ —Å–µ–∫—É–Ω–¥—ã.

#### Execute transaction

–≠—Ç–æ —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π, —Å–ª–æ–∂–Ω—ã–π –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —ç—Ç–∞–ø. –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ zkEVM –∏–ª–∏ EraVM. –¢—É—Ç –º—ã –ø–æ–¥—Ö–æ–¥–∏–º –∫ [—Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º Layer 2](#layer-2-smart-contracts).

–ü–µ—Ä–≤—ã–º —à–∞–≥–æ–º –ø–∞–∫–µ—Ç L1 —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —ç—Ç–∞–ø–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç [bootloader](https://github.com/matter-labs/era-system-contracts/blob/main/bootloader/bootloader.yul) - —ç—Ç–æ—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –æ—Å–æ–±–µ–Ω–Ω—ã–π: –æ–Ω —è–≤–ª—è–µ—Ç—Å—è —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ EraVM –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º –ø–∞–∫–µ—Ç–µ L1 (–ø—Ä–∏ —ç—Ç–æ–º –æ–Ω –Ω–∏–≥–¥–µ –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è).

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º `bootloader` –≤—ã–∑—ã–≤–∞–µ—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç [SystemContext](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/SystemContext.sol) –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–∞–∫–∏—Ö –∫–∞–∫ `block.timestamp`, `block.number` –∏ —Ç.–¥, –∑–∞—Ç–µ–º –∏–¥—É—Ç —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

-   –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
-   `bootloader` –≤—ã–∑—ã–≤–∞–µ—Ç —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (—Ç. –µ. –ê–ª–∏—Å—ã) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `validateTransaction`
    -   —Å–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç [NonceHolder](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/NonceHolder.sol) –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è `nonce` —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
    -   –∫–æ–¥ [DefaultAccount](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/DefaultAccount.sol), –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–π –∫ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
-   –µ—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞, –∑–∞–≥—Ä—É–∑—á–∏–∫ –≤—ã–∑—ã–≤–∞–µ—Ç —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –¥–ª—è –æ–ø–ª–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `payForTransaction`
-   –µ—Å–ª–∏ –∫–æ–º–∏—Å—Å–∏—è –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –æ–ø–ª–∞—á–µ–Ω–∞, –∑–∞–≥—Ä—É–∑—á–∏–∫ –≤—ã–∑—ã–≤–∞–µ—Ç —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `executeTransaction`
    -   –∫–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ DefaultAccount –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
-   `bootloader` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ–Ω—å–≥–∏ –Ω–∞ —Å—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∑–∞ –Ω–µ–∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–Ω—ã–π –≥–∞–∑

–¢–∞–∫–∂–µ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ (–æ—Ç–ø—Ä–∞–≤–∫–∞ ETH –æ—Ç –ê–ª–∏—Å—ã –∫ –ë–æ–±—É) –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `msg.value` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç [MsgValueSimulator](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/MsgValueSimulator.sol) - —ç—Ç–æ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–∑–º–µ–Ω–∏—Ç –±–∞–ª–∞–Ω—Å ETH –ê–ª–∏—Å—ã –∏ –ë–æ–±–∞ –≤ –µ—â–µ –æ–¥–Ω–æ–º —Å–∏—Å—Ç–µ–º–Ω–æ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ [L2EthToken](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/L2EthToken.sol). –û–Ω –≤—ã–∑—ã–≤–∞–µ—Ç —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –ë–æ–±–∞, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –ê–ª–∏—Å—ã –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–ø–∫–æ–¥–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ EraVM –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º `mimic_call`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å —Å–µ–±—è –∑–∞ –¥—Ä—É–≥–∏–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø—É—Ç–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è `msg.sender` –ª—é–±–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

_–í–∞–∂–Ω–æ!_ –≠—Ç–æ—Ç –æ–ø–∫–æ–¥ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ [–æ–ø–µ—Ä–∞—Ü–∏—è–º —è–¥—Ä–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞](https://github.com/code-423n4/2023-10-zksync/blob/main/docs/Smart%20contract%20Section/System%20contracts%20bootloader%20description.md#only-for-kernel-space) –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω —Å–Ω–∞—Ä—É–∂–∏.

–ù–∞ —Å—Ö–µ–º–µ –Ω–∏–∂–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –≤–µ—Å—å –æ–ø–∏—Å–∞–Ω–Ω—ã–π —Ñ–ª–æ—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–∞ —ç—Ñ–∏—Ä–∞ –æ—Ç –ê–ª–∏—Å—ã –∫ –ë–æ–±—É –Ω–∞ —É—Ä–æ–≤–Ω–µ L2 –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –æ–ø–µ—Ä–∞—Ü–∏–π —Å –≥–∞–∑–æ–º.
![alice-value-transfer-to-bob](./img/alice-value-transfer-to-bob.png)

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ EraVM —Å–æ–∑–¥–∞–µ—Ç `pubdata` (–ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ). –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ L1 (Ethereum) –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ zkSync Era. –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–ª–∞—Ç—ã –∑–∞ –≥–∞–∑ –ø—Ä–∏ —Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Ethereum –æ–Ω–∏ –±—É–¥—É—Ç —Å–∂–∞—Ç—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ L1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º [Compressor](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/Compressor.sol).

–î–∞–Ω–Ω—ã–µ zkSync –¥–µ–ª—è—Ç—Å—è –Ω–∞ —á–µ—Ç—ã—Ä–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

1. –õ–æ–≥–∏ L2 –≤ L1: "–¥–æ–∫–∞–∑—É–µ–º–∞—è" —á–∞—Å—Ç—å —Å–≤—è–∑–∏ –æ—Ç L2 –∫ L1, —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è EraVM.
2. –°–æ–æ–±—â–µ–Ω–∏—è L2 –≤ L1: –¥–ª–∏–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –ª–æ–≥–µ. –ö–∞–∂–¥–æ–µ –∏–∑ –Ω–∏—Ö —Å–≤—è–∑–∞–Ω–æ —Å –ª–æ–≥–æ–º L2 –≤ L1.
3. –ë–∞–π—Ç-–∫–æ–¥—ã —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤: –±–∞–π—Ç-–∫–æ–¥, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö L2. –ö–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö —Å–≤—è–∑–∞–Ω —Å –ª–æ–≥–æ–º L2 –≤ L1.
4. –ó–∞–ø–∏—Å–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è: –¥–∞–Ω–Ω—ã–µ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–ª–æ—Ç–æ–≤ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ L2 (–Ω–∞–ø–æ–º–Ω–∏–º, —á—Ç–æ –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã –≤ zkSync —è–≤–ª—è—é—Ç—Å—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏).

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º [—Ç—É—Ç](https://github.com/code-423n4/2023-10-zksync/blob/main/docs/Smart%20contract%20Section/Handling%20pubdata%20in%20Boojum.md).

–í–æ–∑–≤—Ä–∞—â–∞—è—Å—å –∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ê–ª–∏—Å—ã, –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π `pubdata` —è–≤–ª—è—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **storage diffs** (—Ä–∞–∑–ª–∏—á–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ). –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ ‚Äî —ç—Ç–æ –±–∞–ª–∞–Ω—Å –ê–ª–∏—Å—ã –∏ –±–∞–ª–∞–Ω—Å –ë–æ–±–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ L2EthToken, –∫–æ–≥–¥–∞ –ê–ª–∏—Å–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 1‚ÄáETH –ë–æ–±—É.

–í zkSync Era –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥—Ö–æ–¥, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è (statediff-based) –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ rollup. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ L1 (Ethereum) —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö. –í Ethereum –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–ª–æ—Ç–∞—Ö —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –∞–¥—Ä–µ—Å—É –∞–∫–∫–∞—É–Ω—Ç–∞ (–ø–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ä–µ–≤–∞), –∞ –∑–∞—Ç–µ–º –∫ –Ω–æ–º–µ—Ä—É —Å–ª–æ—Ç–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è (–≤—Ç–æ—Ä–æ–π —É—Ä–æ–≤–µ–Ω—å).

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç Ethereum, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ—Ä–µ–≤–∞ –≤ zkSync –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ "–ø–ª–æ—Å–∫–∞—è". –≠—Ç–æ –æ–¥–Ω–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –¥–µ—Ä–µ–≤–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –∫–ª—é—á–∏ —Å–ª–æ—Ç–æ–≤. –≠—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –∫–ª—é—á–∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –ø—É—Ç—ë–º —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–º–µ—Ä–∞ —Å–ª–æ—Ç–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∞–¥—Ä–µ—Å–∞ –∞–∫–∫–∞—É–Ω—Ç–∞, —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å —ç—Ç–∏–º —Å–ª–æ—Ç–æ–º: `H(Slot number, Account)`.

–≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, —Å–æ–∫—Ä–∞—â–∞—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —É—Ä–æ–≤–Ω–µ–π –∏ –æ–±–ª–µ–≥—á–∞—è –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è. –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ - –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ rollup.

![data-tree-differences](./img/data-tree-differences.png)

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç–∞ L1 (pubdata) —Å–∂–∞—Ç—ã, –æ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç [L1Messenger](https://github.com/matter-labs/era-system-contracts/blob/main/contracts/L1Messenger.sol). –≠—Ç–æ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã –∏ –±—ã–ª–∏ —Å–∂–∞—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã, —Å–∂–∞—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ zkSync –Ω–∞ L1 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–æ–≥–æ –æ–ø–∫–æ–¥–∞ –¥–ª—è EraVM - `to_l1`. –≠—Ç–æ—Ç —à–∞–≥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "L1 batch commitment" –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—É—Ç–µ–º –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `commitBatches` —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ [ExecutorFacet](https://github.com/matter-labs/era-contracts/blob/main/ethereum/contracts/zksync/facets/Executor.sol) –Ω–∞ L1.

```solidity
    function commitBatches(
        StoredBatchInfo memory _lastCommittedBatchData,
        CommitBatchInfo[] calldata _newBatchesData
    ) external override nonReentrant onlyValidator { ... }
```

–•—ç—à —ç—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ L1 –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —É–∑–ª–∞—Ö zkSync –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `eth_commit_tx_hash`, —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ L2. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç–∞ L1 —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –Ω–∞ L1, –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —ç—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –ø–æ–ª—É—á–∞—é—Ç —Å—Ç–∞—Ç—É—Å "**Included**", –∞ —Å–∞–º –ø–∞–∫–µ—Ç L1 –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "**Committed**".

![batch-pubdata-sending-to-l1](./img/batch-pubdata-sending-to-l1.png)

### Verified status

–°–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ê–ª–∏—Å—ã —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è ¬´–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–π¬ª, –µ—Å–ª–∏ –ø–∞–∫–µ—Ç L1, –≤ –∫–æ—Ç–æ—Ä—ã–π –æ–Ω–∞ –≤–∫–ª—é—á–µ–Ω–∞, –ø—Ä–æ–≤–µ—Ä–µ–Ω –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ L1.

–í zkSync Era –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞ Zero-Knowledge Proofs (ZKP) –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–∞ –≤—Ç–æ—Ä–æ–º —É—Ä–æ–≤–Ω–µ (L2) –∫–æ—Ç–æ—Ä—É—é Matter Labs —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∞ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è [Boojum](https://zksync.mirror.xyz/HJ2Pj45EJkRdt5Pau-ZXwkV2ctPx8qFL19STM5jdYhc).

–ö–∞–∫ –º—ã –≤–∏–¥–µ–ª–∏ —Ä–∞–Ω–µ–µ - –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º –ø–∞–∫–µ—Ç–∞ L1, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≥—Ä—É–ø–ø—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π L2. –≠—Ç–æ—Ç –ø–∞–∫–µ—Ç –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç zkSync –Ω–∞ Ethereum - ExecutorFacet.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä, –¥–µ–π—Å—Ç–≤—É—è –∫–∞–∫ –¥–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ (witness), –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–µ–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø–∞–∫–µ—Ç–∞ L1. –≠—Ç–æ —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏—é [proveBatches](https://github.com/matter-labs/era-contracts/blob/2491d564362005f9ea4b17aca1b98b631889b7a5/ethereum/contracts/zksync/facets/Executor.sol#L311) –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ `ExecutorFacet`.

```solidity
    function proveBatches(
        StoredBatchInfo calldata _prevBatch,
        StoredBatchInfo[] calldata _committedBatches,
        ProofInput calldata _proof
    ) external nonReentrant onlyValidator { ... }
```

–ö–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –≤—ã–∑—ã–≤–∞–µ—Ç —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç zkSync –Ω–∞ L1 –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ - [Verifier](https://github.com/matter-labs/era-contracts/blob/2491d564362005f9ea4b17aca1b98b631889b7a5/ethereum/contracts/zksync/Verifier.sol).

```solidity
    function verify(
        uint256[] calldata, // _publicInputs
        uint256[] calldata, // _proof
        uint256[] calldata // _recursiveAggregationInput
    ) external view returns (bool)
```

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–∞ —Å—Ç–∞—Ç—É—Å –ø–∞–∫–µ—Ç–∞ L1 –∏ –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö –≤ –Ω–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Å–µ—Ç–∏ zkSync, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—è –∏—Ö –∫–∞–∫ –≤–µ—Ä–Ω—ã–µ –∏ –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–µ.

![batch-execution-zk-proof](./img/batch-execution-zk-proof.png)

–•—ç—à —ç—Ç–æ–π L1-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±—É–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω —É–∑–ª–∞–º–∏ zkSync –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `eth_prove_tx_hash`, –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å –¥–µ—Ç–∞–ª—è–º–∏ L2-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ L1-–ø–∞–∫–µ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ L1, –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —ç—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –ø–æ–ª—É—á–∞—é—Ç —Å—Ç–∞—Ç—É—Å "**Verified**". –°–∞–º L1-–ø–∞–∫–µ—Ç —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "Verified".

### Finalized status

–ò—Ç–∞–∫, –ø–∞–∫–µ—Ç –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ L1 —Ñ—É–Ω–∫—Ü–∏–µ–π `commitBatches`, –¥–æ—Å—Ç—É–ø–Ω–æ–π –¥–ª—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ê–ª–∏—Å—ã –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ L1 –∫–∞–∫ "Included".

–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è EraVM –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `proveBatches` –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–º, –∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç Verifier –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ–≥–æ.

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–∞–∫–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫—Ä–æ—Å—Å-—á–µ–π–Ω –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏, –¥–æ—Å—Ç—É–ø–Ω–æ–π —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç [Mailbox](https://github.com/matter-labs/era-contracts/blob/main/ethereum/contracts/zksync/facets/Mailbox.sol)). –ü–æ—Å–∫–æ–ª—å–∫—É –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–µ –ê–ª–∏—Å–æ–π —Å—Ä–µ–¥—Å—Ç–≤–∞ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ L2, –¥–ª—è —ç—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∫—Ä–æ—Å—Å-—á–µ–π–Ω –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è.

–ü–æ—Å–ª–µ–¥–Ω–∏–º —à–∞–≥–æ–º —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —è–≤–ª—è–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ L1. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –ø–æ—Å–ª–µ –ø–∞–∫–µ—Ç–æ–≤ L1, –¥–æ–ª–∂–Ω–æ —Å—Ç–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º L2 –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ L1.

![batch-execution-on-l1](./img/batc-execution-on-l1.png)

–ó–∞–≤–µ—Ä—à–∞—é—â–∏–π —ç—Ç–∞–ø –≤–∫–ª—é—á–∞–µ—Ç –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `executeBatches` –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ [ExecutorFacet](#executorfacet) –≤ L1.

```solidity
    function executeBatches(
        StoredBatchInfo[] calldata _batchesData
    ) external nonReentrant onlyValidator { ... }
```

–•–µ—à —ç—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ L1 –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ zkSync –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `eth_execute_tx_hash`, —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ L2. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—É—Ç–µ–º –∏–º–ø–æ—Ä—Ç–∞ –¥–µ—Ä–µ–≤–∞ –ú–µ—Ä–∫–ª–∞ –ª–æ–≥–æ–≤ L2 –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞ L1. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞ –ø–∞–∫–µ—Ç—ã L1 –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ "**Finalized**". –ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –æ—Ç–º–µ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π L2 –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞, –∏ –æ–Ω–∏ –º–æ–≥—É—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º–∏.

–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ê–ª–∏—Å—ã —Ç–µ–ø–µ—Ä—å —Ç–æ–∂–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π.

